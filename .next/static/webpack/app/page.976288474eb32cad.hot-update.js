"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/store.js":
/*!**************************!*\
  !*** ./src/lib/store.js ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppProvider: function() { return /* binding */ AppProvider; },\n/* harmony export */   useApp: function() { return /* binding */ useApp; },\n/* harmony export */   useAppContext: function() { return /* binding */ useAppContext; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ useAppContext,AppProvider,useApp auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\n\nconst AppContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\nfunction useAppContext() {\n    _s();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppContext);\n}\n_s(useAppContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nfunction AppProvider(param) {\n    let { children } = param;\n    _s1();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bets, setBets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [ideas, setIdeas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Create state, init false. We load from storage in a useEffect to allow hydration.\n    const [isGuestMode, setIsGuestMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Load Guest Mode from LocalStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const stored = localStorage.getItem(\"isGuestMode\");\n        if (stored === \"true\") setIsGuestMode(true);\n    }, []);\n    // Save Guest Mode to LocalStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        localStorage.setItem(\"isGuestMode\", isGuestMode);\n    }, [\n        isGuestMode\n    ]);\n    // Safety timeout: If Firebase auth hangs for >1s, just load the app (as signed out) to prevent being stuck.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setIsLoaded((prev)=>{\n                if (!prev) console.warn(\"Firebase auth slow - forcing load state\");\n                return true;\n            });\n        }, 1200);\n        return ()=>clearTimeout(timer);\n    }, []);\n    // --- 1. Auth & User Profile Listener ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let unsubscribeProfile = null;\n        // Auth Listener\n        const unsubscribeAuth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, (firebaseUser)=>{\n            // 1. Clean up previous profile listener if any\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n                unsubscribeProfile = null;\n            }\n            if (firebaseUser) {\n                // User is signed in -> Set basic auth user immediately to prevent logout loop\n                // We will enrich this with DB data in a moment\n                setUser((prev)=>prev || {\n                        id: firebaseUser.uid,\n                        email: firebaseUser.email,\n                        username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                        role: \"user\"\n                    });\n                // Listen to Firestore Profile\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", firebaseUser.uid);\n                unsubscribeProfile = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(userRef, (docSnap)=>{\n                    if (docSnap.exists()) {\n                        const userData = docSnap.data();\n                        // Check for missing referral code (Backfill for existing users)\n                        if (!userData.referralCode) {\n                            const newCode = Math.random().toString(36).substring(2, 10).toUpperCase();\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                                referralCode: newCode\n                            }).catch((err)=>console.error(\"Error backfilling referral code\", err));\n                        // We don't need to manually update state here, the snapshot will fire again instantly\n                        }\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...userData\n                        });\n                    } else {\n                        // Document does not exist (e.g. first login or previous error).\n                        console.log(\">>> DETECTED NEW USER (No Profile Found) - Creating Profile...\");\n                        // Auto-create the user profile in Firestore\n                        const myReferralCode = Math.random().toString(36).substring(2, 10).toUpperCase();\n                        const newUser = {\n                            email: firebaseUser.email,\n                            username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                            role: firebaseUser.email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                            balance: 1000,\n                            createdAt: new Date().toISOString(),\n                            referralCode: myReferralCode\n                        };\n                        // Write to DB\n                        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, newUser).then(()=>{\n                            console.log(\">>> SUCCESSFULLY CREATED PROFILE FOR:\", newUser.email);\n                        // alert(\"Welcome! Your profile has been created with $1000.\");\n                        }).catch((err)=>{\n                            console.error(\">>> ERROR CREATING PROFILE:\", err);\n                            alert(\"Error creating profile. Check permissions.\");\n                        });\n                        // Set local state\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...newUser\n                        });\n                    }\n                    setIsLoaded(true);\n                });\n            } else {\n                // User is signed out\n                setUser(null);\n                setBets([]);\n                setIsLoaded(true);\n            }\n        });\n        // Cleanup function when component unmounts\n        return ()=>{\n            unsubscribeAuth();\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n            }\n        };\n    }, []);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // List of all users for leaderboard\n    const [systemAnnouncement, setSystemAnnouncement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // ... (existing timeout code) ...\n    // --- 2. Data Listeners (Events, Ideas, Users, Announcement) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Listen to System Announcement\n        const announcementRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"system\", \"announcement\");\n        const unsubAnnouncement = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(announcementRef, (docSnap)=>{\n            if (docSnap.exists()) {\n                setSystemAnnouncement(docSnap.data());\n            } else {\n                setSystemAnnouncement(null);\n            }\n        });\n        // Listen to Events (Limit 50 active)\n        const eventsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubEvents = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(eventsQuery, (snapshot)=>{\n            const eventsList = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            eventsList.sort((a, b)=>{\n                // 1. Sort by manual order if exists (ascending: low numbers first)\n                const orderA = a.order !== undefined ? a.order : 9999;\n                const orderB = b.order !== undefined ? b.order : 9999;\n                if (orderA !== orderB) return orderA - orderB;\n                // 2. Open events first\n                if (a.status === \"open\" && b.status !== \"open\") return -1;\n                if (a.status !== \"open\" && b.status === \"open\") return 1;\n                // 3. Then sort by startAt date (ascending: earliest date first)\n                return new Date(a.startAt) - new Date(b.startAt);\n            });\n            setEvents(eventsList);\n        });\n        // Listen to Ideas (Limit 50 recent)\n        // Removed orderBy to avoid missing index issues. Sorting client-side.\n        const ideasQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubIdeas = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(ideasQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            list.sort((a, b)=>new Date(b.submittedAt) - new Date(a.submittedAt));\n            setIdeas(list);\n        }, (error)=>{\n            console.error(\"Error listening to ideas:\", error);\n        });\n        // Listen to Users (Global List for Leaderboard & Admin)\n        const usersQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubUsers = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(usersQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Client-side sort by balance desc\n            list.sort((a, b)=>(b.balance || 0) - (a.balance || 0));\n            setUsers(list);\n        });\n        return ()=>{\n            unsubEvents();\n            unsubIdeas();\n            unsubUsers();\n        };\n    }, []);\n    // --- 3. Bets Listener (Only for logged in user) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!user) {\n            setBets([]);\n            return;\n        }\n        const betsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(100));\n        const unsubBets = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(betsQuery, (snapshot)=>{\n            // We'll trust the client side sorting for now or add orderBy index later\n            const myBets = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            myBets.sort((a, b)=>new Date(b.placedAt) - new Date(a.placedAt));\n            setBets(myBets);\n        // localStorage.setItem('bet_bets_cache', JSON.stringify(myBets));\n        });\n        return ()=>unsubBets();\n    }, [\n        user === null || user === void 0 ? void 0 : user.id\n    ]); // Only re-run if user ID changes is tricky, better safe dependency\n    // --- Actions ---\n    const signup = async (email, username, password, referralCode)=>{\n        try {\n            const resp = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.createUserWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            // Generate a simple unique referral code (8 chars)\n            // In a real app, you'd check for collisions, but this is sufficient for now.\n            const myReferralCode = Math.random().toString(36).substring(2, 10).toUpperCase();\n            let referredBy = null;\n            // Handle Referral Reward\n            if (referralCode && referralCode.trim() !== \"\") {\n                try {\n                    // Find the user who owns this code\n                    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"referralCode\", \"==\", referralCode.trim()));\n                    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                    if (!snapshot.empty) {\n                        const referrerDoc = snapshot.docs[0];\n                        const referrerId = referrerDoc.id;\n                        // Credit $500 to referrer\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", referrerId), {\n                            balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(500)\n                        });\n                        referredBy = referrerId;\n                        console.log(\"Referral successful! Credited $500 to \".concat(referrerDoc.data().username));\n                    }\n                } catch (err) {\n                    console.error(\"Error processing referral:\", err);\n                }\n            }\n            // Create User Document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", resp.user.uid), {\n                email,\n                username: username || email.split(\"@\")[0],\n                role: email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                balance: 1000,\n                createdAt: new Date().toISOString(),\n                referralCode: myReferralCode,\n                referredBy: referredBy\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const signin = async (emailOrUsername, password)=>{\n        try {\n            let email = emailOrUsername.trim();\n            // If it looks like an email, just try it directly\n            if (email.includes(\"@\")) {\n                try {\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n                    return {\n                        success: true\n                    };\n                } catch (e) {\n                    console.error(\"Email login failed\", e);\n                    return {\n                        success: false,\n                        error: e.message\n                    };\n                }\n            }\n            // Username lookup logic\n            const usernameInput = email;\n            const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\");\n            let candidateEmails = new Set();\n            // Helper to fetch and add emails (No LIMIT to ensure we find the right one)\n            const addCandidates = async (param, val)=>{\n                try {\n                    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(col, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(param, \"==\", val)); // Removed limit\n                    const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                    snap.forEach((doc)=>{\n                        const data = doc.data();\n                        if (data.email) candidateEmails.add(data.email);\n                    });\n                } catch (err) {\n                    console.error(\"Query failed for\", val, err);\n                }\n            };\n            // 1. Exact Match\n            await addCandidates(\"username\", usernameInput);\n            // 2. Lowercase\n            await addCandidates(\"username\", usernameInput.toLowerCase());\n            // 3. Capitalized (Try standard First Capital)\n            const capitalized = usernameInput.charAt(0).toUpperCase() + usernameInput.slice(1).toLowerCase();\n            await addCandidates(\"username\", capitalized);\n            // 4. UPPERCASE\n            await addCandidates(\"username\", usernameInput.toUpperCase());\n            if (candidateEmails.size === 0) {\n                return {\n                    success: false,\n                    error: \"Username '\".concat(usernameInput, \"' does not exist.\")\n                };\n            }\n            // Try each email\n            let tried = [];\n            for (let candidateEmail of candidateEmails){\n                if (typeof candidateEmail !== \"string\") continue;\n                candidateEmail = candidateEmail.trim();\n                try {\n                    // Attempt 1: Standard\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, candidateEmail, password);\n                    return {\n                        success: true\n                    };\n                } catch (error) {\n                    // Attempt 2: Trimmed Password\n                    if (password.trim() !== password) {\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, candidateEmail, password.trim());\n                            return {\n                                success: true\n                            };\n                        } catch (e2) {}\n                    }\n                    // Attempt 3: Email with all whitespace removed (just in case)\n                    const emailNoWhitespace = candidateEmail.replace(/\\s/g, \"\");\n                    if (emailNoWhitespace !== candidateEmail) {\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, emailNoWhitespace, password);\n                            return {\n                                success: true\n                            };\n                        } catch (e3) {}\n                    }\n                    tried.push(candidateEmail);\n                    if (error.code === \"auth/invalid-credential\" || error.code === \"auth/wrong-password\") {\n                        continue;\n                    }\n                    // Return technical error\n                    return {\n                        success: false,\n                        error: \"System Error (\".concat(error.code, \")\")\n                    };\n                }\n            }\n            // If loop finishes, none worked.\n            // Return the email found so the UI can switch to it.\n            const firstEmail = tried[0];\n            return {\n                success: false,\n                suggestedEmail: firstEmail,\n                error: \"Password incorrect.\"\n            };\n        } catch (error) {\n            console.error(error);\n            return {\n                success: false,\n                error: \"System Error: \" + error.message\n            };\n        }\n    };\n    const logout = async ()=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n    const placeBet = async (eventId, outcomeId, amount)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        if (user.balance < amount) return {\n            success: false,\n            error: \"Insufficient funds\"\n        };\n        const event = events.find((e)=>e.id === eventId);\n        if (!event || event.status !== \"open\") return {\n            success: false,\n            error: \"Event is locked\"\n        };\n        // Check for existing bets on OTHER sides\n        const qExisting = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n        const snapExisting = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qExisting);\n        const otherSideBet = snapExisting.docs.find((d)=>d.data().outcomeId !== outcomeId);\n        if (otherSideBet) {\n            return {\n                success: false,\n                error: \"Loyalty check! You already bet on the other side. No switching.\"\n            };\n        }\n        const outcome = event.outcomes.find((o)=>o.id === outcomeId);\n        try {\n            // 1. Deduct Balance & Add to Invested\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id);\n            // Streak Logic\n            const today = new Date();\n            const todayStr = today.toDateString();\n            const yesterday = new Date();\n            yesterday.setDate(today.getDate() - 1);\n            const yesterdayStr = yesterday.toDateString();\n            let newStreak = user.currentStreak || 0;\n            const lastDate = user.lastBetDate || \"\"; // Assuming stored as toDateString()\n            let streakType = \"none\";\n            // Only update logic if we haven't already processed a streak for today\n            // (Or if the user had 0 streak and just started today)\n            if (lastDate !== todayStr) {\n                if (lastDate === yesterdayStr) {\n                    newStreak += 1;\n                    streakType = \"increased\";\n                } else {\n                    newStreak = 1; // Broken streak or first bet\n                    streakType = \"started\";\n                }\n            } else {\n                if (newStreak === 0) {\n                    newStreak = 1;\n                    streakType = \"started\";\n                }\n            }\n            const newLongest = Math.max(newStreak, user.longestStreak || 0);\n            // 1. Deduct Balance, Add to Invested, Update Streak\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-amount),\n                invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                currentStreak: newStreak,\n                longestStreak: newLongest,\n                lastBetDate: todayStr\n            });\n            // 2. Create Bet\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), {\n                userId: user.id,\n                username: user.username,\n                eventId,\n                outcomeId,\n                outcomeLabel: outcome.label,\n                eventTitle: event.title,\n                amount: parseFloat(amount),\n                odds: outcome.odds,\n                potentialPayout: amount * outcome.odds,\n                status: \"pending\",\n                placedAt: new Date().toISOString()\n            });\n            // 3. Update Event Stats (Best Effort - ignore permission errors for now)\n            try {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                    [\"stats.counts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    [\"stats.amounts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                    \"stats.totalBets\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    \"stats.totalPool\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount)\n                });\n            } catch (statsErr) {\n                console.warn(\"Could not update event stats (likely permission issue):\", statsErr);\n            }\n            return {\n                success: true,\n                streakType,\n                newStreak\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const createEvent = async (eventData)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), {\n                status: \"open\",\n                createdAt: new Date().toISOString(),\n                ...eventData\n            });\n        } catch (e) {\n            console.error(\"Error creating event\", e);\n        }\n    };\n    const updateEventOrder = async (eventId, newOrder)=>{\n        try {\n            if (!user || user.role !== \"admin\") return {\n                success: false,\n                error: \"Unauthorized\"\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                order: newOrder\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteEvent = async (eventId)=>{\n        try {\n            // Note: This does NOT refund bets automatically in this simple version\n            // You would need Cloud Functions for robust backend logic\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                status: \"deleted\"\n            }); // Soft delete is safer?\n            // For now, let's just actually delete it for cleanliness in the UI as requested previously\n            // but usually on local version we just filtered.\n            // Wait, Firestore deleteDoc is better.\n            // await deleteDoc(doc(db, 'events', eventId)); \n            // Let's stick to update to 'deleted' or just rely on the UI filter?\n            // Let's actually delete.\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId));\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const toggleFeatured = async (eventId, currentStatus)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                featured: !currentStatus\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const resolveEvent = async (eventId, winnerOutcomeId)=>{\n        try {\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            // 1. Mark Event as Settled (In Batch)\n            batch.update(eventRef, {\n                status: \"settled\",\n                winnerOutcomeId\n            });\n            // 2. Process Bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ); // Need all bets to settle\n            for (const betDoc of betsSnap.docs){\n                const bet = betDoc.data();\n                // Skip if already settled to avoid double-pay/deduct\n                if (bet.status !== \"pending\") continue;\n                const isWinner = bet.outcomeId === winnerOutcomeId;\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                // Fetch User to Calc Portfolio Impact\n                let percentChange = 0;\n                try {\n                    const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n                    if (userSnap.exists()) {\n                        const userData = userSnap.data();\n                        const currentNetWorth = (userData.balance || 0) + (userData.invested || 0);\n                        // Profit (or Loss) from this specific bet\n                        const profit = isWinner ? bet.potentialPayout - bet.amount // Net Profit\n                         : -bet.amount; // Net Loss\n                        // Portfolio Impact % = (Profit / currentNetWorth) * 100\n                        percentChange = currentNetWorth > 0 ? profit / currentNetWorth * 100 : 0;\n                    }\n                } catch (err) {\n                    console.error(\"Error calc legacy stats\", err);\n                }\n                // Settle the bet document\n                batch.update(betDoc.ref, {\n                    status: isWinner ? \"won\" : \"lost\",\n                    settledAt: new Date().toISOString()\n                });\n                // Update User Balance & Invested & Last Bet Stats\n                if (isWinner) {\n                    batch.update(userRef, {\n                        balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                        lastBetPercent: percentChange\n                    });\n                } else {\n                    batch.update(userRef, {\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                        lastBetPercent: percentChange\n                    });\n                }\n                // Create Notification\n                const notifRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\"));\n                batch.set(notifRef, {\n                    userId: bet.userId,\n                    type: \"result\",\n                    eventId: eventId,\n                    title: isWinner ? \"You Won!\" : \"Bet Lost\",\n                    message: isWinner ? \"You won $\".concat(bet.potentialPayout.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\") : \"You lost $\".concat(bet.amount.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\"),\n                    read: false,\n                    createdAt: new Date().toISOString()\n                });\n            }\n            await batch.commit();\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Resolve Event Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const fixStuckBets = async ()=>{\n        try {\n            const eventsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"settled\"));\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(eventsQ);\n            let totalFixed = 0;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            for (const eventDoc of eventsSnap.docs){\n                const event = eventDoc.data();\n                const winnerOutcomeId = event.winnerOutcomeId;\n                if (!winnerOutcomeId) continue;\n                const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventDoc.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n                const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n                for (const betDoc of betsSnap.docs){\n                    const bet = betDoc.data();\n                    // Double check it's pending\n                    if (bet.status !== \"pending\") continue;\n                    const isWinner = bet.outcomeId === winnerOutcomeId;\n                    const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                    let percentChange = 0;\n                    try {\n                        // Fetch User for Net Worth Calc\n                        const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n                        const userData = userSnap.exists() ? userSnap.data() : {\n                            balance: 0,\n                            invested: 0\n                        };\n                        const currentNetWorth = (userData.balance || 0) + (userData.invested || 0);\n                        // Profit (or Loss) from this specific bet\n                        const profit = isWinner ? bet.potentialPayout - bet.amount // Net Profit\n                         : -bet.amount; // Net Loss\n                        // Portfolio Impact % = (Profit / currentNetWorth) * 100\n                        percentChange = currentNetWorth > 0 ? profit / currentNetWorth * 100 : 0;\n                    } catch (err) {\n                        console.error(err);\n                    }\n                    batch.update(betDoc.ref, {\n                        status: isWinner ? \"won\" : \"lost\",\n                        settledAt: new Date().toISOString()\n                    });\n                    if (isWinner) {\n                        batch.update(userRef, {\n                            balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                            invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                            lastBetPercent: percentChange\n                        });\n                    } else {\n                        batch.update(userRef, {\n                            invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                            lastBetPercent: percentChange\n                        });\n                    }\n                    totalFixed++;\n                }\n            }\n            if (totalFixed > 0) {\n                await batch.commit();\n            }\n            return {\n                success: true,\n                message: \"Fixed \".concat(totalFixed, \" stuck bets.\")\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteBet = async (betId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\", betId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateEvent = async (eventId, data)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), data);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const setMainBet = async (eventId, mainOutcomeId)=>{\n        try {\n            if (!user || user.role !== \"admin\") return {\n                success: false,\n                error: \"Unauthorized\"\n            };\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(eventRef);\n            if (!snap.exists()) return {\n                success: false,\n                error: \"Event not found\"\n            };\n            const evt = snap.data();\n            // Remove 'main' type from all, then set it for the chosen one plus its sibling?\n            // Wait, \"Main Bet\" usually implies a PAIR of outcomes (e.g. Chiefs vs 49ers).\n            // If the user selects \"Chiefs\" as main, we likely want \"49ers\" (the other one in that pair) to also be main.\n            // But outcomes are just a flat list. \n            // Simplification: The admin clicks \"Highlight This Pair\" on one outcome, and we assume the next one is its pair?\n            // Or we just flag THIS outcome's pair as main.\n            // Let's iterate and just toggle the type 'main' for the targeted outcome(s).\n            // Actually, cleaner design: toggle \"type: main\" for specific outcomes.\n            const newOutcomes = evt.outcomes.map((o)=>{\n                if (o.id === mainOutcomeId) return {\n                    ...o,\n                    type: \"main\"\n                };\n                // If we want to unset others? Maybe not, maybe multiple main bets allowed.\n                return o;\n            });\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                outcomes: newOutcomes\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const submitIdea = async (ideaText)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        // Duplicate Check\n        const qDup = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"text\", \"==\", ideaText));\n        const snapDup = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qDup);\n        if (!snapDup.empty) {\n            return {\n                success: false,\n                error: \"You already suggested this! Hey switch it up.\"\n            };\n        }\n        // Check Daily Limit (Client-side check based on local user data, ideally backend does this)\n        const today = new Date().toDateString();\n        let currentCount = 0;\n        if (user.submissionData && user.submissionData.date === today) {\n            currentCount = user.submissionData.count;\n        }\n        if (currentCount >= 5) {\n            return {\n                success: false,\n                error: \"Daily limit reached (5/5). Come back tomorrow!\"\n            };\n        }\n        try {\n            // 1. Create Idea Doc\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), {\n                userId: user.id,\n                username: user.username,\n                text: ideaText,\n                submittedAt: new Date().toISOString()\n            });\n            // 2. Update User (Reward + Submission Count)\n            // If date different, simple set. If same, increment.\n            // Firestore update is tricky with nested objects, so we set the whole object.\n            // We calculate new count locally to ensure sync with the check.\n            const newCount = currentCount + 1;\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(15),\n                submissionData: {\n                    date: today,\n                    count: newCount\n                }\n            });\n            return {\n                success: true,\n                message: \"Idea submitted! +$15.00\"\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUserGroups = async (targetUserId, groups)=>{\n        try {\n            if (!user || user.role !== \"admin\") return {\n                success: false,\n                error: \"Unauthorized\"\n            };\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                groups: groups || []\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteIdea = async (ideaId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\", ideaId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUser = async (updates)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        try {\n            // 1. Update Firestore FIRST (Profile Pic, Username, etc.)\n            // This ensures that non-sensitive updates always succeed even if Auth fails.\n            const firestoreUpdates = {\n                ...updates\n            };\n            delete firestoreUpdates.password; // Don't store raw password in DB\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), firestoreUpdates);\n            // Update local state immediately for the UI\n            setUser((prev)=>({\n                    ...prev,\n                    ...firestoreUpdates\n                }));\n            // 2. Attempt Auth Updates (Sensitive: Email/Password)\n            let authUpdated = false;\n            let authErrorMsg = \"\";\n            try {\n                // Update Email\n                if (updates.email && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    const currentAuthEmail = _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.email;\n                    if (updates.email.toLowerCase() !== currentAuthEmail.toLowerCase()) {\n                        console.log(\"Debug: Attempting email update from \".concat(currentAuthEmail, \" to \").concat(updates.email));\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                            authUpdated = true;\n                        } catch (emailErr) {\n                            if (emailErr.code === \"auth/operation-not-allowed\" || emailErr.message.includes(\"verify\")) {\n                                await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.verifyBeforeUpdateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                                return {\n                                    success: true,\n                                    message: \"Profile saved & Verification sent to \".concat(updates.email, \".\")\n                                };\n                            }\n                            throw emailErr;\n                        }\n                    }\n                }\n                // Update Password\n                if (updates.password && updates.password.length > 0) {\n                    if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updatePassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.password);\n                        authUpdated = true;\n                    }\n                }\n                // Force refresh if Auth changed\n                if (authUpdated && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.reload();\n                }\n            } catch (authErr) {\n                console.error(\"Auth Update Failed:\", authErr);\n                if (authErr.code === \"auth/requires-recent-login\") {\n                    authErrorMsg = \" (Note: Re-login required to update Email/Password)\";\n                } else {\n                    authErrorMsg = \" (Auth Error: \".concat(authErr.message, \")\");\n                }\n            }\n            const successMsg = authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg;\n            return {\n                success: true,\n                message: authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg\n            };\n        } catch (e) {\n            console.error(\"Firestore Update Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const recalculateLeaderboard = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all pending bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            // If index missing, this line throws.\n            const investmentsByUser = {};\n            betsSnap.docs.forEach((doc)=>{\n                const bet = doc.data();\n                if (!investmentsByUser[bet.userId]) investmentsByUser[bet.userId] = 0;\n                investmentsByUser[bet.userId] += bet.amount || 0;\n            });\n            // 2. Fetch all users to update their stats\n            const usersSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"));\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let updateCount = 0;\n            usersSnap.docs.forEach((userDoc)=>{\n                const uid = userDoc.id;\n                const currentInvested = userDoc.data().invested || 0;\n                const correctInvested = investmentsByUser[uid] || 0;\n                // Only update if different to save writes\n                if (Math.abs(currentInvested - correctInvested) > 0.01) {\n                    batch.update(userDoc.ref, {\n                        invested: correctInvested\n                    });\n                    updateCount++;\n                }\n            });\n            if (updateCount > 0) await batch.commit();\n            return {\n                success: true,\n                message: \"Recalculated! Updated \".concat(updateCount, \" users.\")\n            };\n        } catch (e) {\n            console.error(\"Recalc Detailed Error:\", e);\n            let errMsg = e.message || String(e);\n            if (errMsg.includes(\"index\")) errMsg = \"Missing Index! Check Browser Console (F12) for the creation link.\";\n            return {\n                success: false,\n                error: errMsg\n            };\n        }\n    };\n    const backfillLastBetPercent = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            console.log(\"Starting Backfill...\");\n            const usersSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"));\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let updateCount = 0;\n            // Process users in chunks to avoid blowing up memory/batch limits if many users\n            // But for <500 users, loop is fine. Batch limit is 500 ops.\n            for (const userDoc of usersSnap.docs){\n                const uid = userDoc.id;\n                // Get all bets for user (we crave the most recent settled one)\n                const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", uid));\n                const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n                let lastSettledBet = null;\n                // Find latest settled bet in memory\n                const settledBets = betsSnap.docs.map((d)=>({\n                        ...d.data(),\n                        id: d.id\n                    })).filter((b)=>b.status === \"won\" || b.status === \"lost\").sort((a, b)=>{\n                    const dateA = new Date(a.settledAt || a.placedAt || 0);\n                    const dateB = new Date(b.settledAt || b.placedAt || 0);\n                    return dateB - dateA; // Descending\n                });\n                if (settledBets.length > 0) {\n                    lastSettledBet = settledBets[0];\n                    const isWinner = lastSettledBet.status === \"won\";\n                    const userData = userDoc.data();\n                    const currentNetWorth = (userData.balance || 0) + (userData.invested || 0);\n                    const profit = isWinner ? lastSettledBet.potentialPayout - lastSettledBet.amount : -lastSettledBet.amount;\n                    // Approximate Pre-Bet Net Worth\n                    // Current Net Worth DOES include this bet's result (since it's settled).\n                    // So we subtract the profit to get the pre-bet value.\n                    const preBetNetWorth = currentNetWorth - profit;\n                    // Avoid division by zero\n                    const percentChange = preBetNetWorth > 0 ? profit / preBetNetWorth * 100 : 0;\n                    batch.update(userDoc.ref, {\n                        lastBetPercent: percentChange\n                    });\n                    updateCount++;\n                }\n            }\n            if (updateCount > 0) await batch.commit();\n            return {\n                success: true,\n                message: \"Updated \".concat(updateCount, \" users with last bet stats.\")\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const demoteSelf = async ()=>{\n        if (!user) return;\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                role: \"user\"\n            });\n            // setUser({...user, role: 'user'}); // Optimistic update\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteAccount = async ()=>{\n        if (!user) return {\n            success: false\n        };\n        try {\n            const userId = user.id;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", userId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            // 4. Delete Auth Account\n            if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.delete();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete Error:\", e);\n            if (e.code === \"auth/requires-recent-login\") {\n                return {\n                    success: false,\n                    error: \"Please log out and log in again to delete your account.\"\n                };\n            }\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteUser = async (targetUserId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // Helper to delete in batches\n            const commitBatchBuffer = async (docsToDelete)=>{\n                const CHUNK_SIZE = 400; // Safety margin below 500\n                for(let i = 0; i < docsToDelete.length; i += CHUNK_SIZE){\n                    const chunk = docsToDelete.slice(i, i + CHUNK_SIZE);\n                    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n                    chunk.forEach((ref)=>batch.delete(ref));\n                    await batch.commit();\n                }\n            };\n            const allDocsToDelete = [];\n            // 1. Bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            betsSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 2. Ideas\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            ideasSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 3. Comments (New)\n            const commentsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            commentsSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 4. Notifications (New)\n            const notifSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            notifSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 5. User Profile\n            allDocsToDelete.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId));\n            console.log(\"Deleting user \".concat(targetUserId, \": \").concat(allDocsToDelete.length, \" documents total.\"));\n            await commitBatchBuffer(allDocsToDelete);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete User Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const syncEventStats = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"));\n            const allBets = betsSnap.docs.map((d)=>d.data());\n            // 2. Aggregate Stats\n            const statsMap = {}; // eventId -> { counts: {}, amounts: {}, totalBets: 0, totalPool: 0 }\n            for (const bet of allBets){\n                if (!statsMap[bet.eventId]) {\n                    statsMap[bet.eventId] = {\n                        counts: {},\n                        amounts: {},\n                        totalBets: 0,\n                        totalPool: 0\n                    };\n                }\n                const s = statsMap[bet.eventId];\n                s.totalBets += 1;\n                s.totalPool += bet.amount || 0;\n                s.counts[bet.outcomeId] = (s.counts[bet.outcomeId] || 0) + 1;\n                s.amounts[bet.outcomeId] = (s.amounts[bet.outcomeId] || 0) + (bet.amount || 0);\n            }\n            // 3. Update Events\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"));\n            const updatePromises = eventsSnap.docs.map(async (docSnap)=>{\n                const stats = statsMap[docSnap.id] || {\n                    counts: {},\n                    amounts: {},\n                    totalBets: 0,\n                    totalPool: 0\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", docSnap.id), {\n                    stats\n                });\n            });\n            await Promise.all(updatePromises);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const addComment = async (eventId, text)=>{\n        if (!user) return {\n            success: false,\n            error: \"Login to comment\"\n        };\n        try {\n            const commentData = {\n                eventId,\n                userId: user.id,\n                username: user.username,\n                text,\n                createdAt: new Date().toISOString()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), commentData);\n            // Update Event with lastComment for preview\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                lastComment: {\n                    username: user.username,\n                    text: text.length > 50 ? text.substring(0, 50) + \"...\" : text,\n                    createdAt: commentData.createdAt\n                }\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteComment = async (commentId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Get comment details before deleting (to find parent event)\n            const commentRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\", commentId);\n            const commentSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(commentRef);\n            if (!commentSnap.exists()) {\n                return {\n                    success: false,\n                    error: \"Comment already deleted\"\n                };\n            }\n            const val = commentSnap.data();\n            const eventId = val.eventId;\n            const commentCreatedAt = val.createdAt;\n            // 2. Delete the comment\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)(commentRef);\n            // 3. Check if this was the \"lastComment\" on the event card\n            if (eventId) {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                const eventSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(eventRef);\n                if (eventSnap.exists()) {\n                    const eventData = eventSnap.data();\n                    // Check if the displayed lastComment matches the one we just deleted\n                    if (eventData.lastComment && eventData.lastComment.createdAt === commentCreatedAt) {\n                        // It was the one displayed! We need to find the new latest comment.\n                        // Fetch all remaining comments for this event\n                        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n                        const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                        if (!snap.empty) {\n                            // Find the newest one\n                            const all = snap.docs.map((d)=>d.data());\n                            all.sort((a, b)=>new Date(b.createdAt) - new Date(a.createdAt));\n                            const newest = all[0];\n                            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                                lastComment: {\n                                    username: newest.username,\n                                    text: newest.text.length > 50 ? newest.text.substring(0, 50) + \"...\" : newest.text,\n                                    createdAt: newest.createdAt\n                                }\n                            });\n                        } else {\n                            // No comments left\n                            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                                lastComment: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteField)()\n                            });\n                        }\n                    }\n                }\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const markNotificationRead = async (notifId)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\", notifId), {\n                read: true\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const getUserStats = async (targetUserId)=>{\n        try {\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n            const userData = userSnap.exists() ? userSnap.data() : {};\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            let wins = 0;\n            let losses = 0;\n            let profit = 0;\n            let settledCount = 0;\n            snap.docs.forEach((d)=>{\n                const b = d.data();\n                if (b.status === \"won\") {\n                    wins++;\n                    settledCount++;\n                    profit += (b.potentialPayout || b.amount * b.odds) - b.amount;\n                } else if (b.status === \"lost\") {\n                    losses++;\n                    settledCount++;\n                    profit -= b.amount;\n                }\n            });\n            const total = snap.size;\n            const winRate = settledCount > 0 ? (wins / settledCount * 100).toFixed(1) : 0;\n            return {\n                success: true,\n                stats: {\n                    wins,\n                    losses,\n                    total,\n                    winRate,\n                    profit\n                },\n                profile: {\n                    bio: userData.bio || \"\",\n                    profilePic: userData.profilePic,\n                    username: userData.username\n                }\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const getWeeklyLeaderboard = async ()=>{\n        try {\n            const now = new Date();\n            const dayOfWeek = now.getDay(); // 0 (Sun) - 6 (Sat)\n            const startOfWeek = new Date(now);\n            // Reset to most recent Sunday (or today if it is Sunday)\n            startOfWeek.setDate(now.getDate() - dayOfWeek);\n            startOfWeek.setHours(0, 0, 0, 0);\n            const isoStr = startOfWeek.toISOString();\n            console.log(\"Fetching weekly stats since:\", isoStr);\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"in\", [\n                \"won\",\n                \"lost\"\n            ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"settledAt\", \">=\", isoStr));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            const stats = {};\n            snap.docs.forEach((doc)=>{\n                const b = doc.data();\n                if (!stats[b.userId]) stats[b.userId] = 0;\n                if (b.status === \"won\") {\n                    // Profit = Payout - Wager\n                    const payout = b.potentialPayout || b.amount * b.odds;\n                    stats[b.userId] += payout - b.amount;\n                } else {\n                    // Loss = -Wager\n                    stats[b.userId] -= b.amount;\n                }\n            });\n            const leaderboard = Object.entries(stats).map((param)=>{\n                let [userId, profit] = param;\n                return {\n                    userId,\n                    profit\n                };\n            });\n            leaderboard.sort((a, b)=>b.profit - a.profit);\n            return {\n                success: true,\n                data: leaderboard\n            };\n        } catch (e) {\n            console.error(\"Weekly Leaderboard Error:\", e);\n            let msg = e.message;\n            if (msg.includes(\"index\")) msg = \"Missing Index! Check console (F12) for the creation link.\";\n            return {\n                success: false,\n                error: msg\n            };\n        }\n    };\n    const updateSystemAnnouncement = async (data)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"system\", \"announcement\");\n            // Merge true to allow partial updates if needed, though usually we replace content\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, data, {\n                merge: true\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            alert(\"Error posting announcement: \" + e.message); // Debug\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AppContext.Provider, {\n        value: {\n            user,\n            signup,\n            signin,\n            logout,\n            updateUser,\n            submitIdea,\n            deleteIdea,\n            deleteAccount,\n            deleteUser,\n            demoteSelf,\n            syncEventStats,\n            events,\n            createEvent,\n            resolveEvent,\n            updateEvent,\n            updateEventOrder,\n            fixStuckBets,\n            deleteBet,\n            deleteEvent,\n            toggleFeatured,\n            recalculateLeaderboard,\n            backfillLastBetPercent,\n            addComment,\n            deleteComment,\n            markNotificationRead,\n            getUserStats,\n            getWeeklyLeaderboard,\n            setMainBet,\n            updateUserGroups,\n            updateSystemAnnouncement,\n            systemAnnouncement,\n            bets,\n            placeBet,\n            isLoaded,\n            isFirebase: true,\n            users,\n            ideas,\n            db: _firebase__WEBPACK_IMPORTED_MODULE_4__.db,\n            isGuestMode,\n            setIsGuestMode\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\ffear\\\\OneDrive\\\\Documents\\\\GitHub\\\\bet-it-happens\\\\src\\\\lib\\\\store.js\",\n        lineNumber: 1324,\n        columnNumber: 5\n    }, this);\n}\n_s1(AppProvider, \"gMmzE1TPo2oLeEIotHNFX7byvZ0=\");\n_c = AppProvider;\nfunction useApp() {\n    _s2();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppContext);\n}\n_s2(useApp, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHQSxDQUFDa0IseUNBQUVBLEVBQUUsVUFBVTtZQUNqQyxtRkFBbUY7WUFDbkYsTUFBTWpCLDBEQUFNQSxDQUFDaVYsUUFBUXRSLE1BQU07Z0JBQUV1UixPQUFPO1lBQUs7WUFDekMsT0FBTztnQkFBRXpOLFNBQVM7WUFBSztRQUN6QixFQUFFLE9BQU9JLEdBQUc7WUFDVm5GLFFBQVEyQixLQUFLLENBQUN3RDtZQUNkN0MsTUFBTSxpQ0FBaUM2QyxFQUFFSCxPQUFPLEdBQUcsUUFBUTtZQUMzRCxPQUFPO2dCQUFFRCxTQUFTO2dCQUFPcEQsT0FBT3dELEVBQUVILE9BQU87WUFBQztRQUM1QztJQUNGO0lBSUEscUJBQ0UsOERBQUN2RyxXQUFXZ1UsUUFBUTtRQUFDQyxPQUFPO1lBQzFCN1Q7WUFBTXlGO1lBQVFXO1lBQVEyQjtZQUFRaUc7WUFBWWY7WUFBWWE7WUFBWWdDO1lBQWVLO1lBQVlOO1lBQVllO1lBQ3pHMVE7WUFBUXFLO1lBQWFRO1lBQWM2QjtZQUFhbkM7WUFBa0I0QjtZQUFjSztZQUFXL0I7WUFBYUM7WUFBZ0JnRTtZQUF3QlU7WUFBd0JrQztZQUFZRztZQUFlTztZQUFzQkU7WUFBY1M7WUFBc0JoRztZQUFZYztZQUFrQjhGO1lBQTBCN1A7WUFDclR4RDtZQUFNNEg7WUFBVXhIO1lBQVVzVCxZQUFZO1lBQU1wUTtZQUFPcEQ7WUFBT1osRUFBRUEsMkNBQUFBO1lBQzVEZ0I7WUFBYUM7UUFDZjtrQkFDR1o7Ozs7OztBQUdQO0lBanlDZ0JEO0tBQUFBO0FBbXlDVCxTQUFTaVU7O0lBQ2QsT0FBTy9WLGlEQUFVQSxDQUFDNEI7QUFDcEI7SUFGZ0JtVSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL3N0b3JlLmpzPzUxMTQiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblwidXNlIGNsaWVudFwiO1xyXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtcclxuICBjb2xsZWN0aW9uLCBhZGREb2MsIG9uU25hcHNob3QsIHF1ZXJ5LCBvcmRlckJ5LFxyXG4gIGRvYywgc2V0RG9jLCB1cGRhdGVEb2MsIGdldERvYywgd2hlcmUsIGluY3JlbWVudCwgZGVsZXRlRG9jLCBnZXREb2NzLCBsaW1pdCwgd3JpdGVCYXRjaCwgZGVsZXRlRmllbGRcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcbiAgc2lnbk91dCwgb25BdXRoU3RhdGVDaGFuZ2VkLCB1cGRhdGVFbWFpbCwgdXBkYXRlUGFzc3dvcmQsIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsXHJcbn0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbmltcG9ydCB7IGRiLCBhdXRoIH0gZnJvbSAnLi9maXJlYmFzZSc7XHJcblxyXG5jb25zdCBBcHBDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFwcENvbnRleHQoKSB7XHJcbiAgcmV0dXJuIHVzZUNvbnRleHQoQXBwQ29udGV4dCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBcHBQcm92aWRlcih7IGNoaWxkcmVuIH0pIHtcclxuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbZXZlbnRzLCBzZXRFdmVudHNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtiZXRzLCBzZXRCZXRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbaWRlYXMsIHNldElkZWFzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbaXNMb2FkZWQsIHNldElzTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcblxyXG4gIC8vIENyZWF0ZSBzdGF0ZSwgaW5pdCBmYWxzZS4gV2UgbG9hZCBmcm9tIHN0b3JhZ2UgaW4gYSB1c2VFZmZlY3QgdG8gYWxsb3cgaHlkcmF0aW9uLlxyXG4gIGNvbnN0IFtpc0d1ZXN0TW9kZSwgc2V0SXNHdWVzdE1vZGVdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBMb2FkIEd1ZXN0IE1vZGUgZnJvbSBMb2NhbFN0b3JhZ2VcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzR3Vlc3RNb2RlJyk7XHJcbiAgICBpZiAoc3RvcmVkID09PSAndHJ1ZScpIHNldElzR3Vlc3RNb2RlKHRydWUpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gU2F2ZSBHdWVzdCBNb2RlIHRvIExvY2FsU3RvcmFnZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNHdWVzdE1vZGUnLCBpc0d1ZXN0TW9kZSk7XHJcbiAgfSwgW2lzR3Vlc3RNb2RlXSk7XHJcblxyXG4gIC8vIFNhZmV0eSB0aW1lb3V0OiBJZiBGaXJlYmFzZSBhdXRoIGhhbmdzIGZvciA+MXMsIGp1c3QgbG9hZCB0aGUgYXBwIChhcyBzaWduZWQgb3V0KSB0byBwcmV2ZW50IGJlaW5nIHN0dWNrLlxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBzZXRJc0xvYWRlZChwcmV2ID0+IHtcclxuICAgICAgICBpZiAoIXByZXYpIGNvbnNvbGUud2FybihcIkZpcmViYXNlIGF1dGggc2xvdyAtIGZvcmNpbmcgbG9hZCBzdGF0ZVwiKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9LCAxMjAwKTtcclxuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gLS0tIDEuIEF1dGggJiBVc2VyIFByb2ZpbGUgTGlzdGVuZXIgLS0tXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCB1bnN1YnNjcmliZVByb2ZpbGUgPSBudWxsO1xyXG5cclxuICAgIC8vIEF1dGggTGlzdGVuZXJcclxuICAgIGNvbnN0IHVuc3Vic2NyaWJlQXV0aCA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCAoZmlyZWJhc2VVc2VyKSA9PiB7XHJcbiAgICAgIC8vIDEuIENsZWFuIHVwIHByZXZpb3VzIHByb2ZpbGUgbGlzdGVuZXIgaWYgYW55XHJcbiAgICAgIGlmICh1bnN1YnNjcmliZVByb2ZpbGUpIHtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUoKTtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUgPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZmlyZWJhc2VVc2VyKSB7XHJcbiAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgaW4gLT4gU2V0IGJhc2ljIGF1dGggdXNlciBpbW1lZGlhdGVseSB0byBwcmV2ZW50IGxvZ291dCBsb29wXHJcbiAgICAgICAgLy8gV2Ugd2lsbCBlbnJpY2ggdGhpcyB3aXRoIERCIGRhdGEgaW4gYSBtb21lbnRcclxuICAgICAgICBzZXRVc2VyKHByZXYgPT4gcHJldiB8fCB7XHJcbiAgICAgICAgICBpZDogZmlyZWJhc2VVc2VyLnVpZCxcclxuICAgICAgICAgIGVtYWlsOiBmaXJlYmFzZVVzZXIuZW1haWwsXHJcbiAgICAgICAgICB1c2VybmFtZTogZmlyZWJhc2VVc2VyLmRpc3BsYXlOYW1lIHx8IGZpcmViYXNlVXNlci5lbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBMaXN0ZW4gdG8gRmlyZXN0b3JlIFByb2ZpbGVcclxuICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCBmaXJlYmFzZVVzZXIudWlkKTtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUgPSBvblNuYXBzaG90KHVzZXJSZWYsIChkb2NTbmFwKSA9PiB7XHJcbiAgICAgICAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IGRvY1NuYXAuZGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIG1pc3NpbmcgcmVmZXJyYWwgY29kZSAoQmFja2ZpbGwgZm9yIGV4aXN0aW5nIHVzZXJzKVxyXG4gICAgICAgICAgICBpZiAoIXVzZXJEYXRhLnJlZmVycmFsQ29kZSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG5ld0NvZGUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgdXBkYXRlRG9jKHVzZXJSZWYsIHsgcmVmZXJyYWxDb2RlOiBuZXdDb2RlIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBiYWNrZmlsbGluZyByZWZlcnJhbCBjb2RlXCIsIGVycikpO1xyXG4gICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gbWFudWFsbHkgdXBkYXRlIHN0YXRlIGhlcmUsIHRoZSBzbmFwc2hvdCB3aWxsIGZpcmUgYWdhaW4gaW5zdGFudGx5XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldFVzZXIoeyBpZDogZmlyZWJhc2VVc2VyLnVpZCwgLi4udXNlckRhdGEgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBEb2N1bWVudCBkb2VzIG5vdCBleGlzdCAoZS5nLiBmaXJzdCBsb2dpbiBvciBwcmV2aW91cyBlcnJvcikuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPj4+IERFVEVDVEVEIE5FVyBVU0VSIChObyBQcm9maWxlIEZvdW5kKSAtIENyZWF0aW5nIFByb2ZpbGUuLi5cIik7XHJcbiAgICAgICAgICAgIC8vIEF1dG8tY3JlYXRlIHRoZSB1c2VyIHByb2ZpbGUgaW4gRmlyZXN0b3JlXHJcblxyXG4gICAgICAgICAgICBjb25zdCBteVJlZmVycmFsQ29kZSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCkudG9VcHBlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSB7XHJcbiAgICAgICAgICAgICAgZW1haWw6IGZpcmViYXNlVXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICB1c2VybmFtZTogZmlyZWJhc2VVc2VyLmRpc3BsYXlOYW1lIHx8IGZpcmViYXNlVXNlci5lbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgICAgICAgIHJvbGU6IChmaXJlYmFzZVVzZXIuZW1haWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWRtaW4nKSkgPyAnYWRtaW4nIDogJ3VzZXInLFxyXG4gICAgICAgICAgICAgIGJhbGFuY2U6IDEwMDAsXHJcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgcmVmZXJyYWxDb2RlOiBteVJlZmVycmFsQ29kZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV3JpdGUgdG8gREJcclxuICAgICAgICAgICAgc2V0RG9jKHVzZXJSZWYsIG5ld1VzZXIpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gU1VDQ0VTU0ZVTExZIENSRUFURUQgUFJPRklMRSBGT1I6XCIsIG5ld1VzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJXZWxjb21lISBZb3VyIHByb2ZpbGUgaGFzIGJlZW4gY3JlYXRlZCB3aXRoICQxMDAwLlwiKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIj4+PiBFUlJPUiBDUkVBVElORyBQUk9GSUxFOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJvciBjcmVhdGluZyBwcm9maWxlLiBDaGVjayBwZXJtaXNzaW9ucy5cIik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgbG9jYWwgc3RhdGVcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5uZXdVc2VyIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgb3V0XHJcbiAgICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgICBzZXRCZXRzKFtdKTtcclxuICAgICAgICBzZXRJc0xvYWRlZCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvbiB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdW5zdWJzY3JpYmVBdXRoKCk7XHJcbiAgICAgIGlmICh1bnN1YnNjcmliZVByb2ZpbGUpIHtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGUoW10pOyAvLyBMaXN0IG9mIGFsbCB1c2VycyBmb3IgbGVhZGVyYm9hcmRcclxuICBjb25zdCBbc3lzdGVtQW5ub3VuY2VtZW50LCBzZXRTeXN0ZW1Bbm5vdW5jZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4gIC8vIC4uLiAoZXhpc3RpbmcgdGltZW91dCBjb2RlKSAuLi5cclxuXHJcbiAgLy8gLS0tIDIuIERhdGEgTGlzdGVuZXJzIChFdmVudHMsIElkZWFzLCBVc2VycywgQW5ub3VuY2VtZW50KSAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGlzdGVuIHRvIFN5c3RlbSBBbm5vdW5jZW1lbnRcclxuICAgIGNvbnN0IGFubm91bmNlbWVudFJlZiA9IGRvYyhkYiwgJ3N5c3RlbScsICdhbm5vdW5jZW1lbnQnKTtcclxuICAgIGNvbnN0IHVuc3ViQW5ub3VuY2VtZW50ID0gb25TbmFwc2hvdChhbm5vdW5jZW1lbnRSZWYsIChkb2NTbmFwKSA9PiB7XHJcbiAgICAgIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XHJcbiAgICAgICAgc2V0U3lzdGVtQW5ub3VuY2VtZW50KGRvY1NuYXAuZGF0YSgpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRTeXN0ZW1Bbm5vdW5jZW1lbnQobnVsbCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBFdmVudHMgKExpbWl0IDUwIGFjdGl2ZSlcclxuICAgIGNvbnN0IGV2ZW50c1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJFdmVudHMgPSBvblNuYXBzaG90KGV2ZW50c1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnRzTGlzdCA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgZXZlbnRzTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgLy8gMS4gU29ydCBieSBtYW51YWwgb3JkZXIgaWYgZXhpc3RzIChhc2NlbmRpbmc6IGxvdyBudW1iZXJzIGZpcnN0KVxyXG4gICAgICAgIGNvbnN0IG9yZGVyQSA9IGEub3JkZXIgIT09IHVuZGVmaW5lZCA/IGEub3JkZXIgOiA5OTk5O1xyXG4gICAgICAgIGNvbnN0IG9yZGVyQiA9IGIub3JkZXIgIT09IHVuZGVmaW5lZCA/IGIub3JkZXIgOiA5OTk5O1xyXG4gICAgICAgIGlmIChvcmRlckEgIT09IG9yZGVyQikgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQjtcclxuXHJcbiAgICAgICAgLy8gMi4gT3BlbiBldmVudHMgZmlyc3RcclxuICAgICAgICBpZiAoYS5zdGF0dXMgPT09ICdvcGVuJyAmJiBiLnN0YXR1cyAhPT0gJ29wZW4nKSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGEuc3RhdHVzICE9PSAnb3BlbicgJiYgYi5zdGF0dXMgPT09ICdvcGVuJykgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgIC8vIDMuIFRoZW4gc29ydCBieSBzdGFydEF0IGRhdGUgKGFzY2VuZGluZzogZWFybGllc3QgZGF0ZSBmaXJzdClcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5zdGFydEF0KSAtIG5ldyBEYXRlKGIuc3RhcnRBdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXRFdmVudHMoZXZlbnRzTGlzdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gSWRlYXMgKExpbWl0IDUwIHJlY2VudClcclxuICAgIC8vIFJlbW92ZWQgb3JkZXJCeSB0byBhdm9pZCBtaXNzaW5nIGluZGV4IGlzc3Vlcy4gU29ydGluZyBjbGllbnQtc2lkZS5cclxuICAgIGNvbnN0IGlkZWFzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgbGltaXQoNTApKTtcclxuICAgIGNvbnN0IHVuc3ViSWRlYXMgPSBvblNuYXBzaG90KGlkZWFzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICBjb25zdCBsaXN0ID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4gICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuc3VibWl0dGVkQXQpIC0gbmV3IERhdGUoYS5zdWJtaXR0ZWRBdCkpO1xyXG4gICAgICBzZXRJZGVhcyhsaXN0KTtcclxuICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbGlzdGVuaW5nIHRvIGlkZWFzOlwiLCBlcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gVXNlcnMgKEdsb2JhbCBMaXN0IGZvciBMZWFkZXJib2FyZCAmIEFkbWluKVxyXG4gICAgY29uc3QgdXNlcnNRdWVyeSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICd1c2VycycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJVc2VycyA9IG9uU25hcHNob3QodXNlcnNRdWVyeSwgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3QgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbiAgICAgIC8vIENsaWVudC1zaWRlIHNvcnQgYnkgYmFsYW5jZSBkZXNjXHJcbiAgICAgIGxpc3Quc29ydCgoYSwgYikgPT4gKGIuYmFsYW5jZSB8fCAwKSAtIChhLmJhbGFuY2UgfHwgMCkpO1xyXG4gICAgICBzZXRVc2VycyhsaXN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHVuc3ViRXZlbnRzKCk7XHJcbiAgICAgIHVuc3ViSWRlYXMoKTtcclxuICAgICAgdW5zdWJVc2VycygpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gLS0tIDMuIEJldHMgTGlzdGVuZXIgKE9ubHkgZm9yIGxvZ2dlZCBpbiB1c2VyKSAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHNldEJldHMoW10pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYmV0c1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXIuaWQpLCBsaW1pdCgxMDApKTtcclxuICAgIGNvbnN0IHVuc3ViQmV0cyA9IG9uU25hcHNob3QoYmV0c1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgLy8gV2UnbGwgdHJ1c3QgdGhlIGNsaWVudCBzaWRlIHNvcnRpbmcgZm9yIG5vdyBvciBhZGQgb3JkZXJCeSBpbmRleCBsYXRlclxyXG4gICAgICBjb25zdCBteUJldHMgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbiAgICAgIG15QmV0cy5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnBsYWNlZEF0KSAtIG5ldyBEYXRlKGEucGxhY2VkQXQpKTtcclxuICAgICAgc2V0QmV0cyhteUJldHMpO1xyXG4gICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmV0X2JldHNfY2FjaGUnLCBKU09OLnN0cmluZ2lmeShteUJldHMpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB1bnN1YkJldHMoKTtcclxuICB9LCBbdXNlcj8uaWRdKTsgLy8gT25seSByZS1ydW4gaWYgdXNlciBJRCBjaGFuZ2VzIGlzIHRyaWNreSwgYmV0dGVyIHNhZmUgZGVwZW5kZW5jeVxyXG5cclxuICAvLyAtLS0gQWN0aW9ucyAtLS1cclxuXHJcbiAgY29uc3Qgc2lnbnVwID0gYXN5bmMgKGVtYWlsLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlZmVycmFsQ29kZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG5cclxuICAgICAgLy8gR2VuZXJhdGUgYSBzaW1wbGUgdW5pcXVlIHJlZmVycmFsIGNvZGUgKDggY2hhcnMpXHJcbiAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHlvdSdkIGNoZWNrIGZvciBjb2xsaXNpb25zLCBidXQgdGhpcyBpcyBzdWZmaWNpZW50IGZvciBub3cuXHJcbiAgICAgIGNvbnN0IG15UmVmZXJyYWxDb2RlID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKS50b1VwcGVyQ2FzZSgpO1xyXG5cclxuICAgICAgbGV0IHJlZmVycmVkQnkgPSBudWxsO1xyXG5cclxuICAgICAgLy8gSGFuZGxlIFJlZmVycmFsIFJld2FyZFxyXG4gICAgICBpZiAocmVmZXJyYWxDb2RlICYmIHJlZmVycmFsQ29kZS50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIEZpbmQgdGhlIHVzZXIgd2hvIG93bnMgdGhpcyBjb2RlXHJcbiAgICAgICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3VzZXJzJyksIHdoZXJlKCdyZWZlcnJhbENvZGUnLCAnPT0nLCByZWZlcnJhbENvZGUudHJpbSgpKSk7XHJcbiAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XHJcblxyXG4gICAgICAgICAgaWYgKCFzbmFwc2hvdC5lbXB0eSkge1xyXG4gICAgICAgICAgICBjb25zdCByZWZlcnJlckRvYyA9IHNuYXBzaG90LmRvY3NbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZmVycmVySWQgPSByZWZlcnJlckRvYy5pZDtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWRpdCAkNTAwIHRvIHJlZmVycmVyXHJcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHJlZmVycmVySWQpLCB7XHJcbiAgICAgICAgICAgICAgYmFsYW5jZTogaW5jcmVtZW50KDUwMClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlZmVycmVkQnkgPSByZWZlcnJlcklkO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVmZXJyYWwgc3VjY2Vzc2Z1bCEgQ3JlZGl0ZWQgJDUwMCB0byAke3JlZmVycmVyRG9jLmRhdGEoKS51c2VybmFtZX1gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIHJlZmVycmFsOlwiLCBlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ3JlYXRlIFVzZXIgRG9jdW1lbnRcclxuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXJzJywgcmVzcC51c2VyLnVpZCksIHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUgfHwgZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICByb2xlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpID8gJ2FkbWluJyA6ICd1c2VyJyxcclxuICAgICAgICBiYWxhbmNlOiAxMDAwLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHJlZmVycmFsQ29kZTogbXlSZWZlcnJhbENvZGUsXHJcbiAgICAgICAgcmVmZXJyZWRCeTogcmVmZXJyZWRCeVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNpZ25pbiA9IGFzeW5jIChlbWFpbE9yVXNlcm5hbWUsIHBhc3N3b3JkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgZW1haWwgPSBlbWFpbE9yVXNlcm5hbWUudHJpbSgpO1xyXG5cclxuICAgICAgLy8gSWYgaXQgbG9va3MgbGlrZSBhbiBlbWFpbCwganVzdCB0cnkgaXQgZGlyZWN0bHlcclxuICAgICAgaWYgKGVtYWlsLmluY2x1ZGVzKCdAJykpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRW1haWwgbG9naW4gZmFpbGVkXCIsIGUpO1xyXG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFVzZXJuYW1lIGxvb2t1cCBsb2dpY1xyXG4gICAgICBjb25zdCB1c2VybmFtZUlucHV0ID0gZW1haWw7XHJcbiAgICAgIGNvbnN0IGNvbCA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xyXG4gICAgICBsZXQgY2FuZGlkYXRlRW1haWxzID0gbmV3IFNldCgpO1xyXG5cclxuICAgICAgLy8gSGVscGVyIHRvIGZldGNoIGFuZCBhZGQgZW1haWxzIChObyBMSU1JVCB0byBlbnN1cmUgd2UgZmluZCB0aGUgcmlnaHQgb25lKVxyXG4gICAgICBjb25zdCBhZGRDYW5kaWRhdGVzID0gYXN5bmMgKHBhcmFtLCB2YWwpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbCwgd2hlcmUocGFyYW0sICc9PScsIHZhbCkpOyAvLyBSZW1vdmVkIGxpbWl0XHJcbiAgICAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuICAgICAgICAgIHNuYXAuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZW1haWwpIGNhbmRpZGF0ZUVtYWlscy5hZGQoZGF0YS5lbWFpbCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJRdWVyeSBmYWlsZWQgZm9yXCIsIHZhbCwgZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyAxLiBFeGFjdCBNYXRjaFxyXG4gICAgICBhd2FpdCBhZGRDYW5kaWRhdGVzKCd1c2VybmFtZScsIHVzZXJuYW1lSW5wdXQpO1xyXG4gICAgICAvLyAyLiBMb3dlcmNhc2VcclxuICAgICAgYXdhaXQgYWRkQ2FuZGlkYXRlcygndXNlcm5hbWUnLCB1c2VybmFtZUlucHV0LnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAvLyAzLiBDYXBpdGFsaXplZCAoVHJ5IHN0YW5kYXJkIEZpcnN0IENhcGl0YWwpXHJcbiAgICAgIGNvbnN0IGNhcGl0YWxpemVkID0gdXNlcm5hbWVJbnB1dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHVzZXJuYW1lSW5wdXQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgYXdhaXQgYWRkQ2FuZGlkYXRlcygndXNlcm5hbWUnLCBjYXBpdGFsaXplZCk7XHJcblxyXG4gICAgICAvLyA0LiBVUFBFUkNBU0VcclxuICAgICAgYXdhaXQgYWRkQ2FuZGlkYXRlcygndXNlcm5hbWUnLCB1c2VybmFtZUlucHV0LnRvVXBwZXJDYXNlKCkpO1xyXG5cclxuICAgICAgaWYgKGNhbmRpZGF0ZUVtYWlscy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgVXNlcm5hbWUgJyR7dXNlcm5hbWVJbnB1dH0nIGRvZXMgbm90IGV4aXN0LmAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHJ5IGVhY2ggZW1haWxcclxuICAgICAgbGV0IHRyaWVkID0gW107XHJcbiAgICAgIGZvciAobGV0IGNhbmRpZGF0ZUVtYWlsIG9mIGNhbmRpZGF0ZUVtYWlscykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2FuZGlkYXRlRW1haWwgIT09ICdzdHJpbmcnKSBjb250aW51ZTtcclxuICAgICAgICBjYW5kaWRhdGVFbWFpbCA9IGNhbmRpZGF0ZUVtYWlsLnRyaW0oKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIEF0dGVtcHQgMTogU3RhbmRhcmRcclxuICAgICAgICAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGNhbmRpZGF0ZUVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIEF0dGVtcHQgMjogVHJpbW1lZCBQYXNzd29yZFxyXG4gICAgICAgICAgaWYgKHBhc3N3b3JkLnRyaW0oKSAhPT0gcGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBjYW5kaWRhdGVFbWFpbCwgcGFzc3dvcmQudHJpbSgpKTtcclxuICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7IH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBdHRlbXB0IDM6IEVtYWlsIHdpdGggYWxsIHdoaXRlc3BhY2UgcmVtb3ZlZCAoanVzdCBpbiBjYXNlKVxyXG4gICAgICAgICAgY29uc3QgZW1haWxOb1doaXRlc3BhY2UgPSBjYW5kaWRhdGVFbWFpbC5yZXBsYWNlKC9cXHMvZywgJycpO1xyXG4gICAgICAgICAgaWYgKGVtYWlsTm9XaGl0ZXNwYWNlICE9PSBjYW5kaWRhdGVFbWFpbCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsTm9XaGl0ZXNwYWNlLCBwYXNzd29yZCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlMykgeyB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdHJpZWQucHVzaChjYW5kaWRhdGVFbWFpbCk7XHJcbiAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ2F1dGgvaW52YWxpZC1jcmVkZW50aWFsJyB8fCBlcnJvci5jb2RlID09PSAnYXV0aC93cm9uZy1wYXNzd29yZCcpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBSZXR1cm4gdGVjaG5pY2FsIGVycm9yXHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBTeXN0ZW0gRXJyb3IgKCR7ZXJyb3IuY29kZX0pYCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgbG9vcCBmaW5pc2hlcywgbm9uZSB3b3JrZWQuXHJcbiAgICAgIC8vIFJldHVybiB0aGUgZW1haWwgZm91bmQgc28gdGhlIFVJIGNhbiBzd2l0Y2ggdG8gaXQuXHJcbiAgICAgIGNvbnN0IGZpcnN0RW1haWwgPSB0cmllZFswXTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBzdWdnZXN0ZWRFbWFpbDogZmlyc3RFbWFpbCxcclxuICAgICAgICBlcnJvcjogJ1Bhc3N3b3JkIGluY29ycmVjdC4nXHJcbiAgICAgIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJTeXN0ZW0gRXJyb3I6IFwiICsgZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHNpZ25PdXQoYXV0aCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHBsYWNlQmV0ID0gYXN5bmMgKGV2ZW50SWQsIG91dGNvbWVJZCwgYW1vdW50KSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcbiAgICBpZiAodXNlci5iYWxhbmNlIDwgYW1vdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnN1ZmZpY2llbnQgZnVuZHMnIH07XHJcblxyXG4gICAgY29uc3QgZXZlbnQgPSBldmVudHMuZmluZChlID0+IGUuaWQgPT09IGV2ZW50SWQpO1xyXG4gICAgaWYgKCFldmVudCB8fCBldmVudC5zdGF0dXMgIT09ICdvcGVuJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRXZlbnQgaXMgbG9ja2VkJyB9O1xyXG5cclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBiZXRzIG9uIE9USEVSIHNpZGVzXHJcbiAgICBjb25zdCBxRXhpc3RpbmcgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlci5pZCksIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnRJZCkpO1xyXG4gICAgY29uc3Qgc25hcEV4aXN0aW5nID0gYXdhaXQgZ2V0RG9jcyhxRXhpc3RpbmcpO1xyXG4gICAgY29uc3Qgb3RoZXJTaWRlQmV0ID0gc25hcEV4aXN0aW5nLmRvY3MuZmluZChkID0+IGQuZGF0YSgpLm91dGNvbWVJZCAhPT0gb3V0Y29tZUlkKTtcclxuXHJcbiAgICBpZiAob3RoZXJTaWRlQmV0KSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJMb3lhbHR5IGNoZWNrISBZb3UgYWxyZWFkeSBiZXQgb24gdGhlIG90aGVyIHNpZGUuIE5vIHN3aXRjaGluZy5cIiB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG91dGNvbWUgPSBldmVudC5vdXRjb21lcy5maW5kKG8gPT4gby5pZCA9PT0gb3V0Y29tZUlkKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBEZWR1Y3QgQmFsYW5jZSAmIEFkZCB0byBJbnZlc3RlZFxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKTtcclxuICAgICAgLy8gU3RyZWFrIExvZ2ljXHJcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgdG9kYXlTdHIgPSB0b2RheS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgeWVzdGVyZGF5LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpIC0gMSk7XHJcbiAgICAgIGNvbnN0IHllc3RlcmRheVN0ciA9IHllc3RlcmRheS50b0RhdGVTdHJpbmcoKTtcclxuXHJcbiAgICAgIGxldCBuZXdTdHJlYWsgPSB1c2VyLmN1cnJlbnRTdHJlYWsgfHwgMDtcclxuICAgICAgY29uc3QgbGFzdERhdGUgPSB1c2VyLmxhc3RCZXREYXRlIHx8IFwiXCI7IC8vIEFzc3VtaW5nIHN0b3JlZCBhcyB0b0RhdGVTdHJpbmcoKVxyXG5cclxuICAgICAgbGV0IHN0cmVha1R5cGUgPSAnbm9uZSc7XHJcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGxvZ2ljIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSBwcm9jZXNzZWQgYSBzdHJlYWsgZm9yIHRvZGF5XHJcbiAgICAgIC8vIChPciBpZiB0aGUgdXNlciBoYWQgMCBzdHJlYWsgYW5kIGp1c3Qgc3RhcnRlZCB0b2RheSlcclxuICAgICAgaWYgKGxhc3REYXRlICE9PSB0b2RheVN0cikge1xyXG4gICAgICAgIGlmIChsYXN0RGF0ZSA9PT0geWVzdGVyZGF5U3RyKSB7XHJcbiAgICAgICAgICBuZXdTdHJlYWsgKz0gMTtcclxuICAgICAgICAgIHN0cmVha1R5cGUgPSAnaW5jcmVhc2VkJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmV3U3RyZWFrID0gMTsgLy8gQnJva2VuIHN0cmVhayBvciBmaXJzdCBiZXRcclxuICAgICAgICAgIHN0cmVha1R5cGUgPSAnc3RhcnRlZCc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChuZXdTdHJlYWsgPT09IDApIHtcclxuICAgICAgICAgIG5ld1N0cmVhayA9IDE7XHJcbiAgICAgICAgICBzdHJlYWtUeXBlID0gJ3N0YXJ0ZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbmV3TG9uZ2VzdCA9IE1hdGgubWF4KG5ld1N0cmVhaywgdXNlci5sb25nZXN0U3RyZWFrIHx8IDApO1xyXG5cclxuICAgICAgLy8gMS4gRGVkdWN0IEJhbGFuY2UsIEFkZCB0byBJbnZlc3RlZCwgVXBkYXRlIFN0cmVha1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJSZWYsIHtcclxuICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoLWFtb3VudCksXHJcbiAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudChhbW91bnQpLCAvLyBUcmFjayBhY3RpdmUgd2FnZXJzIGZvciBsZWFkZXJib2FyZFxyXG4gICAgICAgIGN1cnJlbnRTdHJlYWs6IG5ld1N0cmVhayxcclxuICAgICAgICBsb25nZXN0U3RyZWFrOiBuZXdMb25nZXN0LFxyXG4gICAgICAgIGxhc3RCZXREYXRlOiB0b2RheVN0clxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIENyZWF0ZSBCZXRcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHtcclxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICBvdXRjb21lSWQsXHJcbiAgICAgICAgb3V0Y29tZUxhYmVsOiBvdXRjb21lLmxhYmVsLFxyXG4gICAgICAgIGV2ZW50VGl0bGU6IGV2ZW50LnRpdGxlLFxyXG4gICAgICAgIGFtb3VudDogcGFyc2VGbG9hdChhbW91bnQpLFxyXG4gICAgICAgIG9kZHM6IG91dGNvbWUub2RkcyxcclxuICAgICAgICBwb3RlbnRpYWxQYXlvdXQ6IGFtb3VudCAqIG91dGNvbWUub2RkcyxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICBwbGFjZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMy4gVXBkYXRlIEV2ZW50IFN0YXRzIChCZXN0IEVmZm9ydCAtIGlnbm9yZSBwZXJtaXNzaW9uIGVycm9ycyBmb3Igbm93KVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50UmVmID0gZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCk7XHJcbiAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGV2ZW50UmVmLCB7XHJcbiAgICAgICAgICBbYHN0YXRzLmNvdW50cy4ke291dGNvbWVJZH1gXTogaW5jcmVtZW50KDEpLFxyXG4gICAgICAgICAgW2BzdGF0cy5hbW91bnRzLiR7b3V0Y29tZUlkfWBdOiBpbmNyZW1lbnQoYW1vdW50KSxcclxuICAgICAgICAgICdzdGF0cy50b3RhbEJldHMnOiBpbmNyZW1lbnQoMSksXHJcbiAgICAgICAgICAnc3RhdHMudG90YWxQb29sJzogaW5jcmVtZW50KGFtb3VudClcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoc3RhdHNFcnIpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIGV2ZW50IHN0YXRzIChsaWtlbHkgcGVybWlzc2lvbiBpc3N1ZSk6XCIsIHN0YXRzRXJyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgc3RyZWFrVHlwZSwgbmV3U3RyZWFrIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY3JlYXRlRXZlbnQgPSBhc3luYyAoZXZlbnREYXRhKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpLCB7XHJcbiAgICAgICAgc3RhdHVzOiAnb3BlbicsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgLi4uZXZlbnREYXRhXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgZXZlbnRcIiwgZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlRXZlbnRPcmRlciA9IGFzeW5jIChldmVudElkLCBuZXdPcmRlcikgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCksIHsgb3JkZXI6IG5ld09yZGVyIH0pO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlRXZlbnQgPSBhc3luYyAoZXZlbnRJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gTm90ZTogVGhpcyBkb2VzIE5PVCByZWZ1bmQgYmV0cyBhdXRvbWF0aWNhbGx5IGluIHRoaXMgc2ltcGxlIHZlcnNpb25cclxuICAgICAgLy8gWW91IHdvdWxkIG5lZWQgQ2xvdWQgRnVuY3Rpb25zIGZvciByb2J1c3QgYmFja2VuZCBsb2dpY1xyXG4gICAgICBjb25zdCBldmVudFJlZiA9IGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpO1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZXZlbnRSZWYsIHsgc3RhdHVzOiAnZGVsZXRlZCcgfSk7IC8vIFNvZnQgZGVsZXRlIGlzIHNhZmVyP1xyXG4gICAgICAvLyBGb3Igbm93LCBsZXQncyBqdXN0IGFjdHVhbGx5IGRlbGV0ZSBpdCBmb3IgY2xlYW5saW5lc3MgaW4gdGhlIFVJIGFzIHJlcXVlc3RlZCBwcmV2aW91c2x5XHJcbiAgICAgIC8vIGJ1dCB1c3VhbGx5IG9uIGxvY2FsIHZlcnNpb24gd2UganVzdCBmaWx0ZXJlZC5cclxuICAgICAgLy8gV2FpdCwgRmlyZXN0b3JlIGRlbGV0ZURvYyBpcyBiZXR0ZXIuXHJcbiAgICAgIC8vIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSk7IFxyXG4gICAgICAvLyBMZXQncyBzdGljayB0byB1cGRhdGUgdG8gJ2RlbGV0ZWQnIG9yIGp1c3QgcmVseSBvbiB0aGUgVUkgZmlsdGVyP1xyXG4gICAgICAvLyBMZXQncyBhY3R1YWxseSBkZWxldGUuXHJcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlRmVhdHVyZWQgPSBhc3luYyAoZXZlbnRJZCwgY3VycmVudFN0YXR1cykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpLCB7XHJcbiAgICAgICAgZmVhdHVyZWQ6ICFjdXJyZW50U3RhdHVzXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzb2x2ZUV2ZW50ID0gYXN5bmMgKGV2ZW50SWQsIHdpbm5lck91dGNvbWVJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuICAgICAgY29uc3QgZXZlbnRSZWYgPSBkb2MoZGIsICdldmVudHMnLCBldmVudElkKTtcclxuXHJcbiAgICAgIC8vIDEuIE1hcmsgRXZlbnQgYXMgU2V0dGxlZCAoSW4gQmF0Y2gpXHJcbiAgICAgIGJhdGNoLnVwZGF0ZShldmVudFJlZiwge1xyXG4gICAgICAgIHN0YXR1czogJ3NldHRsZWQnLFxyXG4gICAgICAgIHdpbm5lck91dGNvbWVJZFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIFByb2Nlc3MgQmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnRJZCkpO1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpOyAvLyBOZWVkIGFsbCBiZXRzIHRvIHNldHRsZVxyXG5cclxuICAgICAgZm9yIChjb25zdCBiZXREb2Mgb2YgYmV0c1NuYXAuZG9jcykge1xyXG4gICAgICAgIGNvbnN0IGJldCA9IGJldERvYy5kYXRhKCk7XHJcbiAgICAgICAgLy8gU2tpcCBpZiBhbHJlYWR5IHNldHRsZWQgdG8gYXZvaWQgZG91YmxlLXBheS9kZWR1Y3RcclxuICAgICAgICBpZiAoYmV0LnN0YXR1cyAhPT0gJ3BlbmRpbmcnKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNXaW5uZXIgPSBiZXQub3V0Y29tZUlkID09PSB3aW5uZXJPdXRjb21lSWQ7XHJcbiAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgYmV0LnVzZXJJZCk7XHJcblxyXG4gICAgICAgIC8vIEZldGNoIFVzZXIgdG8gQ2FsYyBQb3J0Zm9saW8gSW1wYWN0XHJcbiAgICAgICAgbGV0IHBlcmNlbnRDaGFuZ2UgPSAwO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcclxuICAgICAgICAgIGlmICh1c2VyU25hcC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJTbmFwLmRhdGEoKTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudE5ldFdvcnRoID0gKHVzZXJEYXRhLmJhbGFuY2UgfHwgMCkgKyAodXNlckRhdGEuaW52ZXN0ZWQgfHwgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9maXQgKG9yIExvc3MpIGZyb20gdGhpcyBzcGVjaWZpYyBiZXRcclxuICAgICAgICAgICAgY29uc3QgcHJvZml0ID0gaXNXaW5uZXJcclxuICAgICAgICAgICAgICA/IChiZXQucG90ZW50aWFsUGF5b3V0IC0gYmV0LmFtb3VudCkgLy8gTmV0IFByb2ZpdFxyXG4gICAgICAgICAgICAgIDogLWJldC5hbW91bnQ7ICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXQgTG9zc1xyXG5cclxuICAgICAgICAgICAgLy8gUG9ydGZvbGlvIEltcGFjdCAlID0gKFByb2ZpdCAvIGN1cnJlbnROZXRXb3J0aCkgKiAxMDBcclxuICAgICAgICAgICAgcGVyY2VudENoYW5nZSA9IGN1cnJlbnROZXRXb3J0aCA+IDBcclxuICAgICAgICAgICAgICA/IChwcm9maXQgLyBjdXJyZW50TmV0V29ydGgpICogMTAwXHJcbiAgICAgICAgICAgICAgOiAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNhbGMgbGVnYWN5IHN0YXRzXCIsIGVycik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXR0bGUgdGhlIGJldCBkb2N1bWVudFxyXG4gICAgICAgIGJhdGNoLnVwZGF0ZShiZXREb2MucmVmLCB7XHJcbiAgICAgICAgICBzdGF0dXM6IGlzV2lubmVyID8gJ3dvbicgOiAnbG9zdCcsXHJcbiAgICAgICAgICBzZXR0bGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgVXNlciBCYWxhbmNlICYgSW52ZXN0ZWQgJiBMYXN0IEJldCBTdGF0c1xyXG4gICAgICAgIGlmIChpc1dpbm5lcikge1xyXG4gICAgICAgICAgYmF0Y2gudXBkYXRlKHVzZXJSZWYsIHtcclxuICAgICAgICAgICAgYmFsYW5jZTogaW5jcmVtZW50KGJldC5wb3RlbnRpYWxQYXlvdXQpLFxyXG4gICAgICAgICAgICBpbnZlc3RlZDogaW5jcmVtZW50KC1iZXQuYW1vdW50KSxcclxuICAgICAgICAgICAgbGFzdEJldFBlcmNlbnQ6IHBlcmNlbnRDaGFuZ2VcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBiYXRjaC51cGRhdGUodXNlclJlZiwge1xyXG4gICAgICAgICAgICBpbnZlc3RlZDogaW5jcmVtZW50KC1iZXQuYW1vdW50KSxcclxuICAgICAgICAgICAgbGFzdEJldFBlcmNlbnQ6IHBlcmNlbnRDaGFuZ2VcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIE5vdGlmaWNhdGlvblxyXG4gICAgICAgIGNvbnN0IG5vdGlmUmVmID0gZG9jKGNvbGxlY3Rpb24oZGIsICdub3RpZmljYXRpb25zJykpO1xyXG4gICAgICAgIGJhdGNoLnNldChub3RpZlJlZiwge1xyXG4gICAgICAgICAgdXNlcklkOiBiZXQudXNlcklkLFxyXG4gICAgICAgICAgdHlwZTogJ3Jlc3VsdCcsXHJcbiAgICAgICAgICBldmVudElkOiBldmVudElkLFxyXG4gICAgICAgICAgdGl0bGU6IGlzV2lubmVyID8gJ1lvdSBXb24hJyA6ICdCZXQgTG9zdCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiBpc1dpbm5lclxyXG4gICAgICAgICAgICA/IGBZb3Ugd29uICQkeyhiZXQucG90ZW50aWFsUGF5b3V0KS50b0ZpeGVkKDIpfSBvbiAke2JldC5ldmVudFRpdGxlfSAoJHtiZXQub3V0Y29tZUxhYmVsfSlgXHJcbiAgICAgICAgICAgIDogYFlvdSBsb3N0ICQke2JldC5hbW91bnQudG9GaXhlZCgyKX0gb24gJHtiZXQuZXZlbnRUaXRsZX0gKCR7YmV0Lm91dGNvbWVMYWJlbH0pYCxcclxuICAgICAgICAgIHJlYWQ6IGZhbHNlLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIlJlc29sdmUgRXZlbnQgRXJyb3I6XCIsIGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGZpeFN0dWNrQmV0cyA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGV2ZW50c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnZXZlbnRzJyksIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAnc2V0dGxlZCcpKTtcclxuICAgICAgY29uc3QgZXZlbnRzU25hcCA9IGF3YWl0IGdldERvY3MoZXZlbnRzUSk7XHJcblxyXG4gICAgICBsZXQgdG90YWxGaXhlZCA9IDA7XHJcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGV2ZW50RG9jIG9mIGV2ZW50c1NuYXAuZG9jcykge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnREb2MuZGF0YSgpO1xyXG4gICAgICAgIGNvbnN0IHdpbm5lck91dGNvbWVJZCA9IGV2ZW50Lndpbm5lck91dGNvbWVJZDtcclxuICAgICAgICBpZiAoIXdpbm5lck91dGNvbWVJZCkgY29udGludWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ2V2ZW50SWQnLCAnPT0nLCBldmVudERvYy5pZCksIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAncGVuZGluZycpKTtcclxuICAgICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGJldERvYyBvZiBiZXRzU25hcC5kb2NzKSB7XHJcbiAgICAgICAgICBjb25zdCBiZXQgPSBiZXREb2MuZGF0YSgpO1xyXG4gICAgICAgICAgLy8gRG91YmxlIGNoZWNrIGl0J3MgcGVuZGluZ1xyXG4gICAgICAgICAgaWYgKGJldC5zdGF0dXMgIT09ICdwZW5kaW5nJykgY29udGludWU7XHJcblxyXG4gICAgICAgICAgY29uc3QgaXNXaW5uZXIgPSBiZXQub3V0Y29tZUlkID09PSB3aW5uZXJPdXRjb21lSWQ7XHJcbiAgICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCBiZXQudXNlcklkKTtcclxuXHJcbiAgICAgICAgICBsZXQgcGVyY2VudENoYW5nZSA9IDA7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBGZXRjaCBVc2VyIGZvciBOZXQgV29ydGggQ2FsY1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyU25hcC5leGlzdHMoKSA/IHVzZXJTbmFwLmRhdGEoKSA6IHsgYmFsYW5jZTogMCwgaW52ZXN0ZWQ6IDAgfTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudE5ldFdvcnRoID0gKHVzZXJEYXRhLmJhbGFuY2UgfHwgMCkgKyAodXNlckRhdGEuaW52ZXN0ZWQgfHwgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9maXQgKG9yIExvc3MpIGZyb20gdGhpcyBzcGVjaWZpYyBiZXRcclxuICAgICAgICAgICAgY29uc3QgcHJvZml0ID0gaXNXaW5uZXJcclxuICAgICAgICAgICAgICA/IChiZXQucG90ZW50aWFsUGF5b3V0IC0gYmV0LmFtb3VudCkgLy8gTmV0IFByb2ZpdFxyXG4gICAgICAgICAgICAgIDogLWJldC5hbW91bnQ7ICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXQgTG9zc1xyXG5cclxuICAgICAgICAgICAgLy8gUG9ydGZvbGlvIEltcGFjdCAlID0gKFByb2ZpdCAvIGN1cnJlbnROZXRXb3J0aCkgKiAxMDBcclxuICAgICAgICAgICAgcGVyY2VudENoYW5nZSA9IGN1cnJlbnROZXRXb3J0aCA+IDBcclxuICAgICAgICAgICAgICA/IChwcm9maXQgLyBjdXJyZW50TmV0V29ydGgpICogMTAwXHJcbiAgICAgICAgICAgICAgOiAwO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgfVxyXG5cclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZShiZXREb2MucmVmLCB7XHJcbiAgICAgICAgICAgIHN0YXR1czogaXNXaW5uZXIgPyAnd29uJyA6ICdsb3N0JyxcclxuICAgICAgICAgICAgc2V0dGxlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChpc1dpbm5lcikge1xyXG4gICAgICAgICAgICBiYXRjaC51cGRhdGUodXNlclJlZiwge1xyXG4gICAgICAgICAgICAgIGJhbGFuY2U6IGluY3JlbWVudChiZXQucG90ZW50aWFsUGF5b3V0KSxcclxuICAgICAgICAgICAgICBpbnZlc3RlZDogaW5jcmVtZW50KC1iZXQuYW1vdW50KSxcclxuICAgICAgICAgICAgICBsYXN0QmV0UGVyY2VudDogcGVyY2VudENoYW5nZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyUmVmLCB7XHJcbiAgICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudCksXHJcbiAgICAgICAgICAgICAgbGFzdEJldFBlcmNlbnQ6IHBlcmNlbnRDaGFuZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0b3RhbEZpeGVkKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodG90YWxGaXhlZCA+IDApIHtcclxuICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgRml4ZWQgJHt0b3RhbEZpeGVkfSBzdHVjayBiZXRzLmAgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcblxyXG4gIGNvbnN0IGRlbGV0ZUJldCA9IGFzeW5jIChiZXRJZCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2JldHMnLCBiZXRJZCkpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlRXZlbnQgPSBhc3luYyAoZXZlbnRJZCwgZGF0YSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpLCBkYXRhKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNldE1haW5CZXQgPSBhc3luYyAoZXZlbnRJZCwgbWFpbk91dGNvbWVJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgICBjb25zdCBldmVudFJlZiA9IGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpO1xyXG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jKGV2ZW50UmVmKTtcclxuICAgICAgaWYgKCFzbmFwLmV4aXN0cygpKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRXZlbnQgbm90IGZvdW5kXCIgfTtcclxuXHJcbiAgICAgIGNvbnN0IGV2dCA9IHNuYXAuZGF0YSgpO1xyXG4gICAgICAvLyBSZW1vdmUgJ21haW4nIHR5cGUgZnJvbSBhbGwsIHRoZW4gc2V0IGl0IGZvciB0aGUgY2hvc2VuIG9uZSBwbHVzIGl0cyBzaWJsaW5nP1xyXG4gICAgICAvLyBXYWl0LCBcIk1haW4gQmV0XCIgdXN1YWxseSBpbXBsaWVzIGEgUEFJUiBvZiBvdXRjb21lcyAoZS5nLiBDaGllZnMgdnMgNDllcnMpLlxyXG4gICAgICAvLyBJZiB0aGUgdXNlciBzZWxlY3RzIFwiQ2hpZWZzXCIgYXMgbWFpbiwgd2UgbGlrZWx5IHdhbnQgXCI0OWVyc1wiICh0aGUgb3RoZXIgb25lIGluIHRoYXQgcGFpcikgdG8gYWxzbyBiZSBtYWluLlxyXG4gICAgICAvLyBCdXQgb3V0Y29tZXMgYXJlIGp1c3QgYSBmbGF0IGxpc3QuIFxyXG4gICAgICAvLyBTaW1wbGlmaWNhdGlvbjogVGhlIGFkbWluIGNsaWNrcyBcIkhpZ2hsaWdodCBUaGlzIFBhaXJcIiBvbiBvbmUgb3V0Y29tZSwgYW5kIHdlIGFzc3VtZSB0aGUgbmV4dCBvbmUgaXMgaXRzIHBhaXI/XHJcbiAgICAgIC8vIE9yIHdlIGp1c3QgZmxhZyBUSElTIG91dGNvbWUncyBwYWlyIGFzIG1haW4uXHJcblxyXG4gICAgICAvLyBMZXQncyBpdGVyYXRlIGFuZCBqdXN0IHRvZ2dsZSB0aGUgdHlwZSAnbWFpbicgZm9yIHRoZSB0YXJnZXRlZCBvdXRjb21lKHMpLlxyXG4gICAgICAvLyBBY3R1YWxseSwgY2xlYW5lciBkZXNpZ246IHRvZ2dsZSBcInR5cGU6IG1haW5cIiBmb3Igc3BlY2lmaWMgb3V0Y29tZXMuXHJcblxyXG4gICAgICBjb25zdCBuZXdPdXRjb21lcyA9IGV2dC5vdXRjb21lcy5tYXAobyA9PiB7XHJcbiAgICAgICAgaWYgKG8uaWQgPT09IG1haW5PdXRjb21lSWQpIHJldHVybiB7IC4uLm8sIHR5cGU6ICdtYWluJyB9O1xyXG4gICAgICAgIC8vIElmIHdlIHdhbnQgdG8gdW5zZXQgb3RoZXJzPyBNYXliZSBub3QsIG1heWJlIG11bHRpcGxlIG1haW4gYmV0cyBhbGxvd2VkLlxyXG4gICAgICAgIHJldHVybiBvO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwgeyBvdXRjb21lczogbmV3T3V0Y29tZXMgfSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBzdWJtaXRJZGVhID0gYXN5bmMgKGlkZWFUZXh0KSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcblxyXG4gICAgLy8gRHVwbGljYXRlIENoZWNrXHJcbiAgICBjb25zdCBxRHVwID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2lkZWFzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VyLmlkKSwgd2hlcmUoJ3RleHQnLCAnPT0nLCBpZGVhVGV4dCkpO1xyXG4gICAgY29uc3Qgc25hcER1cCA9IGF3YWl0IGdldERvY3MocUR1cCk7XHJcbiAgICBpZiAoIXNuYXBEdXAuZW1wdHkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIllvdSBhbHJlYWR5IHN1Z2dlc3RlZCB0aGlzISBIZXkgc3dpdGNoIGl0IHVwLlwiIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgRGFpbHkgTGltaXQgKENsaWVudC1zaWRlIGNoZWNrIGJhc2VkIG9uIGxvY2FsIHVzZXIgZGF0YSwgaWRlYWxseSBiYWNrZW5kIGRvZXMgdGhpcylcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgIGxldCBjdXJyZW50Q291bnQgPSAwO1xyXG5cclxuICAgIGlmICh1c2VyLnN1Ym1pc3Npb25EYXRhICYmIHVzZXIuc3VibWlzc2lvbkRhdGEuZGF0ZSA9PT0gdG9kYXkpIHtcclxuICAgICAgY3VycmVudENvdW50ID0gdXNlci5zdWJtaXNzaW9uRGF0YS5jb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudENvdW50ID49IDUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRGFpbHkgbGltaXQgcmVhY2hlZCAoNS81KS4gQ29tZSBiYWNrIHRvbW9ycm93IScgfTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBDcmVhdGUgSWRlYSBEb2NcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIHRleHQ6IGlkZWFUZXh0LFxyXG4gICAgICAgIHN1Ym1pdHRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBVcGRhdGUgVXNlciAoUmV3YXJkICsgU3VibWlzc2lvbiBDb3VudClcclxuICAgICAgLy8gSWYgZGF0ZSBkaWZmZXJlbnQsIHNpbXBsZSBzZXQuIElmIHNhbWUsIGluY3JlbWVudC5cclxuICAgICAgLy8gRmlyZXN0b3JlIHVwZGF0ZSBpcyB0cmlja3kgd2l0aCBuZXN0ZWQgb2JqZWN0cywgc28gd2Ugc2V0IHRoZSB3aG9sZSBvYmplY3QuXHJcbiAgICAgIC8vIFdlIGNhbGN1bGF0ZSBuZXcgY291bnQgbG9jYWxseSB0byBlbnN1cmUgc3luYyB3aXRoIHRoZSBjaGVjay5cclxuXHJcbiAgICAgIGNvbnN0IG5ld0NvdW50ID0gY3VycmVudENvdW50ICsgMTtcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCB7XHJcbiAgICAgICAgYmFsYW5jZTogaW5jcmVtZW50KDE1KSwgLy8gUmV3YXJkXHJcbiAgICAgICAgc3VibWlzc2lvbkRhdGE6IHtcclxuICAgICAgICAgIGRhdGU6IHRvZGF5LFxyXG4gICAgICAgICAgY291bnQ6IG5ld0NvdW50XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdJZGVhIHN1Ym1pdHRlZCEgKyQxNS4wMCcgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVVc2VyR3JvdXBzID0gYXN5bmMgKHRhcmdldFVzZXJJZCwgZ3JvdXBzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHRhcmdldFVzZXJJZCk7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUmVmLCB7IGdyb3VwczogZ3JvdXBzIHx8IFtdIH0pO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlSWRlYSA9IGFzeW5jIChpZGVhSWQpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdpZGVhcycsIGlkZWFJZCkpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jICh1cGRhdGVzKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gVXBkYXRlIEZpcmVzdG9yZSBGSVJTVCAoUHJvZmlsZSBQaWMsIFVzZXJuYW1lLCBldGMuKVxyXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdCBub24tc2Vuc2l0aXZlIHVwZGF0ZXMgYWx3YXlzIHN1Y2NlZWQgZXZlbiBpZiBBdXRoIGZhaWxzLlxyXG4gICAgICBjb25zdCBmaXJlc3RvcmVVcGRhdGVzID0geyAuLi51cGRhdGVzIH07XHJcbiAgICAgIGRlbGV0ZSBmaXJlc3RvcmVVcGRhdGVzLnBhc3N3b3JkOyAvLyBEb24ndCBzdG9yZSByYXcgcGFzc3dvcmQgaW4gREJcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCBmaXJlc3RvcmVVcGRhdGVzKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBsb2NhbCBzdGF0ZSBpbW1lZGlhdGVseSBmb3IgdGhlIFVJXHJcbiAgICAgIHNldFVzZXIocHJldiA9PiAoeyAuLi5wcmV2LCAuLi5maXJlc3RvcmVVcGRhdGVzIH0pKTtcclxuXHJcbiAgICAgIC8vIDIuIEF0dGVtcHQgQXV0aCBVcGRhdGVzIChTZW5zaXRpdmU6IEVtYWlsL1Bhc3N3b3JkKVxyXG4gICAgICBsZXQgYXV0aFVwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgbGV0IGF1dGhFcnJvck1zZyA9ICcnO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBVcGRhdGUgRW1haWxcclxuICAgICAgICBpZiAodXBkYXRlcy5lbWFpbCAmJiBhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50QXV0aEVtYWlsID0gYXV0aC5jdXJyZW50VXNlci5lbWFpbDtcclxuICAgICAgICAgIGlmICh1cGRhdGVzLmVtYWlsLnRvTG93ZXJDYXNlKCkgIT09IGN1cnJlbnRBdXRoRW1haWwudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRGVidWc6IEF0dGVtcHRpbmcgZW1haWwgdXBkYXRlIGZyb20gJHtjdXJyZW50QXV0aEVtYWlsfSB0byAke3VwZGF0ZXMuZW1haWx9YCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlRW1haWwoYXV0aC5jdXJyZW50VXNlciwgdXBkYXRlcy5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgYXV0aFVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlbWFpbEVycikge1xyXG4gICAgICAgICAgICAgIGlmIChlbWFpbEVyci5jb2RlID09PSAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnIHx8IGVtYWlsRXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3ZlcmlmeScpKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbChhdXRoLmN1cnJlbnRVc2VyLCB1cGRhdGVzLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBQcm9maWxlIHNhdmVkICYgVmVyaWZpY2F0aW9uIHNlbnQgdG8gJHt1cGRhdGVzLmVtYWlsfS5gIH07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRocm93IGVtYWlsRXJyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgUGFzc3dvcmRcclxuICAgICAgICBpZiAodXBkYXRlcy5wYXNzd29yZCAmJiB1cGRhdGVzLnBhc3N3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGlmIChhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVBhc3N3b3JkKGF1dGguY3VycmVudFVzZXIsIHVwZGF0ZXMucGFzc3dvcmQpO1xyXG4gICAgICAgICAgICBhdXRoVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb3JjZSByZWZyZXNoIGlmIEF1dGggY2hhbmdlZFxyXG4gICAgICAgIGlmIChhdXRoVXBkYXRlZCAmJiBhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICBhd2FpdCBhdXRoLmN1cnJlbnRVc2VyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gY2F0Y2ggKGF1dGhFcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBVcGRhdGUgRmFpbGVkOlwiLCBhdXRoRXJyKTtcclxuICAgICAgICBpZiAoYXV0aEVyci5jb2RlID09PSAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nKSB7XHJcbiAgICAgICAgICBhdXRoRXJyb3JNc2cgPSBcIiAoTm90ZTogUmUtbG9naW4gcmVxdWlyZWQgdG8gdXBkYXRlIEVtYWlsL1Bhc3N3b3JkKVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhdXRoRXJyb3JNc2cgPSBgIChBdXRoIEVycm9yOiAke2F1dGhFcnIubWVzc2FnZX0pYDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3NNc2cgPSBhdXRoVXBkYXRlZFxyXG4gICAgICAgID8gJ0FjY291bnQgJiBQcm9maWxlIHVwZGF0ZWQhJ1xyXG4gICAgICAgIDogJ1Byb2ZpbGUgdXBkYXRlZCEnICsgYXV0aEVycm9yTXNnO1xyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYXV0aFVwZGF0ZWQgPyAnQWNjb3VudCAmIFByb2ZpbGUgdXBkYXRlZCEnIDogJ1Byb2ZpbGUgdXBkYXRlZCEnICsgYXV0aEVycm9yTXNnIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmlyZXN0b3JlIFVwZGF0ZSBFcnJvcjpcIiwgZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCByZWNhbGN1bGF0ZUxlYWRlcmJvYXJkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gRmV0Y2ggYWxsIHBlbmRpbmcgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAncGVuZGluZycpKTtcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgLy8gSWYgaW5kZXggbWlzc2luZywgdGhpcyBsaW5lIHRocm93cy5cclxuXHJcbiAgICAgIGNvbnN0IGludmVzdG1lbnRzQnlVc2VyID0ge307XHJcbiAgICAgIGJldHNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJldCA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgaWYgKCFpbnZlc3RtZW50c0J5VXNlcltiZXQudXNlcklkXSkgaW52ZXN0bWVudHNCeVVzZXJbYmV0LnVzZXJJZF0gPSAwO1xyXG4gICAgICAgIGludmVzdG1lbnRzQnlVc2VyW2JldC51c2VySWRdICs9IChiZXQuYW1vdW50IHx8IDApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIEZldGNoIGFsbCB1c2VycyB0byB1cGRhdGUgdGhlaXIgc3RhdHNcclxuICAgICAgY29uc3QgdXNlcnNTbmFwID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAndXNlcnMnKSk7XHJcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcbiAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7XHJcblxyXG4gICAgICB1c2Vyc1NuYXAuZG9jcy5mb3JFYWNoKHVzZXJEb2MgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVpZCA9IHVzZXJEb2MuaWQ7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEludmVzdGVkID0gdXNlckRvYy5kYXRhKCkuaW52ZXN0ZWQgfHwgMDtcclxuICAgICAgICBjb25zdCBjb3JyZWN0SW52ZXN0ZWQgPSBpbnZlc3RtZW50c0J5VXNlclt1aWRdIHx8IDA7XHJcblxyXG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIGRpZmZlcmVudCB0byBzYXZlIHdyaXRlc1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50SW52ZXN0ZWQgLSBjb3JyZWN0SW52ZXN0ZWQpID4gMC4wMSkge1xyXG4gICAgICAgICAgYmF0Y2gudXBkYXRlKHVzZXJEb2MucmVmLCB7IGludmVzdGVkOiBjb3JyZWN0SW52ZXN0ZWQgfSk7XHJcbiAgICAgICAgICB1cGRhdGVDb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAodXBkYXRlQ291bnQgPiAwKSBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYFJlY2FsY3VsYXRlZCEgVXBkYXRlZCAke3VwZGF0ZUNvdW50fSB1c2Vycy5gIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWNhbGMgRGV0YWlsZWQgRXJyb3I6XCIsIGUpO1xyXG4gICAgICBsZXQgZXJyTXNnID0gZS5tZXNzYWdlIHx8IFN0cmluZyhlKTtcclxuICAgICAgaWYgKGVyck1zZy5pbmNsdWRlcyhcImluZGV4XCIpKSBlcnJNc2cgPSBcIk1pc3NpbmcgSW5kZXghIENoZWNrIEJyb3dzZXIgQ29uc29sZSAoRjEyKSBmb3IgdGhlIGNyZWF0aW9uIGxpbmsuXCI7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyTXNnIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYmFja2ZpbGxMYXN0QmV0UGVyY2VudCA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgQmFja2ZpbGwuLi5cIik7XHJcbiAgICAgIGNvbnN0IHVzZXJzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ3VzZXJzJykpO1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgdXBkYXRlQ291bnQgPSAwO1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyB1c2VycyBpbiBjaHVua3MgdG8gYXZvaWQgYmxvd2luZyB1cCBtZW1vcnkvYmF0Y2ggbGltaXRzIGlmIG1hbnkgdXNlcnNcclxuICAgICAgLy8gQnV0IGZvciA8NTAwIHVzZXJzLCBsb29wIGlzIGZpbmUuIEJhdGNoIGxpbWl0IGlzIDUwMCBvcHMuXHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHVzZXJEb2Mgb2YgdXNlcnNTbmFwLmRvY3MpIHtcclxuICAgICAgICBjb25zdCB1aWQgPSB1c2VyRG9jLmlkO1xyXG5cclxuICAgICAgICAvLyBHZXQgYWxsIGJldHMgZm9yIHVzZXIgKHdlIGNyYXZlIHRoZSBtb3N0IHJlY2VudCBzZXR0bGVkIG9uZSlcclxuICAgICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1aWQpKTtcclxuICAgICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpO1xyXG5cclxuICAgICAgICBsZXQgbGFzdFNldHRsZWRCZXQgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGxhdGVzdCBzZXR0bGVkIGJldCBpbiBtZW1vcnlcclxuICAgICAgICBjb25zdCBzZXR0bGVkQmV0cyA9IGJldHNTbmFwLmRvY3NcclxuICAgICAgICAgIC5tYXAoZCA9PiAoeyAuLi5kLmRhdGEoKSwgaWQ6IGQuaWQgfSkpXHJcbiAgICAgICAgICAuZmlsdGVyKGIgPT4gYi5zdGF0dXMgPT09ICd3b24nIHx8IGIuc3RhdHVzID09PSAnbG9zdCcpXHJcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGEuc2V0dGxlZEF0IHx8IGEucGxhY2VkQXQgfHwgMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVCID0gbmV3IERhdGUoYi5zZXR0bGVkQXQgfHwgYi5wbGFjZWRBdCB8fCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVCIC0gZGF0ZUE7IC8vIERlc2NlbmRpbmdcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGxlZEJldHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgbGFzdFNldHRsZWRCZXQgPSBzZXR0bGVkQmV0c1swXTtcclxuXHJcbiAgICAgICAgICBjb25zdCBpc1dpbm5lciA9IGxhc3RTZXR0bGVkQmV0LnN0YXR1cyA9PT0gJ3dvbic7XHJcbiAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJEb2MuZGF0YSgpO1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudE5ldFdvcnRoID0gKHVzZXJEYXRhLmJhbGFuY2UgfHwgMCkgKyAodXNlckRhdGEuaW52ZXN0ZWQgfHwgMCk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcHJvZml0ID0gaXNXaW5uZXJcclxuICAgICAgICAgICAgPyAobGFzdFNldHRsZWRCZXQucG90ZW50aWFsUGF5b3V0IC0gbGFzdFNldHRsZWRCZXQuYW1vdW50KVxyXG4gICAgICAgICAgICA6IC1sYXN0U2V0dGxlZEJldC5hbW91bnQ7XHJcblxyXG4gICAgICAgICAgLy8gQXBwcm94aW1hdGUgUHJlLUJldCBOZXQgV29ydGhcclxuICAgICAgICAgIC8vIEN1cnJlbnQgTmV0IFdvcnRoIERPRVMgaW5jbHVkZSB0aGlzIGJldCdzIHJlc3VsdCAoc2luY2UgaXQncyBzZXR0bGVkKS5cclxuICAgICAgICAgIC8vIFNvIHdlIHN1YnRyYWN0IHRoZSBwcm9maXQgdG8gZ2V0IHRoZSBwcmUtYmV0IHZhbHVlLlxyXG4gICAgICAgICAgY29uc3QgcHJlQmV0TmV0V29ydGggPSBjdXJyZW50TmV0V29ydGggLSBwcm9maXQ7XHJcblxyXG4gICAgICAgICAgLy8gQXZvaWQgZGl2aXNpb24gYnkgemVyb1xyXG4gICAgICAgICAgY29uc3QgcGVyY2VudENoYW5nZSA9IHByZUJldE5ldFdvcnRoID4gMFxyXG4gICAgICAgICAgICA/IChwcm9maXQgLyBwcmVCZXROZXRXb3J0aCkgKiAxMDBcclxuICAgICAgICAgICAgOiAwO1xyXG5cclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyRG9jLnJlZiwgeyBsYXN0QmV0UGVyY2VudDogcGVyY2VudENoYW5nZSB9KTtcclxuICAgICAgICAgIHVwZGF0ZUNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodXBkYXRlQ291bnQgPiAwKSBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYFVwZGF0ZWQgJHt1cGRhdGVDb3VudH0gdXNlcnMgd2l0aCBsYXN0IGJldCBzdGF0cy5gIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbW90ZVNlbGYgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCB7IHJvbGU6ICd1c2VyJyB9KTtcclxuICAgICAgLy8gc2V0VXNlcih7Li4udXNlciwgcm9sZTogJ3VzZXInfSk7IC8vIE9wdGltaXN0aWMgdXBkYXRlXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVBY2NvdW50ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlcklkID0gdXNlci5pZDtcclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuICAgICAgbGV0IG9wQ291bnQgPSAwO1xyXG5cclxuICAgICAgLy8gMS4gRGVsZXRlIGFsbCB1c2VyJ3MgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgYmV0c1NuYXAuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgYmF0Y2guZGVsZXRlKGRvYy5yZWYpO1xyXG4gICAgICAgIG9wQ291bnQrKztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBEZWxldGUgYWxsIHVzZXIncyBpZGVhc1xyXG4gICAgICBjb25zdCBpZGVhc1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBpZGVhc1NuYXAgPSBhd2FpdCBnZXREb2NzKGlkZWFzUSk7XHJcbiAgICAgIGlkZWFzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDMuIERlbGV0ZSBVc2VyIFByb2ZpbGVcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkKTtcclxuICAgICAgYmF0Y2guZGVsZXRlKHVzZXJSZWYpO1xyXG4gICAgICBvcENvdW50Kys7XHJcblxyXG4gICAgICBpZiAob3BDb3VudCA+IDApIHtcclxuICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gNC4gRGVsZXRlIEF1dGggQWNjb3VudFxyXG4gICAgICBpZiAoYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgIGF3YWl0IGF1dGguY3VycmVudFVzZXIuZGVsZXRlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkRlbGV0ZSBFcnJvcjpcIiwgZSk7XHJcbiAgICAgIGlmIChlLmNvZGUgPT09ICdhdXRoL3JlcXVpcmVzLXJlY2VudC1sb2dpbicpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUGxlYXNlIGxvZyBvdXQgYW5kIGxvZyBpbiBhZ2FpbiB0byBkZWxldGUgeW91ciBhY2NvdW50LlwiIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKHRhcmdldFVzZXJJZCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gSGVscGVyIHRvIGRlbGV0ZSBpbiBiYXRjaGVzXHJcbiAgICAgIGNvbnN0IGNvbW1pdEJhdGNoQnVmZmVyID0gYXN5bmMgKGRvY3NUb0RlbGV0ZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IENIVU5LX1NJWkUgPSA0MDA7IC8vIFNhZmV0eSBtYXJnaW4gYmVsb3cgNTAwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2NzVG9EZWxldGUubGVuZ3RoOyBpICs9IENIVU5LX1NJWkUpIHtcclxuICAgICAgICAgIGNvbnN0IGNodW5rID0gZG9jc1RvRGVsZXRlLnNsaWNlKGksIGkgKyBDSFVOS19TSVpFKTtcclxuICAgICAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcbiAgICAgICAgICBjaHVuay5mb3JFYWNoKHJlZiA9PiBiYXRjaC5kZWxldGUocmVmKSk7XHJcbiAgICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBhbGxEb2NzVG9EZWxldGUgPSBbXTtcclxuXHJcbiAgICAgIC8vIDEuIEJldHNcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB0YXJnZXRVc2VySWQpKSk7XHJcbiAgICAgIGJldHNTbmFwLmRvY3MuZm9yRWFjaChkID0+IGFsbERvY3NUb0RlbGV0ZS5wdXNoKGQucmVmKSk7XHJcblxyXG4gICAgICAvLyAyLiBJZGVhc1xyXG4gICAgICBjb25zdCBpZGVhc1NuYXAgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSkpO1xyXG4gICAgICBpZGVhc1NuYXAuZG9jcy5mb3JFYWNoKGQgPT4gYWxsRG9jc1RvRGVsZXRlLnB1c2goZC5yZWYpKTtcclxuXHJcbiAgICAgIC8vIDMuIENvbW1lbnRzIChOZXcpXHJcbiAgICAgIGNvbnN0IGNvbW1lbnRzU25hcCA9IGF3YWl0IGdldERvY3MocXVlcnkoY29sbGVjdGlvbihkYiwgJ2NvbW1lbnRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB0YXJnZXRVc2VySWQpKSk7XHJcbiAgICAgIGNvbW1lbnRzU25hcC5kb2NzLmZvckVhY2goZCA9PiBhbGxEb2NzVG9EZWxldGUucHVzaChkLnJlZikpO1xyXG5cclxuICAgICAgLy8gNC4gTm90aWZpY2F0aW9ucyAoTmV3KVxyXG4gICAgICBjb25zdCBub3RpZlNuYXAgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdub3RpZmljYXRpb25zJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB0YXJnZXRVc2VySWQpKSk7XHJcbiAgICAgIG5vdGlmU25hcC5kb2NzLmZvckVhY2goZCA9PiBhbGxEb2NzVG9EZWxldGUucHVzaChkLnJlZikpO1xyXG5cclxuICAgICAgLy8gNS4gVXNlciBQcm9maWxlXHJcbiAgICAgIGFsbERvY3NUb0RlbGV0ZS5wdXNoKGRvYyhkYiwgJ3VzZXJzJywgdGFyZ2V0VXNlcklkKSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgRGVsZXRpbmcgdXNlciAke3RhcmdldFVzZXJJZH06ICR7YWxsRG9jc1RvRGVsZXRlLmxlbmd0aH0gZG9jdW1lbnRzIHRvdGFsLmApO1xyXG5cclxuICAgICAgYXdhaXQgY29tbWl0QmF0Y2hCdWZmZXIoYWxsRG9jc1RvRGVsZXRlKTtcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkRlbGV0ZSBVc2VyIEVycm9yOlwiLCBlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBzeW5jRXZlbnRTdGF0cyA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBiZXRzXHJcbiAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnYmV0cycpKTtcclxuICAgICAgY29uc3QgYWxsQmV0cyA9IGJldHNTbmFwLmRvY3MubWFwKGQgPT4gZC5kYXRhKCkpO1xyXG5cclxuICAgICAgLy8gMi4gQWdncmVnYXRlIFN0YXRzXHJcbiAgICAgIGNvbnN0IHN0YXRzTWFwID0ge307IC8vIGV2ZW50SWQgLT4geyBjb3VudHM6IHt9LCBhbW91bnRzOiB7fSwgdG90YWxCZXRzOiAwLCB0b3RhbFBvb2w6IDAgfVxyXG5cclxuICAgICAgZm9yIChjb25zdCBiZXQgb2YgYWxsQmV0cykge1xyXG4gICAgICAgIGlmICghc3RhdHNNYXBbYmV0LmV2ZW50SWRdKSB7XHJcbiAgICAgICAgICBzdGF0c01hcFtiZXQuZXZlbnRJZF0gPSB7IGNvdW50czoge30sIGFtb3VudHM6IHt9LCB0b3RhbEJldHM6IDAsIHRvdGFsUG9vbDogMCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzID0gc3RhdHNNYXBbYmV0LmV2ZW50SWRdO1xyXG4gICAgICAgIHMudG90YWxCZXRzICs9IDE7XHJcbiAgICAgICAgcy50b3RhbFBvb2wgKz0gKGJldC5hbW91bnQgfHwgMCk7XHJcbiAgICAgICAgcy5jb3VudHNbYmV0Lm91dGNvbWVJZF0gPSAocy5jb3VudHNbYmV0Lm91dGNvbWVJZF0gfHwgMCkgKyAxO1xyXG4gICAgICAgIHMuYW1vdW50c1tiZXQub3V0Y29tZUlkXSA9IChzLmFtb3VudHNbYmV0Lm91dGNvbWVJZF0gfHwgMCkgKyAoYmV0LmFtb3VudCB8fCAwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gMy4gVXBkYXRlIEV2ZW50c1xyXG4gICAgICBjb25zdCBldmVudHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXZlbnRzJykpO1xyXG4gICAgICBjb25zdCB1cGRhdGVQcm9taXNlcyA9IGV2ZW50c1NuYXAuZG9jcy5tYXAoYXN5bmMgKGRvY1NuYXApID0+IHtcclxuICAgICAgICBjb25zdCBzdGF0cyA9IHN0YXRzTWFwW2RvY1NuYXAuaWRdIHx8IHsgY291bnRzOiB7fSwgYW1vdW50czoge30sIHRvdGFsQmV0czogMCwgdG90YWxQb29sOiAwIH07XHJcbiAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGRvY1NuYXAuaWQpLCB7IHN0YXRzIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHVwZGF0ZVByb21pc2VzKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFkZENvbW1lbnQgPSBhc3luYyAoZXZlbnRJZCwgdGV4dCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMb2dpbiB0byBjb21tZW50JyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY29tbWVudERhdGEgPSB7XHJcbiAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2NvbW1lbnRzJyksIGNvbW1lbnREYXRhKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBFdmVudCB3aXRoIGxhc3RDb21tZW50IGZvciBwcmV2aWV3XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSwge1xyXG4gICAgICAgIGxhc3RDb21tZW50OiB7XHJcbiAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICAgIHRleHQ6IHRleHQubGVuZ3RoID4gNTAgPyB0ZXh0LnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyA6IHRleHQsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IGNvbW1lbnREYXRhLmNyZWF0ZWRBdFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlQ29tbWVudCA9IGFzeW5jIChjb21tZW50SWQpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIEdldCBjb21tZW50IGRldGFpbHMgYmVmb3JlIGRlbGV0aW5nICh0byBmaW5kIHBhcmVudCBldmVudClcclxuICAgICAgY29uc3QgY29tbWVudFJlZiA9IGRvYyhkYiwgJ2NvbW1lbnRzJywgY29tbWVudElkKTtcclxuICAgICAgY29uc3QgY29tbWVudFNuYXAgPSBhd2FpdCBnZXREb2MoY29tbWVudFJlZik7XHJcblxyXG4gICAgICBpZiAoIWNvbW1lbnRTbmFwLmV4aXN0cygpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQ29tbWVudCBhbHJlYWR5IGRlbGV0ZWQnIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHZhbCA9IGNvbW1lbnRTbmFwLmRhdGEoKTtcclxuICAgICAgY29uc3QgZXZlbnRJZCA9IHZhbC5ldmVudElkO1xyXG4gICAgICBjb25zdCBjb21tZW50Q3JlYXRlZEF0ID0gdmFsLmNyZWF0ZWRBdDtcclxuXHJcbiAgICAgIC8vIDIuIERlbGV0ZSB0aGUgY29tbWVudFxyXG4gICAgICBhd2FpdCBkZWxldGVEb2MoY29tbWVudFJlZik7XHJcblxyXG4gICAgICAvLyAzLiBDaGVjayBpZiB0aGlzIHdhcyB0aGUgXCJsYXN0Q29tbWVudFwiIG9uIHRoZSBldmVudCBjYXJkXHJcbiAgICAgIGlmIChldmVudElkKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRSZWYgPSBkb2MoZGIsICdldmVudHMnLCBldmVudElkKTtcclxuICAgICAgICBjb25zdCBldmVudFNuYXAgPSBhd2FpdCBnZXREb2MoZXZlbnRSZWYpO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnRTbmFwLmV4aXN0cygpKSB7XHJcbiAgICAgICAgICBjb25zdCBldmVudERhdGEgPSBldmVudFNuYXAuZGF0YSgpO1xyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGRpc3BsYXllZCBsYXN0Q29tbWVudCBtYXRjaGVzIHRoZSBvbmUgd2UganVzdCBkZWxldGVkXHJcbiAgICAgICAgICBpZiAoZXZlbnREYXRhLmxhc3RDb21tZW50ICYmIGV2ZW50RGF0YS5sYXN0Q29tbWVudC5jcmVhdGVkQXQgPT09IGNvbW1lbnRDcmVhdGVkQXQpIHtcclxuICAgICAgICAgICAgLy8gSXQgd2FzIHRoZSBvbmUgZGlzcGxheWVkISBXZSBuZWVkIHRvIGZpbmQgdGhlIG5ldyBsYXRlc3QgY29tbWVudC5cclxuICAgICAgICAgICAgLy8gRmV0Y2ggYWxsIHJlbWFpbmluZyBjb21tZW50cyBmb3IgdGhpcyBldmVudFxyXG4gICAgICAgICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2NvbW1lbnRzJyksIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnRJZCkpO1xyXG4gICAgICAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc25hcC5lbXB0eSkge1xyXG4gICAgICAgICAgICAgIC8vIEZpbmQgdGhlIG5ld2VzdCBvbmVcclxuICAgICAgICAgICAgICBjb25zdCBhbGwgPSBzbmFwLmRvY3MubWFwKGQgPT4gZC5kYXRhKCkpO1xyXG4gICAgICAgICAgICAgIGFsbC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IG5ld2VzdCA9IGFsbFswXTtcclxuXHJcbiAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGV2ZW50UmVmLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0Q29tbWVudDoge1xyXG4gICAgICAgICAgICAgICAgICB1c2VybmFtZTogbmV3ZXN0LnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICB0ZXh0OiBuZXdlc3QudGV4dC5sZW5ndGggPiA1MCA/IG5ld2VzdC50ZXh0LnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyA6IG5ld2VzdC50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ld2VzdC5jcmVhdGVkQXRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBObyBjb21tZW50cyBsZWZ0XHJcbiAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGV2ZW50UmVmLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0Q29tbWVudDogZGVsZXRlRmllbGQoKVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbWFya05vdGlmaWNhdGlvblJlYWQgPSBhc3luYyAobm90aWZJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ25vdGlmaWNhdGlvbnMnLCBub3RpZklkKSwgeyByZWFkOiB0cnVlIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9XHJcbiAgfTtcclxuXHJcblxyXG5cclxuICBjb25zdCBnZXRVc2VyU3RhdHMgPSBhc3luYyAodGFyZ2V0VXNlcklkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB0YXJnZXRVc2VySWQpO1xyXG4gICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcclxuICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyU25hcC5leGlzdHMoKSA/IHVzZXJTbmFwLmRhdGEoKSA6IHt9O1xyXG5cclxuICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgbGV0IHdpbnMgPSAwO1xyXG4gICAgICBsZXQgbG9zc2VzID0gMDtcclxuICAgICAgbGV0IHByb2ZpdCA9IDA7XHJcbiAgICAgIGxldCBzZXR0bGVkQ291bnQgPSAwO1xyXG5cclxuICAgICAgc25hcC5kb2NzLmZvckVhY2goZCA9PiB7XHJcbiAgICAgICAgY29uc3QgYiA9IGQuZGF0YSgpO1xyXG4gICAgICAgIGlmIChiLnN0YXR1cyA9PT0gJ3dvbicpIHtcclxuICAgICAgICAgIHdpbnMrKztcclxuICAgICAgICAgIHNldHRsZWRDb3VudCsrO1xyXG4gICAgICAgICAgcHJvZml0ICs9ICgoYi5wb3RlbnRpYWxQYXlvdXQgfHwgKGIuYW1vdW50ICogYi5vZGRzKSkgLSBiLmFtb3VudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiLnN0YXR1cyA9PT0gJ2xvc3QnKSB7XHJcbiAgICAgICAgICBsb3NzZXMrKztcclxuICAgICAgICAgIHNldHRsZWRDb3VudCsrO1xyXG4gICAgICAgICAgcHJvZml0IC09IGIuYW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0b3RhbCA9IHNuYXAuc2l6ZTtcclxuICAgICAgY29uc3Qgd2luUmF0ZSA9IHNldHRsZWRDb3VudCA+IDAgPyAoKHdpbnMgLyBzZXR0bGVkQ291bnQpICogMTAwKS50b0ZpeGVkKDEpIDogMDtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBzdGF0czogeyB3aW5zLCBsb3NzZXMsIHRvdGFsLCB3aW5SYXRlLCBwcm9maXQgfSxcclxuICAgICAgICBwcm9maWxlOiB7IGJpbzogdXNlckRhdGEuYmlvIHx8ICcnLCBwcm9maWxlUGljOiB1c2VyRGF0YS5wcm9maWxlUGljLCB1c2VybmFtZTogdXNlckRhdGEudXNlcm5hbWUgfVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9OyB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0V2Vla2x5TGVhZGVyYm9hcmQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCBkYXlPZldlZWsgPSBub3cuZ2V0RGF5KCk7IC8vIDAgKFN1bikgLSA2IChTYXQpXHJcbiAgICAgIGNvbnN0IHN0YXJ0T2ZXZWVrID0gbmV3IERhdGUobm93KTtcclxuICAgICAgLy8gUmVzZXQgdG8gbW9zdCByZWNlbnQgU3VuZGF5IChvciB0b2RheSBpZiBpdCBpcyBTdW5kYXkpXHJcbiAgICAgIHN0YXJ0T2ZXZWVrLnNldERhdGUobm93LmdldERhdGUoKSAtIGRheU9mV2Vlayk7XHJcbiAgICAgIHN0YXJ0T2ZXZWVrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgICBjb25zdCBpc29TdHIgPSBzdGFydE9mV2Vlay50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCJGZXRjaGluZyB3ZWVrbHkgc3RhdHMgc2luY2U6XCIsIGlzb1N0cik7XHJcblxyXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3N0YXR1cycsICdpbicsIFsnd29uJywgJ2xvc3QnXSksIHdoZXJlKCdzZXR0bGVkQXQnLCAnPj0nLCBpc29TdHIpKTtcclxuICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcblxyXG4gICAgICBjb25zdCBzdGF0cyA9IHt9O1xyXG4gICAgICBzbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGNvbnN0IGIgPSBkb2MuZGF0YSgpO1xyXG4gICAgICAgIGlmICghc3RhdHNbYi51c2VySWRdKSBzdGF0c1tiLnVzZXJJZF0gPSAwO1xyXG4gICAgICAgIGlmIChiLnN0YXR1cyA9PT0gJ3dvbicpIHtcclxuICAgICAgICAgIC8vIFByb2ZpdCA9IFBheW91dCAtIFdhZ2VyXHJcbiAgICAgICAgICBjb25zdCBwYXlvdXQgPSBiLnBvdGVudGlhbFBheW91dCB8fCAoYi5hbW91bnQgKiBiLm9kZHMpO1xyXG4gICAgICAgICAgc3RhdHNbYi51c2VySWRdICs9IChwYXlvdXQgLSBiLmFtb3VudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIExvc3MgPSAtV2FnZXJcclxuICAgICAgICAgIHN0YXRzW2IudXNlcklkXSAtPSBiLmFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbGVhZGVyYm9hcmQgPSBPYmplY3QuZW50cmllcyhzdGF0cykubWFwKChbdXNlcklkLCBwcm9maXRdKSA9PiAoeyB1c2VySWQsIHByb2ZpdCB9KSk7XHJcbiAgICAgIGxlYWRlcmJvYXJkLnNvcnQoKGEsIGIpID0+IGIucHJvZml0IC0gYS5wcm9maXQpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBsZWFkZXJib2FyZCB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiV2Vla2x5IExlYWRlcmJvYXJkIEVycm9yOlwiLCBlKTtcclxuICAgICAgbGV0IG1zZyA9IGUubWVzc2FnZTtcclxuICAgICAgaWYgKG1zZy5pbmNsdWRlcyhcImluZGV4XCIpKSBtc2cgPSBcIk1pc3NpbmcgSW5kZXghIENoZWNrIGNvbnNvbGUgKEYxMikgZm9yIHRoZSBjcmVhdGlvbiBsaW5rLlwiO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IG1zZyB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZVN5c3RlbUFubm91bmNlbWVudCA9IGFzeW5jIChkYXRhKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdzeXN0ZW0nLCAnYW5ub3VuY2VtZW50Jyk7XHJcbiAgICAgIC8vIE1lcmdlIHRydWUgdG8gYWxsb3cgcGFydGlhbCB1cGRhdGVzIGlmIG5lZWRlZCwgdGhvdWdoIHVzdWFsbHkgd2UgcmVwbGFjZSBjb250ZW50XHJcbiAgICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIGRhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgYWxlcnQoXCJFcnJvciBwb3N0aW5nIGFubm91bmNlbWVudDogXCIgKyBlLm1lc3NhZ2UpOyAvLyBEZWJ1Z1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxBcHBDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XHJcbiAgICAgIHVzZXIsIHNpZ251cCwgc2lnbmluLCBsb2dvdXQsIHVwZGF0ZVVzZXIsIHN1Ym1pdElkZWEsIGRlbGV0ZUlkZWEsIGRlbGV0ZUFjY291bnQsIGRlbGV0ZVVzZXIsIGRlbW90ZVNlbGYsIHN5bmNFdmVudFN0YXRzLFxyXG4gICAgICBldmVudHMsIGNyZWF0ZUV2ZW50LCByZXNvbHZlRXZlbnQsIHVwZGF0ZUV2ZW50LCB1cGRhdGVFdmVudE9yZGVyLCBmaXhTdHVja0JldHMsIGRlbGV0ZUJldCwgZGVsZXRlRXZlbnQsIHRvZ2dsZUZlYXR1cmVkLCByZWNhbGN1bGF0ZUxlYWRlcmJvYXJkLCBiYWNrZmlsbExhc3RCZXRQZXJjZW50LCBhZGRDb21tZW50LCBkZWxldGVDb21tZW50LCBtYXJrTm90aWZpY2F0aW9uUmVhZCwgZ2V0VXNlclN0YXRzLCBnZXRXZWVrbHlMZWFkZXJib2FyZCwgc2V0TWFpbkJldCwgdXBkYXRlVXNlckdyb3VwcywgdXBkYXRlU3lzdGVtQW5ub3VuY2VtZW50LCBzeXN0ZW1Bbm5vdW5jZW1lbnQsXHJcbiAgICAgIGJldHMsIHBsYWNlQmV0LCBpc0xvYWRlZCwgaXNGaXJlYmFzZTogdHJ1ZSwgdXNlcnMsIGlkZWFzLCBkYixcclxuICAgICAgaXNHdWVzdE1vZGUsIHNldElzR3Vlc3RNb2RlIC8vIEV4cG9zZWQgaXNHdWVzdE1vZGUgYW5kIGl0cyBzZXR0ZXJcclxuICAgIH19PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L0FwcENvbnRleHQuUHJvdmlkZXI+XHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFwcCgpIHtcclxuICByZXR1cm4gdXNlQ29udGV4dChBcHBDb250ZXh0KTtcclxufVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiY29sbGVjdGlvbiIsImFkZERvYyIsIm9uU25hcHNob3QiLCJxdWVyeSIsIm9yZGVyQnkiLCJkb2MiLCJzZXREb2MiLCJ1cGRhdGVEb2MiLCJnZXREb2MiLCJ3aGVyZSIsImluY3JlbWVudCIsImRlbGV0ZURvYyIsImdldERvY3MiLCJsaW1pdCIsIndyaXRlQmF0Y2giLCJkZWxldGVGaWVsZCIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbk91dCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInVwZGF0ZUVtYWlsIiwidXBkYXRlUGFzc3dvcmQiLCJ2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCIsImRiIiwiYXV0aCIsIkFwcENvbnRleHQiLCJ1c2VBcHBDb250ZXh0IiwiQXBwUHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJzZXRVc2VyIiwiZXZlbnRzIiwic2V0RXZlbnRzIiwiYmV0cyIsInNldEJldHMiLCJpZGVhcyIsInNldElkZWFzIiwiaXNMb2FkZWQiLCJzZXRJc0xvYWRlZCIsImlzR3Vlc3RNb2RlIiwic2V0SXNHdWVzdE1vZGUiLCJzdG9yZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInRpbWVyIiwic2V0VGltZW91dCIsInByZXYiLCJjb25zb2xlIiwid2FybiIsImNsZWFyVGltZW91dCIsInVuc3Vic2NyaWJlUHJvZmlsZSIsInVuc3Vic2NyaWJlQXV0aCIsImZpcmViYXNlVXNlciIsImlkIiwidWlkIiwiZW1haWwiLCJ1c2VybmFtZSIsImRpc3BsYXlOYW1lIiwic3BsaXQiLCJyb2xlIiwidXNlclJlZiIsImRvY1NuYXAiLCJleGlzdHMiLCJ1c2VyRGF0YSIsImRhdGEiLCJyZWZlcnJhbENvZGUiLCJuZXdDb2RlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwidG9VcHBlckNhc2UiLCJjYXRjaCIsImVyciIsImVycm9yIiwibG9nIiwibXlSZWZlcnJhbENvZGUiLCJuZXdVc2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImJhbGFuY2UiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ0aGVuIiwiYWxlcnQiLCJ1c2VycyIsInNldFVzZXJzIiwic3lzdGVtQW5ub3VuY2VtZW50Iiwic2V0U3lzdGVtQW5ub3VuY2VtZW50IiwiYW5ub3VuY2VtZW50UmVmIiwidW5zdWJBbm5vdW5jZW1lbnQiLCJldmVudHNRdWVyeSIsInVuc3ViRXZlbnRzIiwic25hcHNob3QiLCJldmVudHNMaXN0IiwiZG9jcyIsIm1hcCIsInNvcnQiLCJhIiwiYiIsIm9yZGVyQSIsIm9yZGVyIiwidW5kZWZpbmVkIiwib3JkZXJCIiwic3RhdHVzIiwic3RhcnRBdCIsImlkZWFzUXVlcnkiLCJ1bnN1YklkZWFzIiwibGlzdCIsInN1Ym1pdHRlZEF0IiwidXNlcnNRdWVyeSIsInVuc3ViVXNlcnMiLCJiZXRzUXVlcnkiLCJ1bnN1YkJldHMiLCJteUJldHMiLCJwbGFjZWRBdCIsInNpZ251cCIsInBhc3N3b3JkIiwicmVzcCIsInJlZmVycmVkQnkiLCJ0cmltIiwicSIsImVtcHR5IiwicmVmZXJyZXJEb2MiLCJyZWZlcnJlcklkIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzaWduaW4iLCJlbWFpbE9yVXNlcm5hbWUiLCJlIiwidXNlcm5hbWVJbnB1dCIsImNvbCIsImNhbmRpZGF0ZUVtYWlscyIsIlNldCIsImFkZENhbmRpZGF0ZXMiLCJwYXJhbSIsInZhbCIsInNuYXAiLCJmb3JFYWNoIiwiYWRkIiwiY2FwaXRhbGl6ZWQiLCJjaGFyQXQiLCJzbGljZSIsInNpemUiLCJ0cmllZCIsImNhbmRpZGF0ZUVtYWlsIiwiZTIiLCJlbWFpbE5vV2hpdGVzcGFjZSIsInJlcGxhY2UiLCJlMyIsInB1c2giLCJjb2RlIiwiZmlyc3RFbWFpbCIsInN1Z2dlc3RlZEVtYWlsIiwibG9nb3V0IiwicGxhY2VCZXQiLCJldmVudElkIiwib3V0Y29tZUlkIiwiYW1vdW50IiwiZXZlbnQiLCJmaW5kIiwicUV4aXN0aW5nIiwic25hcEV4aXN0aW5nIiwib3RoZXJTaWRlQmV0IiwiZCIsIm91dGNvbWUiLCJvdXRjb21lcyIsIm8iLCJ0b2RheSIsInRvZGF5U3RyIiwidG9EYXRlU3RyaW5nIiwieWVzdGVyZGF5Iiwic2V0RGF0ZSIsImdldERhdGUiLCJ5ZXN0ZXJkYXlTdHIiLCJuZXdTdHJlYWsiLCJjdXJyZW50U3RyZWFrIiwibGFzdERhdGUiLCJsYXN0QmV0RGF0ZSIsInN0cmVha1R5cGUiLCJuZXdMb25nZXN0IiwibWF4IiwibG9uZ2VzdFN0cmVhayIsImludmVzdGVkIiwidXNlcklkIiwib3V0Y29tZUxhYmVsIiwibGFiZWwiLCJldmVudFRpdGxlIiwidGl0bGUiLCJwYXJzZUZsb2F0Iiwib2RkcyIsInBvdGVudGlhbFBheW91dCIsImV2ZW50UmVmIiwic3RhdHNFcnIiLCJjcmVhdGVFdmVudCIsImV2ZW50RGF0YSIsInVwZGF0ZUV2ZW50T3JkZXIiLCJuZXdPcmRlciIsImRlbGV0ZUV2ZW50IiwidG9nZ2xlRmVhdHVyZWQiLCJjdXJyZW50U3RhdHVzIiwiZmVhdHVyZWQiLCJyZXNvbHZlRXZlbnQiLCJ3aW5uZXJPdXRjb21lSWQiLCJiYXRjaCIsInVwZGF0ZSIsImJldHNRIiwiYmV0c1NuYXAiLCJiZXREb2MiLCJiZXQiLCJpc1dpbm5lciIsInBlcmNlbnRDaGFuZ2UiLCJ1c2VyU25hcCIsImN1cnJlbnROZXRXb3J0aCIsInByb2ZpdCIsInJlZiIsInNldHRsZWRBdCIsImxhc3RCZXRQZXJjZW50Iiwibm90aWZSZWYiLCJzZXQiLCJ0eXBlIiwidG9GaXhlZCIsInJlYWQiLCJjb21taXQiLCJmaXhTdHVja0JldHMiLCJldmVudHNRIiwiZXZlbnRzU25hcCIsInRvdGFsRml4ZWQiLCJldmVudERvYyIsImRlbGV0ZUJldCIsImJldElkIiwidXBkYXRlRXZlbnQiLCJzZXRNYWluQmV0IiwibWFpbk91dGNvbWVJZCIsImV2dCIsIm5ld091dGNvbWVzIiwic3VibWl0SWRlYSIsImlkZWFUZXh0IiwicUR1cCIsInNuYXBEdXAiLCJjdXJyZW50Q291bnQiLCJzdWJtaXNzaW9uRGF0YSIsImRhdGUiLCJjb3VudCIsInRleHQiLCJuZXdDb3VudCIsInVwZGF0ZVVzZXJHcm91cHMiLCJ0YXJnZXRVc2VySWQiLCJncm91cHMiLCJkZWxldGVJZGVhIiwiaWRlYUlkIiwidXBkYXRlVXNlciIsInVwZGF0ZXMiLCJmaXJlc3RvcmVVcGRhdGVzIiwiYXV0aFVwZGF0ZWQiLCJhdXRoRXJyb3JNc2ciLCJjdXJyZW50VXNlciIsImN1cnJlbnRBdXRoRW1haWwiLCJlbWFpbEVyciIsImxlbmd0aCIsInJlbG9hZCIsImF1dGhFcnIiLCJzdWNjZXNzTXNnIiwicmVjYWxjdWxhdGVMZWFkZXJib2FyZCIsImludmVzdG1lbnRzQnlVc2VyIiwidXNlcnNTbmFwIiwidXBkYXRlQ291bnQiLCJ1c2VyRG9jIiwiY3VycmVudEludmVzdGVkIiwiY29ycmVjdEludmVzdGVkIiwiYWJzIiwiZXJyTXNnIiwiU3RyaW5nIiwiYmFja2ZpbGxMYXN0QmV0UGVyY2VudCIsImxhc3RTZXR0bGVkQmV0Iiwic2V0dGxlZEJldHMiLCJmaWx0ZXIiLCJkYXRlQSIsImRhdGVCIiwicHJlQmV0TmV0V29ydGgiLCJkZW1vdGVTZWxmIiwiZGVsZXRlQWNjb3VudCIsIm9wQ291bnQiLCJkZWxldGUiLCJpZGVhc1EiLCJpZGVhc1NuYXAiLCJkZWxldGVVc2VyIiwiY29tbWl0QmF0Y2hCdWZmZXIiLCJkb2NzVG9EZWxldGUiLCJDSFVOS19TSVpFIiwiaSIsImNodW5rIiwiYWxsRG9jc1RvRGVsZXRlIiwiY29tbWVudHNTbmFwIiwibm90aWZTbmFwIiwic3luY0V2ZW50U3RhdHMiLCJhbGxCZXRzIiwic3RhdHNNYXAiLCJjb3VudHMiLCJhbW91bnRzIiwidG90YWxCZXRzIiwidG90YWxQb29sIiwicyIsInVwZGF0ZVByb21pc2VzIiwic3RhdHMiLCJQcm9taXNlIiwiYWxsIiwiYWRkQ29tbWVudCIsImNvbW1lbnREYXRhIiwibGFzdENvbW1lbnQiLCJkZWxldGVDb21tZW50IiwiY29tbWVudElkIiwiY29tbWVudFJlZiIsImNvbW1lbnRTbmFwIiwiY29tbWVudENyZWF0ZWRBdCIsImV2ZW50U25hcCIsIm5ld2VzdCIsIm1hcmtOb3RpZmljYXRpb25SZWFkIiwibm90aWZJZCIsImdldFVzZXJTdGF0cyIsIndpbnMiLCJsb3NzZXMiLCJzZXR0bGVkQ291bnQiLCJ0b3RhbCIsIndpblJhdGUiLCJwcm9maWxlIiwiYmlvIiwicHJvZmlsZVBpYyIsImdldFdlZWtseUxlYWRlcmJvYXJkIiwibm93IiwiZGF5T2ZXZWVrIiwiZ2V0RGF5Iiwic3RhcnRPZldlZWsiLCJzZXRIb3VycyIsImlzb1N0ciIsInBheW91dCIsImxlYWRlcmJvYXJkIiwiT2JqZWN0IiwiZW50cmllcyIsIm1zZyIsInVwZGF0ZVN5c3RlbUFubm91bmNlbWVudCIsImRvY1JlZiIsIm1lcmdlIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImlzRmlyZWJhc2UiLCJ1c2VBcHAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/store.js\n"));

/***/ })

});