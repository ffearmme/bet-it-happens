"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/bets/page",{

/***/ "(app-pages-browser)/./src/lib/store.js":
/*!**************************!*\
  !*** ./src/lib/store.js ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppProvider: function() { return /* binding */ AppProvider; },\n/* harmony export */   useApp: function() { return /* binding */ useApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ AppProvider,useApp auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\nconst AppContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\nfunction AppProvider(param) {\n    let { children } = param;\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bets, setBets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [ideas, setIdeas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Safety timeout: If Firebase auth hangs for >1s, just load the app (as signed out) to prevent being stuck.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setIsLoaded((prev)=>{\n                if (!prev) console.warn(\"Firebase auth slow - forcing load state\");\n                return true;\n            });\n        }, 1200);\n        return ()=>clearTimeout(timer);\n    }, []);\n    // --- 1. Auth & User Profile Listener ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let unsubscribeProfile = null;\n        // Auth Listener\n        const unsubscribeAuth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, (firebaseUser)=>{\n            // 1. Clean up previous profile listener if any\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n                unsubscribeProfile = null;\n            }\n            if (firebaseUser) {\n                // User is signed in -> Set basic auth user immediately to prevent logout loop\n                // We will enrich this with DB data in a moment\n                setUser((prev)=>prev || {\n                        id: firebaseUser.uid,\n                        email: firebaseUser.email,\n                        username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                        role: \"user\"\n                    });\n                // Listen to Firestore Profile\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", firebaseUser.uid);\n                unsubscribeProfile = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(userRef, (docSnap)=>{\n                    if (docSnap.exists()) {\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...docSnap.data()\n                        });\n                    } else {\n                        // Document does not exist (e.g. first login or previous error).\n                        console.log(\">>> DETECTED NEW USER (No Profile Found) - Creating Profile...\");\n                        // Auto-create the user profile in Firestore\n                        const newUser = {\n                            email: firebaseUser.email,\n                            username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                            role: firebaseUser.email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                            balance: 1000,\n                            createdAt: new Date().toISOString()\n                        };\n                        // Write to DB\n                        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, newUser).then(()=>{\n                            console.log(\">>> SUCCESSFULLY CREATED PROFILE FOR:\", newUser.email);\n                        // alert(\"Welcome! Your profile has been created with $1000.\");\n                        }).catch((err)=>{\n                            console.error(\">>> ERROR CREATING PROFILE:\", err);\n                            alert(\"Error creating profile. Check permissions.\");\n                        });\n                        // Set local state\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...newUser\n                        });\n                    }\n                    setIsLoaded(true);\n                });\n            } else {\n                // User is signed out\n                setUser(null);\n                setBets([]);\n                setIsLoaded(true);\n            }\n        });\n        // Cleanup function when component unmounts\n        return ()=>{\n            unsubscribeAuth();\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n            }\n        };\n    }, []);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // List of all users for leaderboard\n    // ... (existing timeout code) ...\n    // --- 2. Data Listeners (Events, Ideas, Users) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Listen to Events (Limit 50 active)\n        const eventsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubEvents = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(eventsQuery, (snapshot)=>{\n            const eventsList = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            eventsList.sort((a, b)=>(a.status === \"open\" ? -1 : 1) || new Date(a.startAt) - new Date(b.startAt));\n            setEvents(eventsList);\n        });\n        // Listen to Ideas (Limit 50 recent)\n        // Removed orderBy to avoid missing index issues. Sorting client-side.\n        const ideasQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubIdeas = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(ideasQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            list.sort((a, b)=>new Date(b.submittedAt) - new Date(a.submittedAt));\n            setIdeas(list);\n        }, (error)=>{\n            console.error(\"Error listening to ideas:\", error);\n        });\n        // Listen to Users (Global List for Leaderboard & Admin)\n        const usersQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubUsers = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(usersQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Client-side sort by balance desc\n            list.sort((a, b)=>(b.balance || 0) - (a.balance || 0));\n            setUsers(list);\n        });\n        return ()=>{\n            unsubEvents();\n            unsubIdeas();\n            unsubUsers();\n        };\n    }, []);\n    // --- 3. Bets Listener (Only for logged in user) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!user) {\n            setBets([]);\n            return;\n        }\n        const betsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(100));\n        const unsubBets = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(betsQuery, (snapshot)=>{\n            // We'll trust the client side sorting for now or add orderBy index later\n            const myBets = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            myBets.sort((a, b)=>new Date(b.placedAt) - new Date(a.placedAt));\n            setBets(myBets);\n        // localStorage.setItem('bet_bets_cache', JSON.stringify(myBets));\n        });\n        return ()=>unsubBets();\n    }, [\n        user === null || user === void 0 ? void 0 : user.id\n    ]); // Only re-run if user ID changes is tricky, better safe dependency\n    // --- Actions ---\n    const signup = async (email, username, password)=>{\n        try {\n            const resp = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.createUserWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            // Create User Document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", resp.user.uid), {\n                email,\n                username: username || email.split(\"@\")[0],\n                role: email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                balance: 1000,\n                createdAt: new Date().toISOString()\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const signin = async (email, password)=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const logout = async ()=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n    const placeBet = async (eventId, outcomeId, amount)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        if (user.balance < amount) return {\n            success: false,\n            error: \"Insufficient funds\"\n        };\n        const event = events.find((e)=>e.id === eventId);\n        if (!event || event.status !== \"open\") return {\n            success: false,\n            error: \"Event is locked\"\n        };\n        const outcome = event.outcomes.find((o)=>o.id === outcomeId);\n        try {\n            // 1. Deduct Balance\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-amount)\n            });\n            // 2. Create Bet\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), {\n                userId: user.id,\n                username: user.username,\n                eventId,\n                outcomeId,\n                outcomeLabel: outcome.label,\n                eventTitle: event.title,\n                amount: parseFloat(amount),\n                odds: outcome.odds,\n                potentialPayout: amount * outcome.odds,\n                status: \"pending\",\n                placedAt: new Date().toISOString()\n            });\n            // 3. Update Event Stats (Best Effort - ignore permission errors for now)\n            try {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                    [\"stats.counts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    [\"stats.amounts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                    \"stats.totalBets\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    \"stats.totalPool\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount)\n                });\n            } catch (statsErr) {\n                console.warn(\"Could not update event stats (likely permission issue):\", statsErr);\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const createEvent = async (eventData)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), {\n                status: \"open\",\n                createdAt: new Date().toISOString(),\n                ...eventData\n            });\n        } catch (e) {\n            console.error(\"Error creating event\", e);\n        }\n    };\n    const deleteEvent = async (eventId)=>{\n        try {\n            // Note: This does NOT refund bets automatically in this simple version\n            // You would need Cloud Functions for robust backend logic\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                status: \"deleted\"\n            }); // Soft delete is safer?\n            // For now, let's just actually delete it for cleanliness in the UI as requested previously\n            // but usually on local version we just filtered.\n            // Wait, Firestore deleteDoc is better.\n            // await deleteDoc(doc(db, 'events', eventId)); \n            // Let's stick to update to 'deleted' or just rely on the UI filter?\n            // Let's actually delete.\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId));\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const resolveEvent = async (eventId, winnerOutcomeId)=>{\n        try {\n            // 1. Mark Event as Settled\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                status: \"settled\",\n                winnerOutcomeId\n            });\n            // 2. Find all pending bets for this event (This is client side heavy! ideally backend)\n            // Since we are doing a client-side admin, we query ALL bets for this event.\n            // NOTE: This usually requires a composite index on Firestore: eventId + status\n            const betsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(betsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n            // We can't use await inside map easily without Promise.all\n            // But we need to fetch them first. \n            // We actually can't easily query *all* bets from client unless we are admin and security rules allow it.\n            // Assuming Admin has permission to read all bets.\n            // This part is tricky purely client-side without Cloud Functions.\n            // I will implement a \"dumb\" loop here. It works for small scale.\n            // We need to fetch the snapshots once, we don't need a listener.\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            const batchPromises = querySnapshot.docs.map(async (betDoc)=>{\n                const bet = betDoc.data();\n                const isWin = bet.outcomeId === winnerOutcomeId;\n                // Update Bet Status\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\", betDoc.id), {\n                    status: isWin ? \"won\" : \"lost\"\n                });\n                // If Win, Pay User\n                if (isWin) {\n                    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId), {\n                        balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout)\n                    });\n                }\n            });\n            await Promise.all(batchPromises);\n        } catch (e) {\n            console.error(\"Error resolving event\", e);\n        }\n    };\n    const submitIdea = async (ideaText)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        // Check Daily Limit (Client-side check based on local user data, ideally backend does this)\n        const today = new Date().toDateString();\n        let currentCount = 0;\n        if (user.submissionData && user.submissionData.date === today) {\n            currentCount = user.submissionData.count;\n        }\n        if (currentCount >= 5) {\n            return {\n                success: false,\n                error: \"Daily limit reached (5/5). Come back tomorrow!\"\n            };\n        }\n        try {\n            // 1. Create Idea Doc\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), {\n                userId: user.id,\n                username: user.username,\n                text: ideaText,\n                submittedAt: new Date().toISOString()\n            });\n            // 2. Update User (Reward + Submission Count)\n            // If date different, simple set. If same, increment.\n            // Firestore update is tricky with nested objects, so we set the whole object.\n            // We calculate new count locally to ensure sync with the check.\n            const newCount = currentCount + 1;\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(15),\n                submissionData: {\n                    date: today,\n                    count: newCount\n                }\n            });\n            return {\n                success: true,\n                message: \"Idea submitted! +$15.00\"\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteIdea = async (ideaId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\", ideaId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUser = async (updates)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        try {\n            let authUpdated = false;\n            // 1. Update Auth Email if changed\n            if (updates.email && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                const currentAuthEmail = _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.email;\n                if (updates.email !== currentAuthEmail) {\n                    console.log(\"Debug: Attempting email update from \".concat(currentAuthEmail, \" to \").concat(updates.email));\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                    authUpdated = true;\n                }\n            }\n            // 2. Update Auth Password if provided\n            if (updates.password && updates.password.length > 0) {\n                if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updatePassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.password);\n                    authUpdated = true;\n                }\n            }\n            // 3. Update Firestore (exclude password)\n            const firestoreUpdates = {\n                ...updates\n            };\n            delete firestoreUpdates.password; // Don't store raw password in DB\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), firestoreUpdates);\n            // 4. Force refresh to ensure local auth state matches cloud\n            if (authUpdated && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.reload();\n                // Manually update local user state to reflect changes immediately\n                setUser((prev)=>({\n                        ...prev,\n                        ...firestoreUpdates\n                    }));\n            }\n            return {\n                success: true,\n                message: authUpdated ? \"Account & Profile updated!\" : \"Profile updated\"\n            };\n        } catch (e) {\n            console.error(\"Update Error:\", e);\n            if (e.code === \"auth/requires-recent-login\") {\n                return {\n                    success: false,\n                    error: \"CRITICAL: You must re-login to change sensitive info (Email/Password).\"\n                };\n            }\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const demoteSelf = async ()=>{\n        if (!user) return;\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                role: \"user\"\n            });\n            // setUser({...user, role: 'user'}); // Optimistic update\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteAccount = async ()=>{\n        if (!user) return {\n            success: false\n        };\n        try {\n            const userId = user.id;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", userId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            // 4. Delete Auth Account\n            if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.delete();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete Error:\", e);\n            if (e.code === \"auth/requires-recent-login\") {\n                return {\n                    success: false,\n                    error: \"Please log out and log in again to delete your account.\"\n                };\n            }\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteUser = async (targetUserId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const syncEventStats = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"));\n            const allBets = betsSnap.docs.map((d)=>d.data());\n            // 2. Aggregate Stats\n            const statsMap = {}; // eventId -> { counts: {}, amounts: {}, totalBets: 0, totalPool: 0 }\n            for (const bet of allBets){\n                if (!statsMap[bet.eventId]) {\n                    statsMap[bet.eventId] = {\n                        counts: {},\n                        amounts: {},\n                        totalBets: 0,\n                        totalPool: 0\n                    };\n                }\n                const s = statsMap[bet.eventId];\n                s.totalBets += 1;\n                s.totalPool += bet.amount || 0;\n                s.counts[bet.outcomeId] = (s.counts[bet.outcomeId] || 0) + 1;\n                s.amounts[bet.outcomeId] = (s.amounts[bet.outcomeId] || 0) + (bet.amount || 0);\n            }\n            // 3. Update Events\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"));\n            const updatePromises = eventsSnap.docs.map(async (docSnap)=>{\n                const stats = statsMap[docSnap.id] || {\n                    counts: {},\n                    amounts: {},\n                    totalBets: 0,\n                    totalPool: 0\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", docSnap.id), {\n                    stats\n                });\n            });\n            await Promise.all(updatePromises);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AppContext.Provider, {\n        value: {\n            user,\n            signup,\n            signin,\n            logout,\n            updateUser,\n            submitIdea,\n            deleteIdea,\n            deleteAccount,\n            deleteUser,\n            demoteSelf,\n            syncEventStats,\n            events,\n            createEvent,\n            resolveEvent,\n            deleteEvent,\n            bets,\n            placeBet,\n            isLoaded,\n            isFirebase: true,\n            users,\n            ideas\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\ffear\\\\OneDrive\\\\Documents\\\\GitHub\\\\bet-it-happens\\\\src\\\\lib\\\\store.js\",\n        lineNumber: 571,\n        columnNumber: 5\n    }, this);\n}\n_s(AppProvider, \"8lkHadQ9lcbI+p4G40QKBYMKzTo=\");\n_c = AppProvider;\nfunction useApp() {\n    _s1();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppContext);\n}\n_s1(useApp, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvc3RvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUU4RTtBQUlsRDtBQUlMO0FBQ2U7QUFFdEMsTUFBTTZCLDJCQUFhNUIsb0RBQWFBO0FBRXpCLFNBQVM2QixZQUFZLEtBQVk7UUFBWixFQUFFQyxRQUFRLEVBQUUsR0FBWjs7SUFDMUIsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUNqQyxNQUFNLENBQUM4QixRQUFRQyxVQUFVLEdBQUcvQiwrQ0FBUUEsQ0FBQyxFQUFFO0lBQ3ZDLE1BQU0sQ0FBQ2dDLE1BQU1DLFFBQVEsR0FBR2pDLCtDQUFRQSxDQUFDLEVBQUU7SUFDbkMsTUFBTSxDQUFDa0MsT0FBT0MsU0FBUyxHQUFHbkMsK0NBQVFBLENBQUMsRUFBRTtJQUNyQyxNQUFNLENBQUNvQyxVQUFVQyxZQUFZLEdBQUdyQywrQ0FBUUEsQ0FBQztJQUV6Qyw0R0FBNEc7SUFDNUdELGdEQUFTQSxDQUFDO1FBQ1IsTUFBTXVDLFFBQVFDLFdBQVc7WUFDdkJGLFlBQVlHLENBQUFBO2dCQUNWLElBQUksQ0FBQ0EsTUFBTUMsUUFBUUMsSUFBSSxDQUFDO2dCQUN4QixPQUFPO1lBQ1Q7UUFDRixHQUFHO1FBQ0gsT0FBTyxJQUFNQyxhQUFhTDtJQUM1QixHQUFHLEVBQUU7SUFFTCwwQ0FBMEM7SUFDMUN2QyxnREFBU0EsQ0FBQztRQUNSLElBQUk2QyxxQkFBcUI7UUFFekIsZ0JBQWdCO1FBQ2hCLE1BQU1DLGtCQUFrQjFCLGlFQUFrQkEsQ0FBQ0ssMkNBQUlBLEVBQUUsQ0FBQ3NCO1lBQ2hELCtDQUErQztZQUMvQyxJQUFJRixvQkFBb0I7Z0JBQ3RCQTtnQkFDQUEscUJBQXFCO1lBQ3ZCO1lBRUEsSUFBSUUsY0FBYztnQkFDaEIsOEVBQThFO2dCQUM5RSwrQ0FBK0M7Z0JBQy9DakIsUUFBUVcsQ0FBQUEsT0FBUUEsUUFBUTt3QkFDdEJPLElBQUlELGFBQWFFLEdBQUc7d0JBQ3BCQyxPQUFPSCxhQUFhRyxLQUFLO3dCQUN6QkMsVUFBVUosYUFBYUssV0FBVyxJQUFJTCxhQUFhRyxLQUFLLENBQUNHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTt3QkFDdEVDLE1BQU07b0JBQ1I7Z0JBRUEsOEJBQThCO2dCQUM5QixNQUFNQyxVQUFVaEQsdURBQUdBLENBQUNpQix5Q0FBRUEsRUFBRSxTQUFTdUIsYUFBYUUsR0FBRztnQkFDakRKLHFCQUFxQnpDLDhEQUFVQSxDQUFDbUQsU0FBUyxDQUFDQztvQkFDeEMsSUFBSUEsUUFBUUMsTUFBTSxJQUFJO3dCQUNwQjNCLFFBQVE7NEJBQUVrQixJQUFJRCxhQUFhRSxHQUFHOzRCQUFFLEdBQUdPLFFBQVFFLElBQUksRUFBRTt3QkFBQztvQkFDcEQsT0FBTzt3QkFDTCxnRUFBZ0U7d0JBQ2hFaEIsUUFBUWlCLEdBQUcsQ0FBQzt3QkFDWiw0Q0FBNEM7d0JBQzVDLE1BQU1DLFVBQVU7NEJBQ2RWLE9BQU9ILGFBQWFHLEtBQUs7NEJBQ3pCQyxVQUFVSixhQUFhSyxXQUFXLElBQUlMLGFBQWFHLEtBQUssQ0FBQ0csS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFOzRCQUN0RUMsTUFBTSxhQUFjSixLQUFLLENBQUNXLFdBQVcsR0FBR0MsUUFBUSxDQUFDLFdBQVksVUFBVTs0QkFDdkVDLFNBQVM7NEJBQ1RDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVzt3QkFDbkM7d0JBRUEsY0FBYzt3QkFDZDFELDBEQUFNQSxDQUFDK0MsU0FBU0ssU0FDYk8sSUFBSSxDQUFDOzRCQUNKekIsUUFBUWlCLEdBQUcsQ0FBQyx5Q0FBeUNDLFFBQVFWLEtBQUs7d0JBQ2xFLCtEQUErRDt3QkFDakUsR0FDQ2tCLEtBQUssQ0FBQ0MsQ0FBQUE7NEJBQ0wzQixRQUFRNEIsS0FBSyxDQUFDLCtCQUErQkQ7NEJBQzdDRSxNQUFNO3dCQUNSO3dCQUVGLGtCQUFrQjt3QkFDbEJ6QyxRQUFROzRCQUFFa0IsSUFBSUQsYUFBYUUsR0FBRzs0QkFBRSxHQUFHVyxPQUFPO3dCQUFDO29CQUM3QztvQkFDQXRCLFlBQVk7Z0JBQ2Q7WUFDRixPQUFPO2dCQUNMLHFCQUFxQjtnQkFDckJSLFFBQVE7Z0JBQ1JJLFFBQVEsRUFBRTtnQkFDVkksWUFBWTtZQUNkO1FBQ0Y7UUFFQSwyQ0FBMkM7UUFDM0MsT0FBTztZQUNMUTtZQUNBLElBQUlELG9CQUFvQjtnQkFDdEJBO1lBQ0Y7UUFDRjtJQUNGLEdBQUcsRUFBRTtJQUVMLE1BQU0sQ0FBQzJCLE9BQU9DLFNBQVMsR0FBR3hFLCtDQUFRQSxDQUFDLEVBQUUsR0FBRyxvQ0FBb0M7SUFFNUUsa0NBQWtDO0lBRWxDLG1EQUFtRDtJQUNuREQsZ0RBQVNBLENBQUM7UUFDUixxQ0FBcUM7UUFDckMsTUFBTTBFLGNBQWNyRSx5REFBS0EsQ0FBQ0gsOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRSxXQUFXVCx5REFBS0EsQ0FBQztRQUMxRCxNQUFNNEQsY0FBY3ZFLDhEQUFVQSxDQUFDc0UsYUFBYSxDQUFDRTtZQUMzQyxNQUFNQyxhQUFhRCxTQUFTRSxJQUFJLENBQUNDLEdBQUcsQ0FBQ3hFLENBQUFBLE1BQVE7b0JBQUV5QyxJQUFJekMsSUFBSXlDLEVBQUU7b0JBQUUsR0FBR3pDLElBQUltRCxJQUFJLEVBQUU7Z0JBQUM7WUFDekVtQixXQUFXRyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxDQUFDRCxFQUFFRSxNQUFNLEtBQUssU0FBUyxDQUFDLElBQUksTUFBTSxJQUFJbEIsS0FBS2dCLEVBQUVHLE9BQU8sSUFBSSxJQUFJbkIsS0FBS2lCLEVBQUVFLE9BQU87WUFDcEdwRCxVQUFVNkM7UUFDWjtRQUVBLG9DQUFvQztRQUNwQyxzRUFBc0U7UUFDdEUsTUFBTVEsYUFBYWhGLHlEQUFLQSxDQUFDSCw4REFBVUEsQ0FBQ3NCLHlDQUFFQSxFQUFFLFVBQVVULHlEQUFLQSxDQUFDO1FBQ3hELE1BQU11RSxhQUFhbEYsOERBQVVBLENBQUNpRixZQUFZLENBQUNUO1lBQ3pDLE1BQU1XLE9BQU9YLFNBQVNFLElBQUksQ0FBQ0MsR0FBRyxDQUFDeEUsQ0FBQUEsTUFBUTtvQkFBRXlDLElBQUl6QyxJQUFJeUMsRUFBRTtvQkFBRSxHQUFHekMsSUFBSW1ELElBQUksRUFBRTtnQkFBQztZQUNuRTZCLEtBQUtQLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNLElBQUlqQixLQUFLaUIsRUFBRU0sV0FBVyxJQUFJLElBQUl2QixLQUFLZ0IsRUFBRU8sV0FBVztZQUNwRXBELFNBQVNtRDtRQUNYLEdBQUcsQ0FBQ2pCO1lBQ0Y1QixRQUFRNEIsS0FBSyxDQUFDLDZCQUE2QkE7UUFDN0M7UUFFQSx3REFBd0Q7UUFDeEQsTUFBTW1CLGFBQWFwRix5REFBS0EsQ0FBQ0gsOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRSxVQUFVVCx5REFBS0EsQ0FBQztRQUN4RCxNQUFNMkUsYUFBYXRGLDhEQUFVQSxDQUFDcUYsWUFBWSxDQUFDYjtZQUN6QyxNQUFNVyxPQUFPWCxTQUFTRSxJQUFJLENBQUNDLEdBQUcsQ0FBQ3hFLENBQUFBLE1BQVE7b0JBQUV5QyxJQUFJekMsSUFBSXlDLEVBQUU7b0JBQUUsR0FBR3pDLElBQUltRCxJQUFJLEVBQUU7Z0JBQUM7WUFDbkUsbUNBQW1DO1lBQ25DNkIsS0FBS1AsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU0sQ0FBQ0EsRUFBRW5CLE9BQU8sSUFBSSxLQUFNa0IsQ0FBQUEsRUFBRWxCLE9BQU8sSUFBSTtZQUNyRFUsU0FBU2M7UUFDWDtRQUVBLE9BQU87WUFDTFo7WUFDQVc7WUFDQUk7UUFDRjtJQUdGLEdBQUcsRUFBRTtJQUVMLHFEQUFxRDtJQUNyRDFGLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDNkIsTUFBTTtZQUNUSyxRQUFRLEVBQUU7WUFDVjtRQUNGO1FBRUEsTUFBTXlELFlBQVl0Rix5REFBS0EsQ0FBQ0gsOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRSxTQUFTYix5REFBS0EsQ0FBQyxVQUFVLE1BQU1rQixLQUFLbUIsRUFBRSxHQUFHakMseURBQUtBLENBQUM7UUFDdEYsTUFBTTZFLFlBQVl4Riw4REFBVUEsQ0FBQ3VGLFdBQVcsQ0FBQ2Y7WUFDdkMseUVBQXlFO1lBQ3pFLE1BQU1pQixTQUFTakIsU0FBU0UsSUFBSSxDQUFDQyxHQUFHLENBQUN4RSxDQUFBQSxNQUFRO29CQUFFeUMsSUFBSXpDLElBQUl5QyxFQUFFO29CQUFFLEdBQUd6QyxJQUFJbUQsSUFBSSxFQUFFO2dCQUFDO1lBQ3JFbUMsT0FBT2IsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU0sSUFBSWpCLEtBQUtpQixFQUFFWSxRQUFRLElBQUksSUFBSTdCLEtBQUtnQixFQUFFYSxRQUFRO1lBQ2hFNUQsUUFBUTJEO1FBQ1Isa0VBQWtFO1FBQ3BFO1FBRUEsT0FBTyxJQUFNRDtJQUNmLEdBQUc7UUFBQy9ELGlCQUFBQSwyQkFBQUEsS0FBTW1CLEVBQUU7S0FBQyxHQUFHLG1FQUFtRTtJQUVuRixrQkFBa0I7SUFFbEIsTUFBTStDLFNBQVMsT0FBTzdDLE9BQU9DLFVBQVU2QztRQUNyQyxJQUFJO1lBQ0YsTUFBTUMsT0FBTyxNQUFNaEYsNkVBQThCQSxDQUFDUSwyQ0FBSUEsRUFBRXlCLE9BQU84QztZQUUvRCx1QkFBdUI7WUFDdkIsTUFBTXhGLDBEQUFNQSxDQUFDRCx1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFNBQVN5RSxLQUFLcEUsSUFBSSxDQUFDb0IsR0FBRyxHQUFHO2dCQUM1Q0M7Z0JBQ0FDLFVBQVVBLFlBQVlELE1BQU1HLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDekNDLE1BQU1KLE1BQU1XLFdBQVcsR0FBR0MsUUFBUSxDQUFDLFdBQVcsVUFBVTtnQkFDeERDLFNBQVM7Z0JBQ1RDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNuQztZQUVBLE9BQU87Z0JBQUVnQyxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPNUIsT0FBTztZQUNkLE9BQU87Z0JBQUU0QixTQUFTO2dCQUFPNUIsT0FBT0EsTUFBTTZCLE9BQU87WUFBQztRQUNoRDtJQUNGO0lBRUEsTUFBTUMsU0FBUyxPQUFPbEQsT0FBTzhDO1FBQzNCLElBQUk7WUFDRixNQUFNOUUseUVBQTBCQSxDQUFDTywyQ0FBSUEsRUFBRXlCLE9BQU84QztZQUM5QyxPQUFPO2dCQUFFRSxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPNUIsT0FBTztZQUNkLE9BQU87Z0JBQUU0QixTQUFTO2dCQUFPNUIsT0FBT0EsTUFBTTZCLE9BQU87WUFBQztRQUNoRDtJQUNGO0lBRUEsTUFBTUUsU0FBUztRQUNiLElBQUk7WUFDRixNQUFNbEYsc0RBQU9BLENBQUNNLDJDQUFJQTtZQUNsQixPQUFPO2dCQUFFeUUsU0FBUztZQUFLO1FBQ3pCLEVBQUUsT0FBTzVCLE9BQU87WUFDZDVCLFFBQVE0QixLQUFLLENBQUNBO1FBQ2hCO0lBQ0Y7SUFFQSxNQUFNZ0MsV0FBVyxPQUFPQyxTQUFTQyxXQUFXQztRQUMxQyxJQUFJLENBQUM1RSxNQUFNLE9BQU87WUFBRXFFLFNBQVM7WUFBTzVCLE9BQU87UUFBZ0I7UUFDM0QsSUFBSXpDLEtBQUtrQyxPQUFPLEdBQUcwQyxRQUFRLE9BQU87WUFBRVAsU0FBUztZQUFPNUIsT0FBTztRQUFxQjtRQUVoRixNQUFNb0MsUUFBUTNFLE9BQU80RSxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUU1RCxFQUFFLEtBQUt1RDtRQUN4QyxJQUFJLENBQUNHLFNBQVNBLE1BQU12QixNQUFNLEtBQUssUUFBUSxPQUFPO1lBQUVlLFNBQVM7WUFBTzVCLE9BQU87UUFBa0I7UUFFekYsTUFBTXVDLFVBQVVILE1BQU1JLFFBQVEsQ0FBQ0gsSUFBSSxDQUFDSSxDQUFBQSxJQUFLQSxFQUFFL0QsRUFBRSxLQUFLd0Q7UUFFbEQsSUFBSTtZQUNGLG9CQUFvQjtZQUNwQixNQUFNakQsVUFBVWhELHVEQUFHQSxDQUFDaUIseUNBQUVBLEVBQUUsU0FBU0ssS0FBS21CLEVBQUU7WUFDeEMsTUFBTXZDLDZEQUFTQSxDQUFDOEMsU0FBUztnQkFDdkJRLFNBQVNuRCw2REFBU0EsQ0FBQyxDQUFDNkY7WUFDdEI7WUFFQSxnQkFBZ0I7WUFDaEIsTUFBTXRHLDBEQUFNQSxDQUFDRCw4REFBVUEsQ0FBQ3NCLHlDQUFFQSxFQUFFLFNBQVM7Z0JBQ25Dd0YsUUFBUW5GLEtBQUttQixFQUFFO2dCQUNmRyxVQUFVdEIsS0FBS3NCLFFBQVE7Z0JBQ3ZCb0Q7Z0JBQ0FDO2dCQUNBUyxjQUFjSixRQUFRSyxLQUFLO2dCQUMzQkMsWUFBWVQsTUFBTVUsS0FBSztnQkFDdkJYLFFBQVFZLFdBQVdaO2dCQUNuQmEsTUFBTVQsUUFBUVMsSUFBSTtnQkFDbEJDLGlCQUFpQmQsU0FBU0ksUUFBUVMsSUFBSTtnQkFDdENuQyxRQUFRO2dCQUNSVyxVQUFVLElBQUk3QixPQUFPQyxXQUFXO1lBQ2xDO1lBRUEseUVBQXlFO1lBQ3pFLElBQUk7Z0JBQ0YsTUFBTXNELFdBQVdqSCx1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFVBQVUrRTtnQkFDbkMsTUFBTTlGLDZEQUFTQSxDQUFDK0csVUFBVTtvQkFDeEIsQ0FBQyxnQkFBMEIsT0FBVmhCLFdBQVksRUFBRTVGLDZEQUFTQSxDQUFDO29CQUN6QyxDQUFDLGlCQUEyQixPQUFWNEYsV0FBWSxFQUFFNUYsNkRBQVNBLENBQUM2RjtvQkFDMUMsbUJBQW1CN0YsNkRBQVNBLENBQUM7b0JBQzdCLG1CQUFtQkEsNkRBQVNBLENBQUM2RjtnQkFDL0I7WUFDRixFQUFFLE9BQU9nQixVQUFVO2dCQUNqQi9FLFFBQVFDLElBQUksQ0FBQywyREFBMkQ4RTtZQUMxRTtZQUVBLE9BQU87Z0JBQUV2QixTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPVSxHQUFHO1lBQ1YsT0FBTztnQkFBRVYsU0FBUztnQkFBTzVCLE9BQU9zQyxFQUFFVCxPQUFPO1lBQUM7UUFDNUM7SUFDRjtJQUVBLE1BQU11QixjQUFjLE9BQU9DO1FBQ3pCLElBQUk7WUFDRixNQUFNeEgsMERBQU1BLENBQUNELDhEQUFVQSxDQUFDc0IseUNBQUVBLEVBQUUsV0FBVztnQkFDckMyRCxRQUFRO2dCQUNSbkIsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNqQyxHQUFHeUQsU0FBUztZQUNkO1FBQ0YsRUFBRSxPQUFPZixHQUFHO1lBQ1ZsRSxRQUFRNEIsS0FBSyxDQUFDLHdCQUF3QnNDO1FBQ3hDO0lBQ0Y7SUFFQSxNQUFNZ0IsY0FBYyxPQUFPckI7UUFDekIsSUFBSTtZQUNGLHVFQUF1RTtZQUN2RSwwREFBMEQ7WUFDMUQsTUFBTWlCLFdBQVdqSCx1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFVBQVUrRTtZQUNuQyxNQUFNOUYsNkRBQVNBLENBQUMrRyxVQUFVO2dCQUFFckMsUUFBUTtZQUFVLElBQUksd0JBQXdCO1lBQzFFLDJGQUEyRjtZQUMzRixpREFBaUQ7WUFDakQsdUNBQXVDO1lBQ3ZDLGdEQUFnRDtZQUNoRCxvRUFBb0U7WUFDcEUseUJBQXlCO1lBQ3pCLE1BQU10RSw2REFBU0EsQ0FBQ04sdURBQUdBLENBQUNpQix5Q0FBRUEsRUFBRSxVQUFVK0U7UUFDcEMsRUFBRSxPQUFPSyxHQUFHO1lBQ1ZsRSxRQUFRNEIsS0FBSyxDQUFDc0M7UUFDaEI7SUFDRjtJQUVBLE1BQU1pQixlQUFlLE9BQU90QixTQUFTdUI7UUFDbkMsSUFBSTtZQUNGLDJCQUEyQjtZQUMzQixNQUFNckgsNkRBQVNBLENBQUNGLHVEQUFHQSxDQUFDaUIseUNBQUVBLEVBQUUsVUFBVStFLFVBQVU7Z0JBQzFDcEIsUUFBUTtnQkFDUjJDO1lBQ0Y7WUFFQSx1RkFBdUY7WUFDdkYsNEVBQTRFO1lBQzVFLCtFQUErRTtZQUMvRSxNQUFNQyxVQUFVN0gsOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRTtZQUMvQixNQUFNd0csSUFBSTNILHlEQUFLQSxDQUFDMEgsU0FBU3BILHlEQUFLQSxDQUFDLFdBQVcsTUFBTTRGLFVBQVU1Rix5REFBS0EsQ0FBQyxVQUFVLE1BQU07WUFFaEYsMkRBQTJEO1lBQzNELG9DQUFvQztZQUNwQyx5R0FBeUc7WUFDekcsa0RBQWtEO1lBRWxELGtFQUFrRTtZQUNsRSxpRUFBaUU7WUFFakUsaUVBQWlFO1lBQ2pFLE1BQU1zSCxnQkFBZ0IsTUFBTW5ILDJEQUFPQSxDQUFDa0g7WUFFcEMsTUFBTUUsZ0JBQWdCRCxjQUFjbkQsSUFBSSxDQUFDQyxHQUFHLENBQUMsT0FBT29EO2dCQUNsRCxNQUFNQyxNQUFNRCxPQUFPekUsSUFBSTtnQkFDdkIsTUFBTTJFLFFBQVFELElBQUk1QixTQUFTLEtBQUtzQjtnQkFFaEMsb0JBQW9CO2dCQUNwQixNQUFNckgsNkRBQVNBLENBQUNGLHVEQUFHQSxDQUFDaUIseUNBQUVBLEVBQUUsUUFBUTJHLE9BQU9uRixFQUFFLEdBQUc7b0JBQzFDbUMsUUFBUWtELFFBQVEsUUFBUTtnQkFDMUI7Z0JBRUEsbUJBQW1CO2dCQUNuQixJQUFJQSxPQUFPO29CQUNULE1BQU01SCw2REFBU0EsQ0FBQ0YsdURBQUdBLENBQUNpQix5Q0FBRUEsRUFBRSxTQUFTNEcsSUFBSXBCLE1BQU0sR0FBRzt3QkFDNUNqRCxTQUFTbkQsNkRBQVNBLENBQUN3SCxJQUFJYixlQUFlO29CQUN4QztnQkFDRjtZQUNGO1lBRUEsTUFBTWUsUUFBUUMsR0FBRyxDQUFDTDtRQUVwQixFQUFFLE9BQU90QixHQUFHO1lBQ1ZsRSxRQUFRNEIsS0FBSyxDQUFDLHlCQUF5QnNDO1FBQ3pDO0lBQ0Y7SUFFQSxNQUFNNEIsYUFBYSxPQUFPQztRQUN4QixJQUFJLENBQUM1RyxNQUFNLE9BQU87WUFBRXFFLFNBQVM7WUFBTzVCLE9BQU87UUFBZ0I7UUFFM0QsNEZBQTRGO1FBQzVGLE1BQU1vRSxRQUFRLElBQUl6RSxPQUFPMEUsWUFBWTtRQUNyQyxJQUFJQyxlQUFlO1FBRW5CLElBQUkvRyxLQUFLZ0gsY0FBYyxJQUFJaEgsS0FBS2dILGNBQWMsQ0FBQ0MsSUFBSSxLQUFLSixPQUFPO1lBQzdERSxlQUFlL0csS0FBS2dILGNBQWMsQ0FBQ0UsS0FBSztRQUMxQztRQUVBLElBQUlILGdCQUFnQixHQUFHO1lBQ3JCLE9BQU87Z0JBQUUxQyxTQUFTO2dCQUFPNUIsT0FBTztZQUFpRDtRQUNuRjtRQUVBLElBQUk7WUFDRixxQkFBcUI7WUFDckIsTUFBTW5FLDBEQUFNQSxDQUFDRCw4REFBVUEsQ0FBQ3NCLHlDQUFFQSxFQUFFLFVBQVU7Z0JBQ3BDd0YsUUFBUW5GLEtBQUttQixFQUFFO2dCQUNmRyxVQUFVdEIsS0FBS3NCLFFBQVE7Z0JBQ3ZCNkYsTUFBTVA7Z0JBQ05qRCxhQUFhLElBQUl2QixPQUFPQyxXQUFXO1lBQ3JDO1lBRUEsNkNBQTZDO1lBQzdDLHFEQUFxRDtZQUNyRCw4RUFBOEU7WUFDOUUsZ0VBQWdFO1lBRWhFLE1BQU0rRSxXQUFXTCxlQUFlO1lBRWhDLE1BQU1uSSw2REFBU0EsQ0FBQ0YsdURBQUdBLENBQUNpQix5Q0FBRUEsRUFBRSxTQUFTSyxLQUFLbUIsRUFBRSxHQUFHO2dCQUN6Q2UsU0FBU25ELDZEQUFTQSxDQUFDO2dCQUNuQmlJLGdCQUFnQjtvQkFDZEMsTUFBTUo7b0JBQ05LLE9BQU9FO2dCQUNUO1lBQ0Y7WUFFQSxPQUFPO2dCQUFFL0MsU0FBUztnQkFBTUMsU0FBUztZQUEwQjtRQUM3RCxFQUFFLE9BQU9TLEdBQUc7WUFDVixPQUFPO2dCQUFFVixTQUFTO2dCQUFPNUIsT0FBT3NDLEVBQUVULE9BQU87WUFBQztRQUM1QztJQUNGO0lBRUEsTUFBTStDLGFBQWEsT0FBT0M7UUFDeEIsSUFBSSxDQUFDdEgsUUFBUUEsS0FBS3lCLElBQUksS0FBSyxTQUFTLE9BQU87WUFBRTRDLFNBQVM7WUFBTzVCLE9BQU87UUFBZTtRQUNuRixJQUFJO1lBQ0YsTUFBTXpELDZEQUFTQSxDQUFDTix1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFNBQVMySDtZQUNqQyxPQUFPO2dCQUFFakQsU0FBUztZQUFLO1FBQ3pCLEVBQUUsT0FBT1UsR0FBRztZQUNWLE9BQU87Z0JBQUVWLFNBQVM7Z0JBQU81QixPQUFPc0MsRUFBRVQsT0FBTztZQUFDO1FBQzVDO0lBQ0Y7SUFFQSxNQUFNaUQsYUFBYSxPQUFPQztRQUN4QixJQUFJLENBQUN4SCxNQUFNLE9BQU87WUFBRXFFLFNBQVM7WUFBTzVCLE9BQU87UUFBZ0I7UUFFM0QsSUFBSTtZQUNGLElBQUlnRixjQUFjO1lBRWxCLGtDQUFrQztZQUNsQyxJQUFJRCxRQUFRbkcsS0FBSyxJQUFJekIsMkNBQUlBLENBQUM4SCxXQUFXLEVBQUU7Z0JBQ3JDLE1BQU1DLG1CQUFtQi9ILDJDQUFJQSxDQUFDOEgsV0FBVyxDQUFDckcsS0FBSztnQkFDL0MsSUFBSW1HLFFBQVFuRyxLQUFLLEtBQUtzRyxrQkFBa0I7b0JBQ3RDOUcsUUFBUWlCLEdBQUcsQ0FBQyx1Q0FBOEQwRixPQUF2Qkcsa0JBQWlCLFFBQW9CLE9BQWRILFFBQVFuRyxLQUFLO29CQUN2RixNQUFNN0IsMERBQVdBLENBQUNJLDJDQUFJQSxDQUFDOEgsV0FBVyxFQUFFRixRQUFRbkcsS0FBSztvQkFDakRvRyxjQUFjO2dCQUNoQjtZQUNGO1lBRUEsc0NBQXNDO1lBQ3RDLElBQUlELFFBQVFyRCxRQUFRLElBQUlxRCxRQUFRckQsUUFBUSxDQUFDeUQsTUFBTSxHQUFHLEdBQUc7Z0JBQ25ELElBQUloSSwyQ0FBSUEsQ0FBQzhILFdBQVcsRUFBRTtvQkFDcEIsTUFBTWpJLDZEQUFjQSxDQUFDRywyQ0FBSUEsQ0FBQzhILFdBQVcsRUFBRUYsUUFBUXJELFFBQVE7b0JBQ3ZEc0QsY0FBYztnQkFDaEI7WUFDRjtZQUVBLHlDQUF5QztZQUN6QyxNQUFNSSxtQkFBbUI7Z0JBQUUsR0FBR0wsT0FBTztZQUFDO1lBQ3RDLE9BQU9LLGlCQUFpQjFELFFBQVEsRUFBRSxpQ0FBaUM7WUFFbkUsTUFBTXZGLDZEQUFTQSxDQUFDRix1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFNBQVNLLEtBQUttQixFQUFFLEdBQUcwRztZQUUzQyw0REFBNEQ7WUFDNUQsSUFBSUosZUFBZTdILDJDQUFJQSxDQUFDOEgsV0FBVyxFQUFFO2dCQUNuQyxNQUFNOUgsMkNBQUlBLENBQUM4SCxXQUFXLENBQUNJLE1BQU07Z0JBQzdCLGtFQUFrRTtnQkFDbEU3SCxRQUFRVyxDQUFBQSxPQUFTO3dCQUFFLEdBQUdBLElBQUk7d0JBQUUsR0FBR2lILGdCQUFnQjtvQkFBQztZQUNsRDtZQUVBLE9BQU87Z0JBQUV4RCxTQUFTO2dCQUFNQyxTQUFTbUQsY0FBYywrQkFBK0I7WUFBa0I7UUFFbEcsRUFBRSxPQUFPMUMsR0FBRztZQUNWbEUsUUFBUTRCLEtBQUssQ0FBQyxpQkFBaUJzQztZQUMvQixJQUFJQSxFQUFFZ0QsSUFBSSxLQUFLLDhCQUE4QjtnQkFDM0MsT0FBTztvQkFBRTFELFNBQVM7b0JBQU81QixPQUFPO2dCQUF5RTtZQUMzRztZQUNBLE9BQU87Z0JBQUU0QixTQUFTO2dCQUFPNUIsT0FBT3NDLEVBQUVULE9BQU87WUFBQztRQUM1QztJQUNGO0lBRUEsTUFBTTBELGFBQWE7UUFDakIsSUFBSSxDQUFDaEksTUFBTTtRQUNYLElBQUk7WUFDRixNQUFNcEIsNkRBQVNBLENBQUNGLHVEQUFHQSxDQUFDaUIseUNBQUVBLEVBQUUsU0FBU0ssS0FBS21CLEVBQUUsR0FBRztnQkFBRU0sTUFBTTtZQUFPO1lBQzFELHlEQUF5RDtZQUN6RCxPQUFPO2dCQUFFNEMsU0FBUztZQUFLO1FBQ3pCLEVBQUUsT0FBT1UsR0FBRztZQUNWLE9BQU87Z0JBQUVWLFNBQVM7Z0JBQU81QixPQUFPc0MsRUFBRVQsT0FBTztZQUFDO1FBQzVDO0lBQ0Y7SUFFQSxNQUFNMkQsZ0JBQWdCO1FBQ3BCLElBQUksQ0FBQ2pJLE1BQU0sT0FBTztZQUFFcUUsU0FBUztRQUFNO1FBQ25DLElBQUk7WUFDRixNQUFNYyxTQUFTbkYsS0FBS21CLEVBQUU7WUFDdEIsTUFBTStHLFFBQVEvSSw4REFBVUEsQ0FBQ1EseUNBQUVBO1lBQzNCLElBQUl3SSxVQUFVO1lBRWQsNEJBQTRCO1lBQzVCLE1BQU1DLFFBQVE1Six5REFBS0EsQ0FBQ0gsOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRSxTQUFTYix5REFBS0EsQ0FBQyxVQUFVLE1BQU1xRztZQUNsRSxNQUFNa0QsV0FBVyxNQUFNcEosMkRBQU9BLENBQUNtSjtZQUMvQkMsU0FBU3BGLElBQUksQ0FBQ3FGLE9BQU8sQ0FBQzVKLENBQUFBO2dCQUNwQndKLE1BQU1LLE1BQU0sQ0FBQzdKLElBQUk4SixHQUFHO2dCQUNwQkw7WUFDRjtZQUVBLDZCQUE2QjtZQUM3QixNQUFNTSxTQUFTaksseURBQUtBLENBQUNILDhEQUFVQSxDQUFDc0IseUNBQUVBLEVBQUUsVUFBVWIseURBQUtBLENBQUMsVUFBVSxNQUFNcUc7WUFDcEUsTUFBTXVELFlBQVksTUFBTXpKLDJEQUFPQSxDQUFDd0o7WUFDaENDLFVBQVV6RixJQUFJLENBQUNxRixPQUFPLENBQUM1SixDQUFBQTtnQkFDckJ3SixNQUFNSyxNQUFNLENBQUM3SixJQUFJOEosR0FBRztnQkFDcEJMO1lBQ0Y7WUFFQSx5QkFBeUI7WUFDekIsTUFBTXpHLFVBQVVoRCx1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFNBQVN3RjtZQUNqQytDLE1BQU1LLE1BQU0sQ0FBQzdHO1lBQ2J5RztZQUVBLElBQUlBLFVBQVUsR0FBRztnQkFDZixNQUFNRCxNQUFNUyxNQUFNO1lBQ3BCO1lBRUEseUJBQXlCO1lBQ3pCLElBQUkvSSwyQ0FBSUEsQ0FBQzhILFdBQVcsRUFBRTtnQkFDcEIsTUFBTTlILDJDQUFJQSxDQUFDOEgsV0FBVyxDQUFDYSxNQUFNO1lBQy9CO1lBRUEsT0FBTztnQkFBRWxFLFNBQVM7WUFBSztRQUN6QixFQUFFLE9BQU9VLEdBQUc7WUFDVmxFLFFBQVE0QixLQUFLLENBQUMsaUJBQWlCc0M7WUFDL0IsSUFBSUEsRUFBRWdELElBQUksS0FBSyw4QkFBOEI7Z0JBQzNDLE9BQU87b0JBQUUxRCxTQUFTO29CQUFPNUIsT0FBTztnQkFBMEQ7WUFDNUY7WUFDQSxPQUFPO2dCQUFFNEIsU0FBUztnQkFBTzVCLE9BQU9zQyxFQUFFVCxPQUFPO1lBQUM7UUFDNUM7SUFDRjtJQUVBLE1BQU1zRSxhQUFhLE9BQU9DO1FBQ3hCLElBQUksQ0FBQzdJLFFBQVFBLEtBQUt5QixJQUFJLEtBQUssU0FBUyxPQUFPO1lBQUU0QyxTQUFTO1lBQU81QixPQUFPO1FBQWU7UUFDbkYsSUFBSTtZQUNGLE1BQU15RixRQUFRL0ksOERBQVVBLENBQUNRLHlDQUFFQTtZQUMzQixJQUFJd0ksVUFBVTtZQUVkLDRCQUE0QjtZQUM1QixNQUFNQyxRQUFRNUoseURBQUtBLENBQUNILDhEQUFVQSxDQUFDc0IseUNBQUVBLEVBQUUsU0FBU2IseURBQUtBLENBQUMsVUFBVSxNQUFNK0o7WUFDbEUsTUFBTVIsV0FBVyxNQUFNcEosMkRBQU9BLENBQUNtSjtZQUMvQkMsU0FBU3BGLElBQUksQ0FBQ3FGLE9BQU8sQ0FBQzVKLENBQUFBO2dCQUNwQndKLE1BQU1LLE1BQU0sQ0FBQzdKLElBQUk4SixHQUFHO2dCQUNwQkw7WUFDRjtZQUVBLDZCQUE2QjtZQUM3QixNQUFNTSxTQUFTaksseURBQUtBLENBQUNILDhEQUFVQSxDQUFDc0IseUNBQUVBLEVBQUUsVUFBVWIseURBQUtBLENBQUMsVUFBVSxNQUFNK0o7WUFDcEUsTUFBTUgsWUFBWSxNQUFNekosMkRBQU9BLENBQUN3SjtZQUNoQ0MsVUFBVXpGLElBQUksQ0FBQ3FGLE9BQU8sQ0FBQzVKLENBQUFBO2dCQUNyQndKLE1BQU1LLE1BQU0sQ0FBQzdKLElBQUk4SixHQUFHO2dCQUNwQkw7WUFDRjtZQUVBLHlCQUF5QjtZQUN6QixNQUFNekcsVUFBVWhELHVEQUFHQSxDQUFDaUIseUNBQUVBLEVBQUUsU0FBU2tKO1lBQ2pDWCxNQUFNSyxNQUFNLENBQUM3RztZQUNieUc7WUFFQSxJQUFJQSxVQUFVLEdBQUc7Z0JBQ2YsTUFBTUQsTUFBTVMsTUFBTTtZQUNwQjtZQUVBLE9BQU87Z0JBQUV0RSxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPVSxHQUFHO1lBQ1YsT0FBTztnQkFBRVYsU0FBUztnQkFBTzVCLE9BQU9zQyxFQUFFVCxPQUFPO1lBQUM7UUFDNUM7SUFDRjtJQUVBLE1BQU13RSxpQkFBaUI7UUFDckIsSUFBSSxDQUFDOUksUUFBUUEsS0FBS3lCLElBQUksS0FBSyxTQUFTLE9BQU87WUFBRTRDLFNBQVM7WUFBTzVCLE9BQU87UUFBZTtRQUNuRixJQUFJO1lBQ0Ysb0JBQW9CO1lBQ3BCLE1BQU00RixXQUFXLE1BQU1wSiwyREFBT0EsQ0FBQ1osOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRTtZQUM5QyxNQUFNb0osVUFBVVYsU0FBU3BGLElBQUksQ0FBQ0MsR0FBRyxDQUFDOEYsQ0FBQUEsSUFBS0EsRUFBRW5ILElBQUk7WUFFN0MscUJBQXFCO1lBQ3JCLE1BQU1vSCxXQUFXLENBQUMsR0FBRyxxRUFBcUU7WUFFMUYsS0FBSyxNQUFNMUMsT0FBT3dDLFFBQVM7Z0JBQ3pCLElBQUksQ0FBQ0UsUUFBUSxDQUFDMUMsSUFBSTdCLE9BQU8sQ0FBQyxFQUFFO29CQUMxQnVFLFFBQVEsQ0FBQzFDLElBQUk3QixPQUFPLENBQUMsR0FBRzt3QkFBRXdFLFFBQVEsQ0FBQzt3QkFBR0MsU0FBUyxDQUFDO3dCQUFHQyxXQUFXO3dCQUFHQyxXQUFXO29CQUFFO2dCQUNoRjtnQkFDQSxNQUFNQyxJQUFJTCxRQUFRLENBQUMxQyxJQUFJN0IsT0FBTyxDQUFDO2dCQUMvQjRFLEVBQUVGLFNBQVMsSUFBSTtnQkFDZkUsRUFBRUQsU0FBUyxJQUFLOUMsSUFBSTNCLE1BQU0sSUFBSTtnQkFDOUIwRSxFQUFFSixNQUFNLENBQUMzQyxJQUFJNUIsU0FBUyxDQUFDLEdBQUcsQ0FBQzJFLEVBQUVKLE1BQU0sQ0FBQzNDLElBQUk1QixTQUFTLENBQUMsSUFBSSxLQUFLO2dCQUMzRDJFLEVBQUVILE9BQU8sQ0FBQzVDLElBQUk1QixTQUFTLENBQUMsR0FBRyxDQUFDMkUsRUFBRUgsT0FBTyxDQUFDNUMsSUFBSTVCLFNBQVMsQ0FBQyxJQUFJLEtBQU00QixDQUFBQSxJQUFJM0IsTUFBTSxJQUFJO1lBQzlFO1lBRUEsbUJBQW1CO1lBQ25CLE1BQU0yRSxhQUFhLE1BQU10SywyREFBT0EsQ0FBQ1osOERBQVVBLENBQUNzQix5Q0FBRUEsRUFBRTtZQUNoRCxNQUFNNkosaUJBQWlCRCxXQUFXdEcsSUFBSSxDQUFDQyxHQUFHLENBQUMsT0FBT3ZCO2dCQUNoRCxNQUFNOEgsUUFBUVIsUUFBUSxDQUFDdEgsUUFBUVIsRUFBRSxDQUFDLElBQUk7b0JBQUUrSCxRQUFRLENBQUM7b0JBQUdDLFNBQVMsQ0FBQztvQkFBR0MsV0FBVztvQkFBR0MsV0FBVztnQkFBRTtnQkFDNUYsTUFBTXpLLDZEQUFTQSxDQUFDRix1REFBR0EsQ0FBQ2lCLHlDQUFFQSxFQUFFLFVBQVVnQyxRQUFRUixFQUFFLEdBQUc7b0JBQUVzSTtnQkFBTTtZQUN6RDtZQUVBLE1BQU1oRCxRQUFRQyxHQUFHLENBQUM4QztZQUNsQixPQUFPO2dCQUFFbkYsU0FBUztZQUFLO1FBQ3pCLEVBQUUsT0FBT1UsR0FBRztZQUNWbEUsUUFBUTRCLEtBQUssQ0FBQ3NDO1lBQ2QsT0FBTztnQkFBRVYsU0FBUztnQkFBTzVCLE9BQU9zQyxFQUFFVCxPQUFPO1lBQUM7UUFDNUM7SUFDRjtJQUVBLHFCQUNFLDhEQUFDekUsV0FBVzZKLFFBQVE7UUFBQ0MsT0FBTztZQUMxQjNKO1lBQU1rRTtZQUFRSztZQUFRQztZQUFRK0M7WUFBWVo7WUFBWVU7WUFBWVk7WUFBZVc7WUFBWVo7WUFBWWM7WUFDekc1STtZQUFRMkY7WUFBYUc7WUFBY0Q7WUFDbkMzRjtZQUFNcUU7WUFBVWpFO1lBQVVvSixZQUFZO1lBQU1qSDtZQUFPckM7UUFDckQ7a0JBQ0dQOzs7Ozs7QUFHUDtHQW5qQmdCRDtLQUFBQTtBQXFqQlQsU0FBUytKOztJQUNkLE9BQU8zTCxpREFBVUEsQ0FBQzJCO0FBQ3BCO0lBRmdCZ0siLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9zdG9yZS5qcz81MTE0Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cInVzZSBjbGllbnRcIjtcclxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7XHJcbiAgY29sbGVjdGlvbiwgYWRkRG9jLCBvblNuYXBzaG90LCBxdWVyeSwgb3JkZXJCeSxcclxuICBkb2MsIHNldERvYywgdXBkYXRlRG9jLCBnZXREb2MsIHdoZXJlLCBpbmNyZW1lbnQsIGRlbGV0ZURvYywgZ2V0RG9jcywgbGltaXQsIHdyaXRlQmF0Y2hcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcbiAgc2lnbk91dCwgb25BdXRoU3RhdGVDaGFuZ2VkLCB1cGRhdGVFbWFpbCwgdXBkYXRlUGFzc3dvcmQsIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsXHJcbn0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbmltcG9ydCB7IGRiLCBhdXRoIH0gZnJvbSAnLi9maXJlYmFzZSc7XHJcblxyXG5jb25zdCBBcHBDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEFwcFByb3ZpZGVyKHsgY2hpbGRyZW4gfSkge1xyXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtldmVudHMsIHNldEV2ZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2JldHMsIHNldEJldHNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpZGVhcywgc2V0SWRlYXNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpc0xvYWRlZCwgc2V0SXNMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBTYWZldHkgdGltZW91dDogSWYgRmlyZWJhc2UgYXV0aCBoYW5ncyBmb3IgPjFzLCBqdXN0IGxvYWQgdGhlIGFwcCAoYXMgc2lnbmVkIG91dCkgdG8gcHJldmVudCBiZWluZyBzdHVjay5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc2V0SXNMb2FkZWQocHJldiA9PiB7XHJcbiAgICAgICAgaWYgKCFwcmV2KSBjb25zb2xlLndhcm4oXCJGaXJlYmFzZSBhdXRoIHNsb3cgLSBmb3JjaW5nIGxvYWQgc3RhdGVcIik7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMTIwMCk7XHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIC0tLSAxLiBBdXRoICYgVXNlciBQcm9maWxlIExpc3RlbmVyIC0tLVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgdW5zdWJzY3JpYmVQcm9maWxlID0gbnVsbDtcclxuXHJcbiAgICAvLyBBdXRoIExpc3RlbmVyXHJcbiAgICBjb25zdCB1bnN1YnNjcmliZUF1dGggPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKGZpcmViYXNlVXNlcikgPT4ge1xyXG4gICAgICAvLyAxLiBDbGVhbiB1cCBwcmV2aW91cyBwcm9maWxlIGxpc3RlbmVyIGlmIGFueVxyXG4gICAgICBpZiAodW5zdWJzY3JpYmVQcm9maWxlKSB7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlKCk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZpcmViYXNlVXNlcikge1xyXG4gICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluIC0+IFNldCBiYXNpYyBhdXRoIHVzZXIgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBsb2dvdXQgbG9vcFxyXG4gICAgICAgIC8vIFdlIHdpbGwgZW5yaWNoIHRoaXMgd2l0aCBEQiBkYXRhIGluIGEgbW9tZW50XHJcbiAgICAgICAgc2V0VXNlcihwcmV2ID0+IHByZXYgfHwge1xyXG4gICAgICAgICAgaWQ6IGZpcmViYXNlVXNlci51aWQsXHJcbiAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgdXNlcm5hbWU6IGZpcmViYXNlVXNlci5kaXNwbGF5TmFtZSB8fCBmaXJlYmFzZVVzZXIuZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTGlzdGVuIHRvIEZpcmVzdG9yZSBQcm9maWxlXHJcbiAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgZmlyZWJhc2VVc2VyLnVpZCk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlID0gb25TbmFwc2hvdCh1c2VyUmVmLCAoZG9jU25hcCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5kb2NTbmFwLmRhdGEoKSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGRvZXMgbm90IGV4aXN0IChlLmcuIGZpcnN0IGxvZ2luIG9yIHByZXZpb3VzIGVycm9yKS5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gREVURUNURUQgTkVXIFVTRVIgKE5vIFByb2ZpbGUgRm91bmQpIC0gQ3JlYXRpbmcgUHJvZmlsZS4uLlwiKTtcclxuICAgICAgICAgICAgLy8gQXV0by1jcmVhdGUgdGhlIHVzZXIgcHJvZmlsZSBpbiBGaXJlc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgbmV3VXNlciA9IHtcclxuICAgICAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiBmaXJlYmFzZVVzZXIuZGlzcGxheU5hbWUgfHwgZmlyZWJhc2VVc2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXHJcbiAgICAgICAgICAgICAgcm9sZTogKGZpcmViYXNlVXNlci5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpKSA/ICdhZG1pbicgOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgYmFsYW5jZTogMTAwMCxcclxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV3JpdGUgdG8gREJcclxuICAgICAgICAgICAgc2V0RG9jKHVzZXJSZWYsIG5ld1VzZXIpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gU1VDQ0VTU0ZVTExZIENSRUFURUQgUFJPRklMRSBGT1I6XCIsIG5ld1VzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJXZWxjb21lISBZb3VyIHByb2ZpbGUgaGFzIGJlZW4gY3JlYXRlZCB3aXRoICQxMDAwLlwiKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIj4+PiBFUlJPUiBDUkVBVElORyBQUk9GSUxFOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJvciBjcmVhdGluZyBwcm9maWxlLiBDaGVjayBwZXJtaXNzaW9ucy5cIik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgbG9jYWwgc3RhdGVcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5uZXdVc2VyIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgb3V0XHJcbiAgICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgICBzZXRCZXRzKFtdKTtcclxuICAgICAgICBzZXRJc0xvYWRlZCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvbiB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdW5zdWJzY3JpYmVBdXRoKCk7XHJcbiAgICAgIGlmICh1bnN1YnNjcmliZVByb2ZpbGUpIHtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGUoW10pOyAvLyBMaXN0IG9mIGFsbCB1c2VycyBmb3IgbGVhZGVyYm9hcmRcclxuXHJcbiAgLy8gLi4uIChleGlzdGluZyB0aW1lb3V0IGNvZGUpIC4uLlxyXG5cclxuICAvLyAtLS0gMi4gRGF0YSBMaXN0ZW5lcnMgKEV2ZW50cywgSWRlYXMsIFVzZXJzKSAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGlzdGVuIHRvIEV2ZW50cyAoTGltaXQgNTAgYWN0aXZlKVxyXG4gICAgY29uc3QgZXZlbnRzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnZXZlbnRzJyksIGxpbWl0KDUwKSk7XHJcbiAgICBjb25zdCB1bnN1YkV2ZW50cyA9IG9uU25hcHNob3QoZXZlbnRzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudHNMaXN0ID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4gICAgICBldmVudHNMaXN0LnNvcnQoKGEsIGIpID0+IChhLnN0YXR1cyA9PT0gJ29wZW4nID8gLTEgOiAxKSB8fCBuZXcgRGF0ZShhLnN0YXJ0QXQpIC0gbmV3IERhdGUoYi5zdGFydEF0KSk7XHJcbiAgICAgIHNldEV2ZW50cyhldmVudHNMaXN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBJZGVhcyAoTGltaXQgNTAgcmVjZW50KVxyXG4gICAgLy8gUmVtb3ZlZCBvcmRlckJ5IHRvIGF2b2lkIG1pc3NpbmcgaW5kZXggaXNzdWVzLiBTb3J0aW5nIGNsaWVudC1zaWRlLlxyXG4gICAgY29uc3QgaWRlYXNRdWVyeSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJJZGVhcyA9IG9uU25hcHNob3QoaWRlYXNRdWVyeSwgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3QgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbiAgICAgIGxpc3Quc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5zdWJtaXR0ZWRBdCkgLSBuZXcgRGF0ZShhLnN1Ym1pdHRlZEF0KSk7XHJcbiAgICAgIHNldElkZWFzKGxpc3QpO1xyXG4gICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsaXN0ZW5pbmcgdG8gaWRlYXM6XCIsIGVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBVc2VycyAoR2xvYmFsIExpc3QgZm9yIExlYWRlcmJvYXJkICYgQWRtaW4pXHJcbiAgICBjb25zdCB1c2Vyc1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3VzZXJzJyksIGxpbWl0KDUwKSk7XHJcbiAgICBjb25zdCB1bnN1YlVzZXJzID0gb25TbmFwc2hvdCh1c2Vyc1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgY29uc3QgbGlzdCA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgLy8gQ2xpZW50LXNpZGUgc29ydCBieSBiYWxhbmNlIGRlc2NcclxuICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiAoYi5iYWxhbmNlIHx8IDApIC0gKGEuYmFsYW5jZSB8fCAwKSk7XHJcbiAgICAgIHNldFVzZXJzKGxpc3QpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdW5zdWJFdmVudHMoKTtcclxuICAgICAgdW5zdWJJZGVhcygpO1xyXG4gICAgICB1bnN1YlVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyAtLS0gMy4gQmV0cyBMaXN0ZW5lciAoT25seSBmb3IgbG9nZ2VkIGluIHVzZXIpIC0tLVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgc2V0QmV0cyhbXSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBiZXRzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlci5pZCksIGxpbWl0KDEwMCkpO1xyXG4gICAgY29uc3QgdW5zdWJCZXRzID0gb25TbmFwc2hvdChiZXRzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAvLyBXZSdsbCB0cnVzdCB0aGUgY2xpZW50IHNpZGUgc29ydGluZyBmb3Igbm93IG9yIGFkZCBvcmRlckJ5IGluZGV4IGxhdGVyXHJcbiAgICAgIGNvbnN0IG15QmV0cyA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgbXlCZXRzLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIucGxhY2VkQXQpIC0gbmV3IERhdGUoYS5wbGFjZWRBdCkpO1xyXG4gICAgICBzZXRCZXRzKG15QmV0cyk7XHJcbiAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiZXRfYmV0c19jYWNoZScsIEpTT04uc3RyaW5naWZ5KG15QmV0cykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHVuc3ViQmV0cygpO1xyXG4gIH0sIFt1c2VyPy5pZF0pOyAvLyBPbmx5IHJlLXJ1biBpZiB1c2VyIElEIGNoYW5nZXMgaXMgdHJpY2t5LCBiZXR0ZXIgc2FmZSBkZXBlbmRlbmN5XHJcblxyXG4gIC8vIC0tLSBBY3Rpb25zIC0tLVxyXG5cclxuICBjb25zdCBzaWdudXAgPSBhc3luYyAoZW1haWwsIHVzZXJuYW1lLCBwYXNzd29yZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIFVzZXIgRG9jdW1lbnRcclxuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXJzJywgcmVzcC51c2VyLnVpZCksIHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUgfHwgZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICByb2xlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpID8gJ2FkbWluJyA6ICd1c2VyJywgLy8gQmFzaWMgcm9sZSBhc3NpZ25tZW50XHJcbiAgICAgICAgYmFsYW5jZTogMTAwMCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNpZ25pbiA9IGFzeW5jIChlbWFpbCwgcGFzc3dvcmQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHNpZ25PdXQoYXV0aCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHBsYWNlQmV0ID0gYXN5bmMgKGV2ZW50SWQsIG91dGNvbWVJZCwgYW1vdW50KSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcbiAgICBpZiAodXNlci5iYWxhbmNlIDwgYW1vdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnN1ZmZpY2llbnQgZnVuZHMnIH07XHJcblxyXG4gICAgY29uc3QgZXZlbnQgPSBldmVudHMuZmluZChlID0+IGUuaWQgPT09IGV2ZW50SWQpO1xyXG4gICAgaWYgKCFldmVudCB8fCBldmVudC5zdGF0dXMgIT09ICdvcGVuJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRXZlbnQgaXMgbG9ja2VkJyB9O1xyXG5cclxuICAgIGNvbnN0IG91dGNvbWUgPSBldmVudC5vdXRjb21lcy5maW5kKG8gPT4gby5pZCA9PT0gb3V0Y29tZUlkKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBEZWR1Y3QgQmFsYW5jZVxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKTtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJSZWYsIHtcclxuICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoLWFtb3VudClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBDcmVhdGUgQmV0XHJcbiAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgb3V0Y29tZUlkLFxyXG4gICAgICAgIG91dGNvbWVMYWJlbDogb3V0Y29tZS5sYWJlbCxcclxuICAgICAgICBldmVudFRpdGxlOiBldmVudC50aXRsZSxcclxuICAgICAgICBhbW91bnQ6IHBhcnNlRmxvYXQoYW1vdW50KSxcclxuICAgICAgICBvZGRzOiBvdXRjb21lLm9kZHMsXHJcbiAgICAgICAgcG90ZW50aWFsUGF5b3V0OiBhbW91bnQgKiBvdXRjb21lLm9kZHMsXHJcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgcGxhY2VkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDMuIFVwZGF0ZSBFdmVudCBTdGF0cyAoQmVzdCBFZmZvcnQgLSBpZ25vcmUgcGVybWlzc2lvbiBlcnJvcnMgZm9yIG5vdylcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBldmVudFJlZiA9IGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpO1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwge1xyXG4gICAgICAgICAgW2BzdGF0cy5jb3VudHMuJHtvdXRjb21lSWR9YF06IGluY3JlbWVudCgxKSxcclxuICAgICAgICAgIFtgc3RhdHMuYW1vdW50cy4ke291dGNvbWVJZH1gXTogaW5jcmVtZW50KGFtb3VudCksXHJcbiAgICAgICAgICAnc3RhdHMudG90YWxCZXRzJzogaW5jcmVtZW50KDEpLFxyXG4gICAgICAgICAgJ3N0YXRzLnRvdGFsUG9vbCc6IGluY3JlbWVudChhbW91bnQpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKHN0YXRzRXJyKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IHVwZGF0ZSBldmVudCBzdGF0cyAobGlrZWx5IHBlcm1pc3Npb24gaXNzdWUpOlwiLCBzdGF0c0Vycik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBjcmVhdGVFdmVudCA9IGFzeW5jIChldmVudERhdGEpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnZXZlbnRzJyksIHtcclxuICAgICAgICBzdGF0dXM6ICdvcGVuJyxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAuLi5ldmVudERhdGFcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBldmVudFwiLCBlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVFdmVudCA9IGFzeW5jIChldmVudElkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBOb3RlOiBUaGlzIGRvZXMgTk9UIHJlZnVuZCBiZXRzIGF1dG9tYXRpY2FsbHkgaW4gdGhpcyBzaW1wbGUgdmVyc2lvblxyXG4gICAgICAvLyBZb3Ugd291bGQgbmVlZCBDbG91ZCBGdW5jdGlvbnMgZm9yIHJvYnVzdCBiYWNrZW5kIGxvZ2ljXHJcbiAgICAgIGNvbnN0IGV2ZW50UmVmID0gZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCk7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwgeyBzdGF0dXM6ICdkZWxldGVkJyB9KTsgLy8gU29mdCBkZWxldGUgaXMgc2FmZXI/XHJcbiAgICAgIC8vIEZvciBub3csIGxldCdzIGp1c3QgYWN0dWFsbHkgZGVsZXRlIGl0IGZvciBjbGVhbmxpbmVzcyBpbiB0aGUgVUkgYXMgcmVxdWVzdGVkIHByZXZpb3VzbHlcclxuICAgICAgLy8gYnV0IHVzdWFsbHkgb24gbG9jYWwgdmVyc2lvbiB3ZSBqdXN0IGZpbHRlcmVkLlxyXG4gICAgICAvLyBXYWl0LCBGaXJlc3RvcmUgZGVsZXRlRG9jIGlzIGJldHRlci5cclxuICAgICAgLy8gYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpKTsgXHJcbiAgICAgIC8vIExldCdzIHN0aWNrIHRvIHVwZGF0ZSB0byAnZGVsZXRlZCcgb3IganVzdCByZWx5IG9uIHRoZSBVSSBmaWx0ZXI/XHJcbiAgICAgIC8vIExldCdzIGFjdHVhbGx5IGRlbGV0ZS5cclxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCByZXNvbHZlRXZlbnQgPSBhc3luYyAoZXZlbnRJZCwgd2lubmVyT3V0Y29tZUlkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBNYXJrIEV2ZW50IGFzIFNldHRsZWRcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpLCB7XHJcbiAgICAgICAgc3RhdHVzOiAnc2V0dGxlZCcsXHJcbiAgICAgICAgd2lubmVyT3V0Y29tZUlkXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMi4gRmluZCBhbGwgcGVuZGluZyBiZXRzIGZvciB0aGlzIGV2ZW50IChUaGlzIGlzIGNsaWVudCBzaWRlIGhlYXZ5ISBpZGVhbGx5IGJhY2tlbmQpXHJcbiAgICAgIC8vIFNpbmNlIHdlIGFyZSBkb2luZyBhIGNsaWVudC1zaWRlIGFkbWluLCB3ZSBxdWVyeSBBTEwgYmV0cyBmb3IgdGhpcyBldmVudC5cclxuICAgICAgLy8gTk9URTogVGhpcyB1c3VhbGx5IHJlcXVpcmVzIGEgY29tcG9zaXRlIGluZGV4IG9uIEZpcmVzdG9yZTogZXZlbnRJZCArIHN0YXR1c1xyXG4gICAgICBjb25zdCBiZXRzUmVmID0gY29sbGVjdGlvbihkYiwgJ2JldHMnKTtcclxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGJldHNSZWYsIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnRJZCksIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAncGVuZGluZycpKTtcclxuXHJcbiAgICAgIC8vIFdlIGNhbid0IHVzZSBhd2FpdCBpbnNpZGUgbWFwIGVhc2lseSB3aXRob3V0IFByb21pc2UuYWxsXHJcbiAgICAgIC8vIEJ1dCB3ZSBuZWVkIHRvIGZldGNoIHRoZW0gZmlyc3QuIFxyXG4gICAgICAvLyBXZSBhY3R1YWxseSBjYW4ndCBlYXNpbHkgcXVlcnkgKmFsbCogYmV0cyBmcm9tIGNsaWVudCB1bmxlc3Mgd2UgYXJlIGFkbWluIGFuZCBzZWN1cml0eSBydWxlcyBhbGxvdyBpdC5cclxuICAgICAgLy8gQXNzdW1pbmcgQWRtaW4gaGFzIHBlcm1pc3Npb24gdG8gcmVhZCBhbGwgYmV0cy5cclxuXHJcbiAgICAgIC8vIFRoaXMgcGFydCBpcyB0cmlja3kgcHVyZWx5IGNsaWVudC1zaWRlIHdpdGhvdXQgQ2xvdWQgRnVuY3Rpb25zLlxyXG4gICAgICAvLyBJIHdpbGwgaW1wbGVtZW50IGEgXCJkdW1iXCIgbG9vcCBoZXJlLiBJdCB3b3JrcyBmb3Igc21hbGwgc2NhbGUuXHJcblxyXG4gICAgICAvLyBXZSBuZWVkIHRvIGZldGNoIHRoZSBzbmFwc2hvdHMgb25jZSwgd2UgZG9uJ3QgbmVlZCBhIGxpc3RlbmVyLlxyXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbiAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGFzeW5jIChiZXREb2MpID0+IHtcclxuICAgICAgICBjb25zdCBiZXQgPSBiZXREb2MuZGF0YSgpO1xyXG4gICAgICAgIGNvbnN0IGlzV2luID0gYmV0Lm91dGNvbWVJZCA9PT0gd2lubmVyT3V0Y29tZUlkO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgQmV0IFN0YXR1c1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdiZXRzJywgYmV0RG9jLmlkKSwge1xyXG4gICAgICAgICAgc3RhdHVzOiBpc1dpbiA/ICd3b24nIDogJ2xvc3QnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIElmIFdpbiwgUGF5IFVzZXJcclxuICAgICAgICBpZiAoaXNXaW4pIHtcclxuICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIGJldC51c2VySWQpLCB7XHJcbiAgICAgICAgICAgIGJhbGFuY2U6IGluY3JlbWVudChiZXQucG90ZW50aWFsUGF5b3V0KVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGJhdGNoUHJvbWlzZXMpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlc29sdmluZyBldmVudFwiLCBlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBzdWJtaXRJZGVhID0gYXN5bmMgKGlkZWFUZXh0KSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcblxyXG4gICAgLy8gQ2hlY2sgRGFpbHkgTGltaXQgKENsaWVudC1zaWRlIGNoZWNrIGJhc2VkIG9uIGxvY2FsIHVzZXIgZGF0YSwgaWRlYWxseSBiYWNrZW5kIGRvZXMgdGhpcylcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuICAgIGxldCBjdXJyZW50Q291bnQgPSAwO1xyXG5cclxuICAgIGlmICh1c2VyLnN1Ym1pc3Npb25EYXRhICYmIHVzZXIuc3VibWlzc2lvbkRhdGEuZGF0ZSA9PT0gdG9kYXkpIHtcclxuICAgICAgY3VycmVudENvdW50ID0gdXNlci5zdWJtaXNzaW9uRGF0YS5jb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudENvdW50ID49IDUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRGFpbHkgbGltaXQgcmVhY2hlZCAoNS81KS4gQ29tZSBiYWNrIHRvbW9ycm93IScgfTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBDcmVhdGUgSWRlYSBEb2NcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIHRleHQ6IGlkZWFUZXh0LFxyXG4gICAgICAgIHN1Ym1pdHRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBVcGRhdGUgVXNlciAoUmV3YXJkICsgU3VibWlzc2lvbiBDb3VudClcclxuICAgICAgLy8gSWYgZGF0ZSBkaWZmZXJlbnQsIHNpbXBsZSBzZXQuIElmIHNhbWUsIGluY3JlbWVudC5cclxuICAgICAgLy8gRmlyZXN0b3JlIHVwZGF0ZSBpcyB0cmlja3kgd2l0aCBuZXN0ZWQgb2JqZWN0cywgc28gd2Ugc2V0IHRoZSB3aG9sZSBvYmplY3QuXHJcbiAgICAgIC8vIFdlIGNhbGN1bGF0ZSBuZXcgY291bnQgbG9jYWxseSB0byBlbnN1cmUgc3luYyB3aXRoIHRoZSBjaGVjay5cclxuXHJcbiAgICAgIGNvbnN0IG5ld0NvdW50ID0gY3VycmVudENvdW50ICsgMTtcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCB7XHJcbiAgICAgICAgYmFsYW5jZTogaW5jcmVtZW50KDE1KSwgLy8gUmV3YXJkXHJcbiAgICAgICAgc3VibWlzc2lvbkRhdGE6IHtcclxuICAgICAgICAgIGRhdGU6IHRvZGF5LFxyXG4gICAgICAgICAgY291bnQ6IG5ld0NvdW50XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdJZGVhIHN1Ym1pdHRlZCEgKyQxNS4wMCcgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVJZGVhID0gYXN5bmMgKGlkZWFJZCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2lkZWFzJywgaWRlYUlkKSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVVc2VyID0gYXN5bmMgKHVwZGF0ZXMpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm90IGxvZ2dlZCBpbicgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgYXV0aFVwZGF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIDEuIFVwZGF0ZSBBdXRoIEVtYWlsIGlmIGNoYW5nZWRcclxuICAgICAgaWYgKHVwZGF0ZXMuZW1haWwgJiYgYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRBdXRoRW1haWwgPSBhdXRoLmN1cnJlbnRVc2VyLmVtYWlsO1xyXG4gICAgICAgIGlmICh1cGRhdGVzLmVtYWlsICE9PSBjdXJyZW50QXV0aEVtYWlsKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRGVidWc6IEF0dGVtcHRpbmcgZW1haWwgdXBkYXRlIGZyb20gJHtjdXJyZW50QXV0aEVtYWlsfSB0byAke3VwZGF0ZXMuZW1haWx9YCk7XHJcbiAgICAgICAgICBhd2FpdCB1cGRhdGVFbWFpbChhdXRoLmN1cnJlbnRVc2VyLCB1cGRhdGVzLmVtYWlsKTtcclxuICAgICAgICAgIGF1dGhVcGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDIuIFVwZGF0ZSBBdXRoIFBhc3N3b3JkIGlmIHByb3ZpZGVkXHJcbiAgICAgIGlmICh1cGRhdGVzLnBhc3N3b3JkICYmIHVwZGF0ZXMucGFzc3dvcmQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGlmIChhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICBhd2FpdCB1cGRhdGVQYXNzd29yZChhdXRoLmN1cnJlbnRVc2VyLCB1cGRhdGVzLnBhc3N3b3JkKTtcclxuICAgICAgICAgIGF1dGhVcGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDMuIFVwZGF0ZSBGaXJlc3RvcmUgKGV4Y2x1ZGUgcGFzc3dvcmQpXHJcbiAgICAgIGNvbnN0IGZpcmVzdG9yZVVwZGF0ZXMgPSB7IC4uLnVwZGF0ZXMgfTtcclxuICAgICAgZGVsZXRlIGZpcmVzdG9yZVVwZGF0ZXMucGFzc3dvcmQ7IC8vIERvbid0IHN0b3JlIHJhdyBwYXNzd29yZCBpbiBEQlxyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ3VzZXJzJywgdXNlci5pZCksIGZpcmVzdG9yZVVwZGF0ZXMpO1xyXG5cclxuICAgICAgLy8gNC4gRm9yY2UgcmVmcmVzaCB0byBlbnN1cmUgbG9jYWwgYXV0aCBzdGF0ZSBtYXRjaGVzIGNsb3VkXHJcbiAgICAgIGlmIChhdXRoVXBkYXRlZCAmJiBhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgYXdhaXQgYXV0aC5jdXJyZW50VXNlci5yZWxvYWQoKTtcclxuICAgICAgICAvLyBNYW51YWxseSB1cGRhdGUgbG9jYWwgdXNlciBzdGF0ZSB0byByZWZsZWN0IGNoYW5nZXMgaW1tZWRpYXRlbHlcclxuICAgICAgICBzZXRVc2VyKHByZXYgPT4gKHsgLi4ucHJldiwgLi4uZmlyZXN0b3JlVXBkYXRlcyB9KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGF1dGhVcGRhdGVkID8gJ0FjY291bnQgJiBQcm9maWxlIHVwZGF0ZWQhJyA6ICdQcm9maWxlIHVwZGF0ZWQnIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiVXBkYXRlIEVycm9yOlwiLCBlKTtcclxuICAgICAgaWYgKGUuY29kZSA9PT0gJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJykge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJDUklUSUNBTDogWW91IG11c3QgcmUtbG9naW4gdG8gY2hhbmdlIHNlbnNpdGl2ZSBpbmZvIChFbWFpbC9QYXNzd29yZCkuXCIgfTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZGVtb3RlU2VsZiA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ3VzZXJzJywgdXNlci5pZCksIHsgcm9sZTogJ3VzZXInIH0pO1xyXG4gICAgICAvLyBzZXRVc2VyKHsuLi51c2VyLCByb2xlOiAndXNlcid9KTsgLy8gT3B0aW1pc3RpYyB1cGRhdGVcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUFjY291bnQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyLmlkO1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgb3BDb3VudCA9IDA7XHJcblxyXG4gICAgICAvLyAxLiBEZWxldGUgYWxsIHVzZXIncyBiZXRzXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpO1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIERlbGV0ZSBhbGwgdXNlcidzIGlkZWFzXHJcbiAgICAgIGNvbnN0IGlkZWFzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IGlkZWFzU25hcCA9IGF3YWl0IGdldERvY3MoaWRlYXNRKTtcclxuICAgICAgaWRlYXNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGJhdGNoLmRlbGV0ZShkb2MucmVmKTtcclxuICAgICAgICBvcENvdW50Kys7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMy4gRGVsZXRlIFVzZXIgUHJvZmlsZVxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQpO1xyXG4gICAgICBiYXRjaC5kZWxldGUodXNlclJlZik7XHJcbiAgICAgIG9wQ291bnQrKztcclxuXHJcbiAgICAgIGlmIChvcENvdW50ID4gMCkge1xyXG4gICAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyA0LiBEZWxldGUgQXV0aCBBY2NvdW50XHJcbiAgICAgIGlmIChhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgYXdhaXQgYXV0aC5jdXJyZW50VXNlci5kZWxldGUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRGVsZXRlIEVycm9yOlwiLCBlKTtcclxuICAgICAgaWYgKGUuY29kZSA9PT0gJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJykge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJQbGVhc2UgbG9nIG91dCBhbmQgbG9nIGluIGFnYWluIHRvIGRlbGV0ZSB5b3VyIGFjY291bnQuXCIgfTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAodGFyZ2V0VXNlcklkKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgb3BDb3VudCA9IDA7XHJcblxyXG4gICAgICAvLyAxLiBEZWxldGUgYWxsIHVzZXIncyBiZXRzXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHRhcmdldFVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpO1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIERlbGV0ZSBhbGwgdXNlcidzIGlkZWFzXHJcbiAgICAgIGNvbnN0IGlkZWFzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IGlkZWFzU25hcCA9IGF3YWl0IGdldERvY3MoaWRlYXNRKTtcclxuICAgICAgaWRlYXNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGJhdGNoLmRlbGV0ZShkb2MucmVmKTtcclxuICAgICAgICBvcENvdW50Kys7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMy4gRGVsZXRlIFVzZXIgUHJvZmlsZVxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB0YXJnZXRVc2VySWQpO1xyXG4gICAgICBiYXRjaC5kZWxldGUodXNlclJlZik7XHJcbiAgICAgIG9wQ291bnQrKztcclxuXHJcbiAgICAgIGlmIChvcENvdW50ID4gMCkge1xyXG4gICAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc3luY0V2ZW50U3RhdHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBGZXRjaCBhbGwgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2JldHMnKSk7XHJcbiAgICAgIGNvbnN0IGFsbEJldHMgPSBiZXRzU25hcC5kb2NzLm1hcChkID0+IGQuZGF0YSgpKTtcclxuXHJcbiAgICAgIC8vIDIuIEFnZ3JlZ2F0ZSBTdGF0c1xyXG4gICAgICBjb25zdCBzdGF0c01hcCA9IHt9OyAvLyBldmVudElkIC0+IHsgY291bnRzOiB7fSwgYW1vdW50czoge30sIHRvdGFsQmV0czogMCwgdG90YWxQb29sOiAwIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3QgYmV0IG9mIGFsbEJldHMpIHtcclxuICAgICAgICBpZiAoIXN0YXRzTWFwW2JldC5ldmVudElkXSkge1xyXG4gICAgICAgICAgc3RhdHNNYXBbYmV0LmV2ZW50SWRdID0geyBjb3VudHM6IHt9LCBhbW91bnRzOiB7fSwgdG90YWxCZXRzOiAwLCB0b3RhbFBvb2w6IDAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcyA9IHN0YXRzTWFwW2JldC5ldmVudElkXTtcclxuICAgICAgICBzLnRvdGFsQmV0cyArPSAxO1xyXG4gICAgICAgIHMudG90YWxQb29sICs9IChiZXQuYW1vdW50IHx8IDApO1xyXG4gICAgICAgIHMuY291bnRzW2JldC5vdXRjb21lSWRdID0gKHMuY291bnRzW2JldC5vdXRjb21lSWRdIHx8IDApICsgMTtcclxuICAgICAgICBzLmFtb3VudHNbYmV0Lm91dGNvbWVJZF0gPSAocy5hbW91bnRzW2JldC5vdXRjb21lSWRdIHx8IDApICsgKGJldC5hbW91bnQgfHwgMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDMuIFVwZGF0ZSBFdmVudHNcclxuICAgICAgY29uc3QgZXZlbnRzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpKTtcclxuICAgICAgY29uc3QgdXBkYXRlUHJvbWlzZXMgPSBldmVudHNTbmFwLmRvY3MubWFwKGFzeW5jIChkb2NTbmFwKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBzdGF0c01hcFtkb2NTbmFwLmlkXSB8fCB7IGNvdW50czoge30sIGFtb3VudHM6IHt9LCB0b3RhbEJldHM6IDAsIHRvdGFsUG9vbDogMCB9O1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBkb2NTbmFwLmlkKSwgeyBzdGF0cyB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVQcm9taXNlcyk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEFwcENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tcclxuICAgICAgdXNlciwgc2lnbnVwLCBzaWduaW4sIGxvZ291dCwgdXBkYXRlVXNlciwgc3VibWl0SWRlYSwgZGVsZXRlSWRlYSwgZGVsZXRlQWNjb3VudCwgZGVsZXRlVXNlciwgZGVtb3RlU2VsZiwgc3luY0V2ZW50U3RhdHMsXHJcbiAgICAgIGV2ZW50cywgY3JlYXRlRXZlbnQsIHJlc29sdmVFdmVudCwgZGVsZXRlRXZlbnQsXHJcbiAgICAgIGJldHMsIHBsYWNlQmV0LCBpc0xvYWRlZCwgaXNGaXJlYmFzZTogdHJ1ZSwgdXNlcnMsIGlkZWFzXHJcbiAgICB9fT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9BcHBDb250ZXh0LlByb3ZpZGVyPlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VBcHAoKSB7XHJcbiAgcmV0dXJuIHVzZUNvbnRleHQoQXBwQ29udGV4dCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJvblNuYXBzaG90IiwicXVlcnkiLCJvcmRlckJ5IiwiZG9jIiwic2V0RG9jIiwidXBkYXRlRG9jIiwiZ2V0RG9jIiwid2hlcmUiLCJpbmNyZW1lbnQiLCJkZWxldGVEb2MiLCJnZXREb2NzIiwibGltaXQiLCJ3cml0ZUJhdGNoIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduT3V0Iiwib25BdXRoU3RhdGVDaGFuZ2VkIiwidXBkYXRlRW1haWwiLCJ1cGRhdGVQYXNzd29yZCIsInZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsIiwiZGIiLCJhdXRoIiwiQXBwQ29udGV4dCIsIkFwcFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwic2V0VXNlciIsImV2ZW50cyIsInNldEV2ZW50cyIsImJldHMiLCJzZXRCZXRzIiwiaWRlYXMiLCJzZXRJZGVhcyIsImlzTG9hZGVkIiwic2V0SXNMb2FkZWQiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJwcmV2IiwiY29uc29sZSIsIndhcm4iLCJjbGVhclRpbWVvdXQiLCJ1bnN1YnNjcmliZVByb2ZpbGUiLCJ1bnN1YnNjcmliZUF1dGgiLCJmaXJlYmFzZVVzZXIiLCJpZCIsInVpZCIsImVtYWlsIiwidXNlcm5hbWUiLCJkaXNwbGF5TmFtZSIsInNwbGl0Iiwicm9sZSIsInVzZXJSZWYiLCJkb2NTbmFwIiwiZXhpc3RzIiwiZGF0YSIsImxvZyIsIm5ld1VzZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYmFsYW5jZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRoZW4iLCJjYXRjaCIsImVyciIsImVycm9yIiwiYWxlcnQiLCJ1c2VycyIsInNldFVzZXJzIiwiZXZlbnRzUXVlcnkiLCJ1bnN1YkV2ZW50cyIsInNuYXBzaG90IiwiZXZlbnRzTGlzdCIsImRvY3MiLCJtYXAiLCJzb3J0IiwiYSIsImIiLCJzdGF0dXMiLCJzdGFydEF0IiwiaWRlYXNRdWVyeSIsInVuc3ViSWRlYXMiLCJsaXN0Iiwic3VibWl0dGVkQXQiLCJ1c2Vyc1F1ZXJ5IiwidW5zdWJVc2VycyIsImJldHNRdWVyeSIsInVuc3ViQmV0cyIsIm15QmV0cyIsInBsYWNlZEF0Iiwic2lnbnVwIiwicGFzc3dvcmQiLCJyZXNwIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzaWduaW4iLCJsb2dvdXQiLCJwbGFjZUJldCIsImV2ZW50SWQiLCJvdXRjb21lSWQiLCJhbW91bnQiLCJldmVudCIsImZpbmQiLCJlIiwib3V0Y29tZSIsIm91dGNvbWVzIiwibyIsInVzZXJJZCIsIm91dGNvbWVMYWJlbCIsImxhYmVsIiwiZXZlbnRUaXRsZSIsInRpdGxlIiwicGFyc2VGbG9hdCIsIm9kZHMiLCJwb3RlbnRpYWxQYXlvdXQiLCJldmVudFJlZiIsInN0YXRzRXJyIiwiY3JlYXRlRXZlbnQiLCJldmVudERhdGEiLCJkZWxldGVFdmVudCIsInJlc29sdmVFdmVudCIsIndpbm5lck91dGNvbWVJZCIsImJldHNSZWYiLCJxIiwicXVlcnlTbmFwc2hvdCIsImJhdGNoUHJvbWlzZXMiLCJiZXREb2MiLCJiZXQiLCJpc1dpbiIsIlByb21pc2UiLCJhbGwiLCJzdWJtaXRJZGVhIiwiaWRlYVRleHQiLCJ0b2RheSIsInRvRGF0ZVN0cmluZyIsImN1cnJlbnRDb3VudCIsInN1Ym1pc3Npb25EYXRhIiwiZGF0ZSIsImNvdW50IiwidGV4dCIsIm5ld0NvdW50IiwiZGVsZXRlSWRlYSIsImlkZWFJZCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwiYXV0aFVwZGF0ZWQiLCJjdXJyZW50VXNlciIsImN1cnJlbnRBdXRoRW1haWwiLCJsZW5ndGgiLCJmaXJlc3RvcmVVcGRhdGVzIiwicmVsb2FkIiwiY29kZSIsImRlbW90ZVNlbGYiLCJkZWxldGVBY2NvdW50IiwiYmF0Y2giLCJvcENvdW50IiwiYmV0c1EiLCJiZXRzU25hcCIsImZvckVhY2giLCJkZWxldGUiLCJyZWYiLCJpZGVhc1EiLCJpZGVhc1NuYXAiLCJjb21taXQiLCJkZWxldGVVc2VyIiwidGFyZ2V0VXNlcklkIiwic3luY0V2ZW50U3RhdHMiLCJhbGxCZXRzIiwiZCIsInN0YXRzTWFwIiwiY291bnRzIiwiYW1vdW50cyIsInRvdGFsQmV0cyIsInRvdGFsUG9vbCIsInMiLCJldmVudHNTbmFwIiwidXBkYXRlUHJvbWlzZXMiLCJzdGF0cyIsIlByb3ZpZGVyIiwidmFsdWUiLCJpc0ZpcmViYXNlIiwidXNlQXBwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/store.js\n"));

/***/ })

});