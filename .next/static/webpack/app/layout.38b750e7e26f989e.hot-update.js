"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./src/lib/store.js":
/*!**************************!*\
  !*** ./src/lib/store.js ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppProvider: function() { return /* binding */ AppProvider; },\n/* harmony export */   useApp: function() { return /* binding */ useApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ AppProvider,useApp auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\nconst AppContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\nfunction AppProvider(param) {\n    let { children } = param;\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bets, setBets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [ideas, setIdeas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Safety timeout: If Firebase auth hangs for >1s, just load the app (as signed out) to prevent being stuck.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setIsLoaded((prev)=>{\n                if (!prev) console.warn(\"Firebase auth slow - forcing load state\");\n                return true;\n            });\n        }, 1200);\n        return ()=>clearTimeout(timer);\n    }, []);\n    // --- 1. Auth & User Profile Listener ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let unsubscribeProfile = null;\n        // Auth Listener\n        const unsubscribeAuth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, (firebaseUser)=>{\n            // 1. Clean up previous profile listener if any\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n                unsubscribeProfile = null;\n            }\n            if (firebaseUser) {\n                // User is signed in -> Set basic auth user immediately to prevent logout loop\n                // We will enrich this with DB data in a moment\n                setUser((prev)=>prev || {\n                        id: firebaseUser.uid,\n                        email: firebaseUser.email,\n                        username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                        role: \"user\"\n                    });\n                // Listen to Firestore Profile\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", firebaseUser.uid);\n                unsubscribeProfile = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(userRef, (docSnap)=>{\n                    if (docSnap.exists()) {\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...docSnap.data()\n                        });\n                    } else {\n                        // Document does not exist (e.g. first login or previous error).\n                        console.log(\">>> DETECTED NEW USER (No Profile Found) - Creating Profile...\");\n                        // Auto-create the user profile in Firestore\n                        const newUser = {\n                            email: firebaseUser.email,\n                            username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                            role: firebaseUser.email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                            balance: 1000,\n                            createdAt: new Date().toISOString()\n                        };\n                        // Write to DB\n                        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, newUser).then(()=>{\n                            console.log(\">>> SUCCESSFULLY CREATED PROFILE FOR:\", newUser.email);\n                        // alert(\"Welcome! Your profile has been created with $1000.\");\n                        }).catch((err)=>{\n                            console.error(\">>> ERROR CREATING PROFILE:\", err);\n                            alert(\"Error creating profile. Check permissions.\");\n                        });\n                        // Set local state\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...newUser\n                        });\n                    }\n                    setIsLoaded(true);\n                });\n            } else {\n                // User is signed out\n                setUser(null);\n                setBets([]);\n                setIsLoaded(true);\n            }\n        });\n        // Cleanup function when component unmounts\n        return ()=>{\n            unsubscribeAuth();\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n            }\n        };\n    }, []);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // List of all users for leaderboard\n    const [systemAnnouncement, setSystemAnnouncement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // ... (existing timeout code) ...\n    // --- 2. Data Listeners (Events, Ideas, Users, Announcement) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Listen to System Announcement\n        const announcementRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"system\", \"announcement\");\n        const unsubAnnouncement = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(announcementRef, (docSnap)=>{\n            if (docSnap.exists()) {\n                setSystemAnnouncement(docSnap.data());\n            } else {\n                setSystemAnnouncement(null);\n            }\n        });\n        // Listen to Events (Limit 50 active)\n        const eventsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubEvents = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(eventsQuery, (snapshot)=>{\n            const eventsList = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            eventsList.sort((a, b)=>{\n                // 1. Sort by manual order if exists (ascending: low numbers first)\n                const orderA = a.order !== undefined ? a.order : 9999;\n                const orderB = b.order !== undefined ? b.order : 9999;\n                if (orderA !== orderB) return orderA - orderB;\n                // 2. Open events first\n                if (a.status === \"open\" && b.status !== \"open\") return -1;\n                if (a.status !== \"open\" && b.status === \"open\") return 1;\n                // 3. Then sort by startAt date (ascending: earliest date first)\n                return new Date(a.startAt) - new Date(b.startAt);\n            });\n            setEvents(eventsList);\n        });\n        // Listen to Ideas (Limit 50 recent)\n        // Removed orderBy to avoid missing index issues. Sorting client-side.\n        const ideasQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubIdeas = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(ideasQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            list.sort((a, b)=>new Date(b.submittedAt) - new Date(a.submittedAt));\n            setIdeas(list);\n        }, (error)=>{\n            console.error(\"Error listening to ideas:\", error);\n        });\n        // Listen to Users (Global List for Leaderboard & Admin)\n        const usersQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubUsers = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(usersQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Client-side sort by balance desc\n            list.sort((a, b)=>(b.balance || 0) - (a.balance || 0));\n            setUsers(list);\n        });\n        return ()=>{\n            unsubEvents();\n            unsubIdeas();\n            unsubUsers();\n        };\n    }, []);\n    // --- 3. Bets Listener (Only for logged in user) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!user) {\n            setBets([]);\n            return;\n        }\n        const betsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(100));\n        const unsubBets = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(betsQuery, (snapshot)=>{\n            // We'll trust the client side sorting for now or add orderBy index later\n            const myBets = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            myBets.sort((a, b)=>new Date(b.placedAt) - new Date(a.placedAt));\n            setBets(myBets);\n        // localStorage.setItem('bet_bets_cache', JSON.stringify(myBets));\n        });\n        return ()=>unsubBets();\n    }, [\n        user === null || user === void 0 ? void 0 : user.id\n    ]); // Only re-run if user ID changes is tricky, better safe dependency\n    // --- Actions ---\n    const signup = async (email, username, password)=>{\n        try {\n            const resp = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.createUserWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            // Create User Document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", resp.user.uid), {\n                email,\n                username: username || email.split(\"@\")[0],\n                role: email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                balance: 1000,\n                createdAt: new Date().toISOString()\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const signin = async (emailOrUsername, password)=>{\n        try {\n            let email = emailOrUsername.trim();\n            // If it looks like an email, just try it directly\n            if (email.includes(\"@\")) {\n                try {\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n                    return {\n                        success: true\n                    };\n                } catch (e) {\n                    console.error(\"Email login failed\", e);\n                    return {\n                        success: false,\n                        error: e.message\n                    };\n                }\n            }\n            // Username lookup logic\n            const usernameInput = email;\n            const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\");\n            let candidateEmails = new Set();\n            // Helper to fetch and add emails (No LIMIT to ensure we find the right one)\n            const addCandidates = async (param, val)=>{\n                try {\n                    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(col, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(param, \"==\", val)); // Removed limit\n                    const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                    snap.forEach((doc)=>{\n                        const data = doc.data();\n                        if (data.email) candidateEmails.add(data.email);\n                    });\n                } catch (err) {\n                    console.error(\"Query failed for\", val, err);\n                }\n            };\n            // 1. Exact Match\n            await addCandidates(\"username\", usernameInput);\n            // 2. Lowercase\n            await addCandidates(\"username\", usernameInput.toLowerCase());\n            // 3. Capitalized (Try standard First Capital)\n            const capitalized = usernameInput.charAt(0).toUpperCase() + usernameInput.slice(1).toLowerCase();\n            await addCandidates(\"username\", capitalized);\n            // 4. UPPERCASE\n            await addCandidates(\"username\", usernameInput.toUpperCase());\n            if (candidateEmails.size === 0) {\n                return {\n                    success: false,\n                    error: \"Username '\".concat(usernameInput, \"' does not exist.\")\n                };\n            }\n            // Try each email\n            let tried = [];\n            for (let candidateEmail of candidateEmails){\n                if (typeof candidateEmail !== \"string\") continue;\n                candidateEmail = candidateEmail.trim();\n                try {\n                    // Attempt 1: Standard\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, candidateEmail, password);\n                    return {\n                        success: true\n                    };\n                } catch (error) {\n                    // Attempt 2: Trimmed Password\n                    if (password.trim() !== password) {\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, candidateEmail, password.trim());\n                            return {\n                                success: true\n                            };\n                        } catch (e2) {}\n                    }\n                    // Attempt 3: Email with all whitespace removed (just in case)\n                    const emailNoWhitespace = candidateEmail.replace(/\\s/g, \"\");\n                    if (emailNoWhitespace !== candidateEmail) {\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, emailNoWhitespace, password);\n                            return {\n                                success: true\n                            };\n                        } catch (e3) {}\n                    }\n                    tried.push(candidateEmail);\n                    if (error.code === \"auth/invalid-credential\" || error.code === \"auth/wrong-password\") {\n                        continue;\n                    }\n                    // Return technical error\n                    return {\n                        success: false,\n                        error: \"System Error (\".concat(error.code, \")\")\n                    };\n                }\n            }\n            // If loop finishes, none worked.\n            // Return the email found so the UI can switch to it.\n            const firstEmail = tried[0];\n            return {\n                success: false,\n                suggestedEmail: firstEmail,\n                error: \"Password incorrect.\"\n            };\n        } catch (error) {\n            console.error(error);\n            return {\n                success: false,\n                error: \"System Error: \" + error.message\n            };\n        }\n    };\n    const logout = async ()=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n    const placeBet = async (eventId, outcomeId, amount)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        if (user.balance < amount) return {\n            success: false,\n            error: \"Insufficient funds\"\n        };\n        const event = events.find((e)=>e.id === eventId);\n        if (!event || event.status !== \"open\") return {\n            success: false,\n            error: \"Event is locked\"\n        };\n        // Check for existing bets on OTHER sides\n        const qExisting = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n        const snapExisting = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qExisting);\n        const otherSideBet = snapExisting.docs.find((d)=>d.data().outcomeId !== outcomeId);\n        if (otherSideBet) {\n            return {\n                success: false,\n                error: \"Loyalty check! You already bet on the other side. No switching.\"\n            };\n        }\n        const outcome = event.outcomes.find((o)=>o.id === outcomeId);\n        try {\n            // 1. Deduct Balance & Add to Invested\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id);\n            // Streak Logic\n            const today = new Date();\n            const todayStr = today.toDateString();\n            const yesterday = new Date();\n            yesterday.setDate(today.getDate() - 1);\n            const yesterdayStr = yesterday.toDateString();\n            let newStreak = user.currentStreak || 0;\n            const lastDate = user.lastBetDate || \"\"; // Assuming stored as toDateString()\n            // Only update logic if we haven't already processed a streak for today\n            // (Or if the user had 0 streak and just started today)\n            if (lastDate !== todayStr) {\n                if (lastDate === yesterdayStr) {\n                    newStreak += 1;\n                } else {\n                    newStreak = 1; // Broken streak or first bet\n                }\n            } else {\n                if (newStreak === 0) newStreak = 1;\n            }\n            const newLongest = Math.max(newStreak, user.longestStreak || 0);\n            // 1. Deduct Balance, Add to Invested, Update Streak\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-amount),\n                invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                currentStreak: newStreak,\n                longestStreak: newLongest,\n                lastBetDate: todayStr\n            });\n            // 2. Create Bet\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), {\n                userId: user.id,\n                username: user.username,\n                eventId,\n                outcomeId,\n                outcomeLabel: outcome.label,\n                eventTitle: event.title,\n                amount: parseFloat(amount),\n                odds: outcome.odds,\n                potentialPayout: amount * outcome.odds,\n                status: \"pending\",\n                placedAt: new Date().toISOString()\n            });\n            // 3. Update Event Stats (Best Effort - ignore permission errors for now)\n            try {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                    [\"stats.counts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    [\"stats.amounts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                    \"stats.totalBets\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    \"stats.totalPool\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount)\n                });\n            } catch (statsErr) {\n                console.warn(\"Could not update event stats (likely permission issue):\", statsErr);\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const createEvent = async (eventData)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), {\n                status: \"open\",\n                createdAt: new Date().toISOString(),\n                ...eventData\n            });\n        } catch (e) {\n            console.error(\"Error creating event\", e);\n        }\n    };\n    const updateEventOrder = async (eventId, newOrder)=>{\n        try {\n            if (!user || user.role !== \"admin\") return {\n                success: false,\n                error: \"Unauthorized\"\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                order: newOrder\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteEvent = async (eventId)=>{\n        try {\n            // Note: This does NOT refund bets automatically in this simple version\n            // You would need Cloud Functions for robust backend logic\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                status: \"deleted\"\n            }); // Soft delete is safer?\n            // For now, let's just actually delete it for cleanliness in the UI as requested previously\n            // but usually on local version we just filtered.\n            // Wait, Firestore deleteDoc is better.\n            // await deleteDoc(doc(db, 'events', eventId)); \n            // Let's stick to update to 'deleted' or just rely on the UI filter?\n            // Let's actually delete.\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId));\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const toggleFeatured = async (eventId, currentStatus)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                featured: !currentStatus\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const resolveEvent = async (eventId, winnerOutcomeId)=>{\n        try {\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            // 1. Mark Event as Settled (In Batch)\n            batch.update(eventRef, {\n                status: \"settled\",\n                winnerOutcomeId\n            });\n            // 2. Process Bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ); // Need all bets to settle\n            for (const betDoc of betsSnap.docs){\n                const bet = betDoc.data();\n                // Skip if already settled to avoid double-pay/deduct\n                if (bet.status !== \"pending\") continue;\n                const isWinner = bet.outcomeId === winnerOutcomeId;\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                // Fetch User to Calc Portfolio Impact\n                let percentChange = 0;\n                try {\n                    const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n                    if (userSnap.exists()) {\n                        const userData = userSnap.data();\n                        const currentNetWorth = (userData.balance || 0) + (userData.invested || 0);\n                        // Profit (or Loss) from this specific bet\n                        const profit = isWinner ? bet.potentialPayout - bet.amount // Net Profit\n                         : -bet.amount; // Net Loss\n                        // Portfolio Impact % = (Profit / currentNetWorth) * 100\n                        percentChange = currentNetWorth > 0 ? profit / currentNetWorth * 100 : 0;\n                    }\n                } catch (err) {\n                    console.error(\"Error calc legacy stats\", err);\n                }\n                // Settle the bet document\n                batch.update(betDoc.ref, {\n                    status: isWinner ? \"won\" : \"lost\",\n                    settledAt: new Date().toISOString()\n                });\n                // Update User Balance & Invested & Last Bet Stats\n                if (isWinner) {\n                    batch.update(userRef, {\n                        balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                        lastBetPercent: percentChange\n                    });\n                } else {\n                    batch.update(userRef, {\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                        lastBetPercent: percentChange\n                    });\n                }\n                // Create Notification\n                const notifRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\"));\n                batch.set(notifRef, {\n                    userId: bet.userId,\n                    type: \"result\",\n                    eventId: eventId,\n                    title: isWinner ? \"You Won!\" : \"Bet Lost\",\n                    message: isWinner ? \"You won $\".concat(bet.potentialPayout.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\") : \"You lost $\".concat(bet.amount.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\"),\n                    read: false,\n                    createdAt: new Date().toISOString()\n                });\n            }\n            await batch.commit();\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Resolve Event Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const fixStuckBets = async ()=>{\n        try {\n            const eventsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"settled\"));\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(eventsQ);\n            let totalFixed = 0;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            for (const eventDoc of eventsSnap.docs){\n                const event = eventDoc.data();\n                const winnerOutcomeId = event.winnerOutcomeId;\n                if (!winnerOutcomeId) continue;\n                const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventDoc.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n                const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n                for (const betDoc of betsSnap.docs){\n                    const bet = betDoc.data();\n                    // Double check it's pending\n                    if (bet.status !== \"pending\") continue;\n                    const isWinner = bet.outcomeId === winnerOutcomeId;\n                    const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                    let percentChange = 0;\n                    try {\n                        // Fetch User for Net Worth Calc\n                        const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n                        const userData = userSnap.exists() ? userSnap.data() : {\n                            balance: 0,\n                            invested: 0\n                        };\n                        const currentNetWorth = (userData.balance || 0) + (userData.invested || 0);\n                        // Profit (or Loss) from this specific bet\n                        const profit = isWinner ? bet.potentialPayout - bet.amount // Net Profit\n                         : -bet.amount; // Net Loss\n                        // Portfolio Impact % = (Profit / currentNetWorth) * 100\n                        percentChange = currentNetWorth > 0 ? profit / currentNetWorth * 100 : 0;\n                    } catch (err) {\n                        console.error(err);\n                    }\n                    batch.update(betDoc.ref, {\n                        status: isWinner ? \"won\" : \"lost\",\n                        settledAt: new Date().toISOString()\n                    });\n                    if (isWinner) {\n                        batch.update(userRef, {\n                            balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                            invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                            lastBetPercent: percentChange\n                        });\n                    } else {\n                        batch.update(userRef, {\n                            invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount),\n                            lastBetPercent: percentChange\n                        });\n                    }\n                    totalFixed++;\n                }\n            }\n            if (totalFixed > 0) {\n                await batch.commit();\n            }\n            return {\n                success: true,\n                message: \"Fixed \".concat(totalFixed, \" stuck bets.\")\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteBet = async (betId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\", betId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateEvent = async (eventId, data)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), data);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const setMainBet = async (eventId, mainOutcomeId)=>{\n        try {\n            if (!user || user.role !== \"admin\") return {\n                success: false,\n                error: \"Unauthorized\"\n            };\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(eventRef);\n            if (!snap.exists()) return {\n                success: false,\n                error: \"Event not found\"\n            };\n            const evt = snap.data();\n            // Remove 'main' type from all, then set it for the chosen one plus its sibling?\n            // Wait, \"Main Bet\" usually implies a PAIR of outcomes (e.g. Chiefs vs 49ers).\n            // If the user selects \"Chiefs\" as main, we likely want \"49ers\" (the other one in that pair) to also be main.\n            // But outcomes are just a flat list. \n            // Simplification: The admin clicks \"Highlight This Pair\" on one outcome, and we assume the next one is its pair?\n            // Or we just flag THIS outcome's pair as main.\n            // Let's iterate and just toggle the type 'main' for the targeted outcome(s).\n            // Actually, cleaner design: toggle \"type: main\" for specific outcomes.\n            const newOutcomes = evt.outcomes.map((o)=>{\n                if (o.id === mainOutcomeId) return {\n                    ...o,\n                    type: \"main\"\n                };\n                // If we want to unset others? Maybe not, maybe multiple main bets allowed.\n                return o;\n            });\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                outcomes: newOutcomes\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const submitIdea = async (ideaText)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        // Duplicate Check\n        const qDup = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"text\", \"==\", ideaText));\n        const snapDup = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qDup);\n        if (!snapDup.empty) {\n            return {\n                success: false,\n                error: \"You already suggested this! Hey switch it up.\"\n            };\n        }\n        // Check Daily Limit (Client-side check based on local user data, ideally backend does this)\n        const today = new Date().toDateString();\n        let currentCount = 0;\n        if (user.submissionData && user.submissionData.date === today) {\n            currentCount = user.submissionData.count;\n        }\n        if (currentCount >= 5) {\n            return {\n                success: false,\n                error: \"Daily limit reached (5/5). Come back tomorrow!\"\n            };\n        }\n        try {\n            // 1. Create Idea Doc\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), {\n                userId: user.id,\n                username: user.username,\n                text: ideaText,\n                submittedAt: new Date().toISOString()\n            });\n            // 2. Update User (Reward + Submission Count)\n            // If date different, simple set. If same, increment.\n            // Firestore update is tricky with nested objects, so we set the whole object.\n            // We calculate new count locally to ensure sync with the check.\n            const newCount = currentCount + 1;\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(15),\n                submissionData: {\n                    date: today,\n                    count: newCount\n                }\n            });\n            return {\n                success: true,\n                message: \"Idea submitted! +$15.00\"\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUserGroups = async (targetUserId, groups)=>{\n        try {\n            if (!user || user.role !== \"admin\") return {\n                success: false,\n                error: \"Unauthorized\"\n            };\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                groups: groups || []\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteIdea = async (ideaId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\", ideaId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUser = async (updates)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        try {\n            // 1. Update Firestore FIRST (Profile Pic, Username, etc.)\n            // This ensures that non-sensitive updates always succeed even if Auth fails.\n            const firestoreUpdates = {\n                ...updates\n            };\n            delete firestoreUpdates.password; // Don't store raw password in DB\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), firestoreUpdates);\n            // Update local state immediately for the UI\n            setUser((prev)=>({\n                    ...prev,\n                    ...firestoreUpdates\n                }));\n            // 2. Attempt Auth Updates (Sensitive: Email/Password)\n            let authUpdated = false;\n            let authErrorMsg = \"\";\n            try {\n                // Update Email\n                if (updates.email && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    const currentAuthEmail = _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.email;\n                    if (updates.email.toLowerCase() !== currentAuthEmail.toLowerCase()) {\n                        console.log(\"Debug: Attempting email update from \".concat(currentAuthEmail, \" to \").concat(updates.email));\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                            authUpdated = true;\n                        } catch (emailErr) {\n                            if (emailErr.code === \"auth/operation-not-allowed\" || emailErr.message.includes(\"verify\")) {\n                                await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.verifyBeforeUpdateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                                return {\n                                    success: true,\n                                    message: \"Profile saved & Verification sent to \".concat(updates.email, \".\")\n                                };\n                            }\n                            throw emailErr;\n                        }\n                    }\n                }\n                // Update Password\n                if (updates.password && updates.password.length > 0) {\n                    if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updatePassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.password);\n                        authUpdated = true;\n                    }\n                }\n                // Force refresh if Auth changed\n                if (authUpdated && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.reload();\n                }\n            } catch (authErr) {\n                console.error(\"Auth Update Failed:\", authErr);\n                if (authErr.code === \"auth/requires-recent-login\") {\n                    authErrorMsg = \" (Note: Re-login required to update Email/Password)\";\n                } else {\n                    authErrorMsg = \" (Auth Error: \".concat(authErr.message, \")\");\n                }\n            }\n            const successMsg = authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg;\n            return {\n                success: true,\n                message: authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg\n            };\n        } catch (e) {\n            console.error(\"Firestore Update Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const recalculateLeaderboard = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all pending bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            // If index missing, this line throws.\n            const investmentsByUser = {};\n            betsSnap.docs.forEach((doc)=>{\n                const bet = doc.data();\n                if (!investmentsByUser[bet.userId]) investmentsByUser[bet.userId] = 0;\n                investmentsByUser[bet.userId] += bet.amount || 0;\n            });\n            // 2. Fetch all users to update their stats\n            const usersSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"));\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let updateCount = 0;\n            usersSnap.docs.forEach((userDoc)=>{\n                const uid = userDoc.id;\n                const currentInvested = userDoc.data().invested || 0;\n                const correctInvested = investmentsByUser[uid] || 0;\n                // Only update if different to save writes\n                if (Math.abs(currentInvested - correctInvested) > 0.01) {\n                    batch.update(userDoc.ref, {\n                        invested: correctInvested\n                    });\n                    updateCount++;\n                }\n            });\n            if (updateCount > 0) await batch.commit();\n            return {\n                success: true,\n                message: \"Recalculated! Updated \".concat(updateCount, \" users.\")\n            };\n        } catch (e) {\n            console.error(\"Recalc Detailed Error:\", e);\n            let errMsg = e.message || String(e);\n            if (errMsg.includes(\"index\")) errMsg = \"Missing Index! Check Browser Console (F12) for the creation link.\";\n            return {\n                success: false,\n                error: errMsg\n            };\n        }\n    };\n    const backfillLastBetPercent = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            console.log(\"Starting Backfill...\");\n            const usersSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"));\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let updateCount = 0;\n            // Process users in chunks to avoid blowing up memory/batch limits if many users\n            // But for <500 users, loop is fine. Batch limit is 500 ops.\n            for (const userDoc of usersSnap.docs){\n                const uid = userDoc.id;\n                // Get all bets for user (we crave the most recent settled one)\n                const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", uid));\n                const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n                let lastSettledBet = null;\n                // Find latest settled bet in memory\n                const settledBets = betsSnap.docs.map((d)=>({\n                        ...d.data(),\n                        id: d.id\n                    })).filter((b)=>b.status === \"won\" || b.status === \"lost\").sort((a, b)=>{\n                    const dateA = new Date(a.settledAt || a.placedAt || 0);\n                    const dateB = new Date(b.settledAt || b.placedAt || 0);\n                    return dateB - dateA; // Descending\n                });\n                if (settledBets.length > 0) {\n                    lastSettledBet = settledBets[0];\n                    const isWinner = lastSettledBet.status === \"won\";\n                    const userData = userDoc.data();\n                    const currentNetWorth = (userData.balance || 0) + (userData.invested || 0);\n                    const profit = isWinner ? lastSettledBet.potentialPayout - lastSettledBet.amount : -lastSettledBet.amount;\n                    // Approximate Pre-Bet Net Worth\n                    // Current Net Worth DOES include this bet's result (since it's settled).\n                    // So we subtract the profit to get the pre-bet value.\n                    const preBetNetWorth = currentNetWorth - profit;\n                    // Avoid division by zero\n                    const percentChange = preBetNetWorth > 0 ? profit / preBetNetWorth * 100 : 0;\n                    batch.update(userDoc.ref, {\n                        lastBetPercent: percentChange\n                    });\n                    updateCount++;\n                }\n            }\n            if (updateCount > 0) await batch.commit();\n            return {\n                success: true,\n                message: \"Updated \".concat(updateCount, \" users with last bet stats.\")\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const demoteSelf = async ()=>{\n        if (!user) return;\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                role: \"user\"\n            });\n            // setUser({...user, role: 'user'}); // Optimistic update\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteAccount = async ()=>{\n        if (!user) return {\n            success: false\n        };\n        try {\n            const userId = user.id;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", userId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            // 4. Delete Auth Account\n            if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.delete();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete Error:\", e);\n            if (e.code === \"auth/requires-recent-login\") {\n                return {\n                    success: false,\n                    error: \"Please log out and log in again to delete your account.\"\n                };\n            }\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteUser = async (targetUserId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // Helper to delete in batches\n            const commitBatchBuffer = async (docsToDelete)=>{\n                const CHUNK_SIZE = 400; // Safety margin below 500\n                for(let i = 0; i < docsToDelete.length; i += CHUNK_SIZE){\n                    const chunk = docsToDelete.slice(i, i + CHUNK_SIZE);\n                    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n                    chunk.forEach((ref)=>batch.delete(ref));\n                    await batch.commit();\n                }\n            };\n            const allDocsToDelete = [];\n            // 1. Bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            betsSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 2. Ideas\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            ideasSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 3. Comments (New)\n            const commentsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            commentsSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 4. Notifications (New)\n            const notifSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId)));\n            notifSnap.docs.forEach((d)=>allDocsToDelete.push(d.ref));\n            // 5. User Profile\n            allDocsToDelete.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId));\n            console.log(\"Deleting user \".concat(targetUserId, \": \").concat(allDocsToDelete.length, \" documents total.\"));\n            await commitBatchBuffer(allDocsToDelete);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete User Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const syncEventStats = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"));\n            const allBets = betsSnap.docs.map((d)=>d.data());\n            // 2. Aggregate Stats\n            const statsMap = {}; // eventId -> { counts: {}, amounts: {}, totalBets: 0, totalPool: 0 }\n            for (const bet of allBets){\n                if (!statsMap[bet.eventId]) {\n                    statsMap[bet.eventId] = {\n                        counts: {},\n                        amounts: {},\n                        totalBets: 0,\n                        totalPool: 0\n                    };\n                }\n                const s = statsMap[bet.eventId];\n                s.totalBets += 1;\n                s.totalPool += bet.amount || 0;\n                s.counts[bet.outcomeId] = (s.counts[bet.outcomeId] || 0) + 1;\n                s.amounts[bet.outcomeId] = (s.amounts[bet.outcomeId] || 0) + (bet.amount || 0);\n            }\n            // 3. Update Events\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"));\n            const updatePromises = eventsSnap.docs.map(async (docSnap)=>{\n                const stats = statsMap[docSnap.id] || {\n                    counts: {},\n                    amounts: {},\n                    totalBets: 0,\n                    totalPool: 0\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", docSnap.id), {\n                    stats\n                });\n            });\n            await Promise.all(updatePromises);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const addComment = async (eventId, text)=>{\n        if (!user) return {\n            success: false,\n            error: \"Login to comment\"\n        };\n        try {\n            const commentData = {\n                eventId,\n                userId: user.id,\n                username: user.username,\n                text,\n                createdAt: new Date().toISOString()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), commentData);\n            // Update Event with lastComment for preview\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                lastComment: {\n                    username: user.username,\n                    text: text.length > 50 ? text.substring(0, 50) + \"...\" : text,\n                    createdAt: commentData.createdAt\n                }\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteComment = async (commentId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Get comment details before deleting (to find parent event)\n            const commentRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\", commentId);\n            const commentSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(commentRef);\n            if (!commentSnap.exists()) {\n                return {\n                    success: false,\n                    error: \"Comment already deleted\"\n                };\n            }\n            const val = commentSnap.data();\n            const eventId = val.eventId;\n            const commentCreatedAt = val.createdAt;\n            // 2. Delete the comment\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)(commentRef);\n            // 3. Check if this was the \"lastComment\" on the event card\n            if (eventId) {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                const eventSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(eventRef);\n                if (eventSnap.exists()) {\n                    const eventData = eventSnap.data();\n                    // Check if the displayed lastComment matches the one we just deleted\n                    if (eventData.lastComment && eventData.lastComment.createdAt === commentCreatedAt) {\n                        // It was the one displayed! We need to find the new latest comment.\n                        // Fetch all remaining comments for this event\n                        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n                        const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                        if (!snap.empty) {\n                            // Find the newest one\n                            const all = snap.docs.map((d)=>d.data());\n                            all.sort((a, b)=>new Date(b.createdAt) - new Date(a.createdAt));\n                            const newest = all[0];\n                            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                                lastComment: {\n                                    username: newest.username,\n                                    text: newest.text.length > 50 ? newest.text.substring(0, 50) + \"...\" : newest.text,\n                                    createdAt: newest.createdAt\n                                }\n                            });\n                        } else {\n                            // No comments left\n                            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                                lastComment: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteField)()\n                            });\n                        }\n                    }\n                }\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const markNotificationRead = async (notifId)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\", notifId), {\n                read: true\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const getUserStats = async (targetUserId)=>{\n        try {\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n            const userData = userSnap.exists() ? userSnap.data() : {};\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            let wins = 0;\n            let losses = 0;\n            let profit = 0;\n            let settledCount = 0;\n            snap.docs.forEach((d)=>{\n                const b = d.data();\n                if (b.status === \"won\") {\n                    wins++;\n                    settledCount++;\n                    profit += (b.potentialPayout || b.amount * b.odds) - b.amount;\n                } else if (b.status === \"lost\") {\n                    losses++;\n                    settledCount++;\n                    profit -= b.amount;\n                }\n            });\n            const total = snap.size;\n            const winRate = settledCount > 0 ? (wins / settledCount * 100).toFixed(1) : 0;\n            return {\n                success: true,\n                stats: {\n                    wins,\n                    losses,\n                    total,\n                    winRate,\n                    profit\n                },\n                profile: {\n                    bio: userData.bio || \"\",\n                    profilePic: userData.profilePic,\n                    username: userData.username\n                }\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const getWeeklyLeaderboard = async ()=>{\n        try {\n            const now = new Date();\n            const dayOfWeek = now.getDay(); // 0 (Sun) - 6 (Sat)\n            const startOfWeek = new Date(now);\n            // Reset to most recent Sunday (or today if it is Sunday)\n            startOfWeek.setDate(now.getDate() - dayOfWeek);\n            startOfWeek.setHours(0, 0, 0, 0);\n            const isoStr = startOfWeek.toISOString();\n            console.log(\"Fetching weekly stats since:\", isoStr);\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"in\", [\n                \"won\",\n                \"lost\"\n            ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"settledAt\", \">=\", isoStr));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            const stats = {};\n            snap.docs.forEach((doc)=>{\n                const b = doc.data();\n                if (!stats[b.userId]) stats[b.userId] = 0;\n                if (b.status === \"won\") {\n                    // Profit = Payout - Wager\n                    const payout = b.potentialPayout || b.amount * b.odds;\n                    stats[b.userId] += payout - b.amount;\n                } else {\n                    // Loss = -Wager\n                    stats[b.userId] -= b.amount;\n                }\n            });\n            const leaderboard = Object.entries(stats).map((param)=>{\n                let [userId, profit] = param;\n                return {\n                    userId,\n                    profit\n                };\n            });\n            leaderboard.sort((a, b)=>b.profit - a.profit);\n            return {\n                success: true,\n                data: leaderboard\n            };\n        } catch (e) {\n            console.error(\"Weekly Leaderboard Error:\", e);\n            let msg = e.message;\n            if (msg.includes(\"index\")) msg = \"Missing Index! Check console (F12) for the creation link.\";\n            return {\n                success: false,\n                error: msg\n            };\n        }\n    };\n    const updateSystemAnnouncement = async (data)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"system\", \"announcement\");\n            // Merge true to allow partial updates if needed, though usually we replace content\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, data, {\n                merge: true\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            alert(\"Error posting announcement: \" + e.message); // Debug\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AppContext.Provider, {\n        value: {\n            user,\n            signup,\n            signin,\n            logout,\n            updateUser,\n            submitIdea,\n            deleteIdea,\n            deleteAccount,\n            deleteUser,\n            demoteSelf,\n            syncEventStats,\n            events,\n            createEvent,\n            resolveEvent,\n            updateEvent,\n            updateEventOrder,\n            fixStuckBets,\n            deleteBet,\n            deleteEvent,\n            toggleFeatured,\n            recalculateLeaderboard,\n            backfillLastBetPercent,\n            addComment,\n            deleteComment,\n            markNotificationRead,\n            getUserStats,\n            getWeeklyLeaderboard,\n            setMainBet,\n            updateUserGroups,\n            updateSystemAnnouncement,\n            systemAnnouncement,\n            bets,\n            placeBet,\n            isLoaded,\n            isFirebase: true,\n            users,\n            ideas,\n            db: _firebase__WEBPACK_IMPORTED_MODULE_4__.db\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\ffear\\\\OneDrive\\\\Documents\\\\GitHub\\\\bet-it-happens\\\\src\\\\lib\\\\store.js\",\n        lineNumber: 1252,\n        columnNumber: 5\n    }, this);\n}\n_s(AppProvider, \"+dBb7/oTa8x7On7v1mA0HNxr9Js=\");\n_c = AppProvider;\nfunction useApp() {\n    _s1();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppContext);\n}\n_s1(useApp, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NXRDZ0JEO0tBQUFBO0FBOHRDVCxTQUFTa1Q7O0lBQ2QsT0FBTy9VLGlEQUFVQSxDQUFDNEI7QUFDcEI7SUFGZ0JtVCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL3N0b3JlLmpzPzUxMTQiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcblwidXNlIGNsaWVudFwiO1xyXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtcclxuICBjb2xsZWN0aW9uLCBhZGREb2MsIG9uU25hcHNob3QsIHF1ZXJ5LCBvcmRlckJ5LFxyXG4gIGRvYywgc2V0RG9jLCB1cGRhdGVEb2MsIGdldERvYywgd2hlcmUsIGluY3JlbWVudCwgZGVsZXRlRG9jLCBnZXREb2NzLCBsaW1pdCwgd3JpdGVCYXRjaCwgZGVsZXRlRmllbGRcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcbiAgc2lnbk91dCwgb25BdXRoU3RhdGVDaGFuZ2VkLCB1cGRhdGVFbWFpbCwgdXBkYXRlUGFzc3dvcmQsIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsXHJcbn0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbmltcG9ydCB7IGRiLCBhdXRoIH0gZnJvbSAnLi9maXJlYmFzZSc7XHJcblxyXG5jb25zdCBBcHBDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEFwcFByb3ZpZGVyKHsgY2hpbGRyZW4gfSkge1xyXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtldmVudHMsIHNldEV2ZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2JldHMsIHNldEJldHNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpZGVhcywgc2V0SWRlYXNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpc0xvYWRlZCwgc2V0SXNMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBTYWZldHkgdGltZW91dDogSWYgRmlyZWJhc2UgYXV0aCBoYW5ncyBmb3IgPjFzLCBqdXN0IGxvYWQgdGhlIGFwcCAoYXMgc2lnbmVkIG91dCkgdG8gcHJldmVudCBiZWluZyBzdHVjay5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc2V0SXNMb2FkZWQocHJldiA9PiB7XHJcbiAgICAgICAgaWYgKCFwcmV2KSBjb25zb2xlLndhcm4oXCJGaXJlYmFzZSBhdXRoIHNsb3cgLSBmb3JjaW5nIGxvYWQgc3RhdGVcIik7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMTIwMCk7XHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIC0tLSAxLiBBdXRoICYgVXNlciBQcm9maWxlIExpc3RlbmVyIC0tLVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgdW5zdWJzY3JpYmVQcm9maWxlID0gbnVsbDtcclxuXHJcbiAgICAvLyBBdXRoIExpc3RlbmVyXHJcbiAgICBjb25zdCB1bnN1YnNjcmliZUF1dGggPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKGZpcmViYXNlVXNlcikgPT4ge1xyXG4gICAgICAvLyAxLiBDbGVhbiB1cCBwcmV2aW91cyBwcm9maWxlIGxpc3RlbmVyIGlmIGFueVxyXG4gICAgICBpZiAodW5zdWJzY3JpYmVQcm9maWxlKSB7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlKCk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZpcmViYXNlVXNlcikge1xyXG4gICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluIC0+IFNldCBiYXNpYyBhdXRoIHVzZXIgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBsb2dvdXQgbG9vcFxyXG4gICAgICAgIC8vIFdlIHdpbGwgZW5yaWNoIHRoaXMgd2l0aCBEQiBkYXRhIGluIGEgbW9tZW50XHJcbiAgICAgICAgc2V0VXNlcihwcmV2ID0+IHByZXYgfHwge1xyXG4gICAgICAgICAgaWQ6IGZpcmViYXNlVXNlci51aWQsXHJcbiAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgdXNlcm5hbWU6IGZpcmViYXNlVXNlci5kaXNwbGF5TmFtZSB8fCBmaXJlYmFzZVVzZXIuZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTGlzdGVuIHRvIEZpcmVzdG9yZSBQcm9maWxlXHJcbiAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgZmlyZWJhc2VVc2VyLnVpZCk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlID0gb25TbmFwc2hvdCh1c2VyUmVmLCAoZG9jU25hcCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5kb2NTbmFwLmRhdGEoKSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGRvZXMgbm90IGV4aXN0IChlLmcuIGZpcnN0IGxvZ2luIG9yIHByZXZpb3VzIGVycm9yKS5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gREVURUNURUQgTkVXIFVTRVIgKE5vIFByb2ZpbGUgRm91bmQpIC0gQ3JlYXRpbmcgUHJvZmlsZS4uLlwiKTtcclxuICAgICAgICAgICAgLy8gQXV0by1jcmVhdGUgdGhlIHVzZXIgcHJvZmlsZSBpbiBGaXJlc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgbmV3VXNlciA9IHtcclxuICAgICAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiBmaXJlYmFzZVVzZXIuZGlzcGxheU5hbWUgfHwgZmlyZWJhc2VVc2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXHJcbiAgICAgICAgICAgICAgcm9sZTogKGZpcmViYXNlVXNlci5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpKSA/ICdhZG1pbicgOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgYmFsYW5jZTogMTAwMCxcclxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV3JpdGUgdG8gREJcclxuICAgICAgICAgICAgc2V0RG9jKHVzZXJSZWYsIG5ld1VzZXIpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gU1VDQ0VTU0ZVTExZIENSRUFURUQgUFJPRklMRSBGT1I6XCIsIG5ld1VzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJXZWxjb21lISBZb3VyIHByb2ZpbGUgaGFzIGJlZW4gY3JlYXRlZCB3aXRoICQxMDAwLlwiKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIj4+PiBFUlJPUiBDUkVBVElORyBQUk9GSUxFOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJvciBjcmVhdGluZyBwcm9maWxlLiBDaGVjayBwZXJtaXNzaW9ucy5cIik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgbG9jYWwgc3RhdGVcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5uZXdVc2VyIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgb3V0XHJcbiAgICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgICBzZXRCZXRzKFtdKTtcclxuICAgICAgICBzZXRJc0xvYWRlZCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvbiB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdW5zdWJzY3JpYmVBdXRoKCk7XHJcbiAgICAgIGlmICh1bnN1YnNjcmliZVByb2ZpbGUpIHtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGUoW10pOyAvLyBMaXN0IG9mIGFsbCB1c2VycyBmb3IgbGVhZGVyYm9hcmRcclxuICBjb25zdCBbc3lzdGVtQW5ub3VuY2VtZW50LCBzZXRTeXN0ZW1Bbm5vdW5jZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4gIC8vIC4uLiAoZXhpc3RpbmcgdGltZW91dCBjb2RlKSAuLi5cclxuXHJcbiAgLy8gLS0tIDIuIERhdGEgTGlzdGVuZXJzIChFdmVudHMsIElkZWFzLCBVc2VycywgQW5ub3VuY2VtZW50KSAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGlzdGVuIHRvIFN5c3RlbSBBbm5vdW5jZW1lbnRcclxuICAgIGNvbnN0IGFubm91bmNlbWVudFJlZiA9IGRvYyhkYiwgJ3N5c3RlbScsICdhbm5vdW5jZW1lbnQnKTtcclxuICAgIGNvbnN0IHVuc3ViQW5ub3VuY2VtZW50ID0gb25TbmFwc2hvdChhbm5vdW5jZW1lbnRSZWYsIChkb2NTbmFwKSA9PiB7XHJcbiAgICAgIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XHJcbiAgICAgICAgc2V0U3lzdGVtQW5ub3VuY2VtZW50KGRvY1NuYXAuZGF0YSgpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRTeXN0ZW1Bbm5vdW5jZW1lbnQobnVsbCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBFdmVudHMgKExpbWl0IDUwIGFjdGl2ZSlcclxuICAgIGNvbnN0IGV2ZW50c1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJFdmVudHMgPSBvblNuYXBzaG90KGV2ZW50c1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnRzTGlzdCA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgZXZlbnRzTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgLy8gMS4gU29ydCBieSBtYW51YWwgb3JkZXIgaWYgZXhpc3RzIChhc2NlbmRpbmc6IGxvdyBudW1iZXJzIGZpcnN0KVxyXG4gICAgICAgIGNvbnN0IG9yZGVyQSA9IGEub3JkZXIgIT09IHVuZGVmaW5lZCA/IGEub3JkZXIgOiA5OTk5O1xyXG4gICAgICAgIGNvbnN0IG9yZGVyQiA9IGIub3JkZXIgIT09IHVuZGVmaW5lZCA/IGIub3JkZXIgOiA5OTk5O1xyXG4gICAgICAgIGlmIChvcmRlckEgIT09IG9yZGVyQikgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQjtcclxuXHJcbiAgICAgICAgLy8gMi4gT3BlbiBldmVudHMgZmlyc3RcclxuICAgICAgICBpZiAoYS5zdGF0dXMgPT09ICdvcGVuJyAmJiBiLnN0YXR1cyAhPT0gJ29wZW4nKSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGEuc3RhdHVzICE9PSAnb3BlbicgJiYgYi5zdGF0dXMgPT09ICdvcGVuJykgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgIC8vIDMuIFRoZW4gc29ydCBieSBzdGFydEF0IGRhdGUgKGFzY2VuZGluZzogZWFybGllc3QgZGF0ZSBmaXJzdClcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5zdGFydEF0KSAtIG5ldyBEYXRlKGIuc3RhcnRBdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXRFdmVudHMoZXZlbnRzTGlzdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gSWRlYXMgKExpbWl0IDUwIHJlY2VudClcclxuICAgIC8vIFJlbW92ZWQgb3JkZXJCeSB0byBhdm9pZCBtaXNzaW5nIGluZGV4IGlzc3Vlcy4gU29ydGluZyBjbGllbnQtc2lkZS5cclxuICAgIGNvbnN0IGlkZWFzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgbGltaXQoNTApKTtcclxuICAgIGNvbnN0IHVuc3ViSWRlYXMgPSBvblNuYXBzaG90KGlkZWFzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICBjb25zdCBsaXN0ID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4gICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuc3VibWl0dGVkQXQpIC0gbmV3IERhdGUoYS5zdWJtaXR0ZWRBdCkpO1xyXG4gICAgICBzZXRJZGVhcyhsaXN0KTtcclxuICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbGlzdGVuaW5nIHRvIGlkZWFzOlwiLCBlcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gVXNlcnMgKEdsb2JhbCBMaXN0IGZvciBMZWFkZXJib2FyZCAmIEFkbWluKVxyXG4gICAgY29uc3QgdXNlcnNRdWVyeSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICd1c2VycycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJVc2VycyA9IG9uU25hcHNob3QodXNlcnNRdWVyeSwgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3QgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbiAgICAgIC8vIENsaWVudC1zaWRlIHNvcnQgYnkgYmFsYW5jZSBkZXNjXHJcbiAgICAgIGxpc3Quc29ydCgoYSwgYikgPT4gKGIuYmFsYW5jZSB8fCAwKSAtIChhLmJhbGFuY2UgfHwgMCkpO1xyXG4gICAgICBzZXRVc2VycyhsaXN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHVuc3ViRXZlbnRzKCk7XHJcbiAgICAgIHVuc3ViSWRlYXMoKTtcclxuICAgICAgdW5zdWJVc2VycygpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gLS0tIDMuIEJldHMgTGlzdGVuZXIgKE9ubHkgZm9yIGxvZ2dlZCBpbiB1c2VyKSAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHNldEJldHMoW10pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYmV0c1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXIuaWQpLCBsaW1pdCgxMDApKTtcclxuICAgIGNvbnN0IHVuc3ViQmV0cyA9IG9uU25hcHNob3QoYmV0c1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgLy8gV2UnbGwgdHJ1c3QgdGhlIGNsaWVudCBzaWRlIHNvcnRpbmcgZm9yIG5vdyBvciBhZGQgb3JkZXJCeSBpbmRleCBsYXRlclxyXG4gICAgICBjb25zdCBteUJldHMgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbiAgICAgIG15QmV0cy5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnBsYWNlZEF0KSAtIG5ldyBEYXRlKGEucGxhY2VkQXQpKTtcclxuICAgICAgc2V0QmV0cyhteUJldHMpO1xyXG4gICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmV0X2JldHNfY2FjaGUnLCBKU09OLnN0cmluZ2lmeShteUJldHMpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB1bnN1YkJldHMoKTtcclxuICB9LCBbdXNlcj8uaWRdKTsgLy8gT25seSByZS1ydW4gaWYgdXNlciBJRCBjaGFuZ2VzIGlzIHRyaWNreSwgYmV0dGVyIHNhZmUgZGVwZW5kZW5jeVxyXG5cclxuICAvLyAtLS0gQWN0aW9ucyAtLS1cclxuXHJcbiAgY29uc3Qgc2lnbnVwID0gYXN5bmMgKGVtYWlsLCB1c2VybmFtZSwgcGFzc3dvcmQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBVc2VyIERvY3VtZW50XHJcbiAgICAgIGF3YWl0IHNldERvYyhkb2MoZGIsICd1c2VycycsIHJlc3AudXNlci51aWQpLCB7XHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lIHx8IGVtYWlsLnNwbGl0KCdAJylbMF0sXHJcbiAgICAgICAgcm9sZTogZW1haWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWRtaW4nKSA/ICdhZG1pbicgOiAndXNlcicsIC8vIEJhc2ljIHJvbGUgYXNzaWdubWVudFxyXG4gICAgICAgIGJhbGFuY2U6IDEwMDAsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBzaWduaW4gPSBhc3luYyAoZW1haWxPclVzZXJuYW1lLCBwYXNzd29yZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IGVtYWlsID0gZW1haWxPclVzZXJuYW1lLnRyaW0oKTtcclxuXHJcbiAgICAgIC8vIElmIGl0IGxvb2tzIGxpa2UgYW4gZW1haWwsIGp1c3QgdHJ5IGl0IGRpcmVjdGx5XHJcbiAgICAgIGlmIChlbWFpbC5pbmNsdWRlcygnQCcpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVtYWlsIGxvZ2luIGZhaWxlZFwiLCBlKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc2VybmFtZSBsb29rdXAgbG9naWNcclxuICAgICAgY29uc3QgdXNlcm5hbWVJbnB1dCA9IGVtYWlsO1xyXG4gICAgICBjb25zdCBjb2wgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcclxuICAgICAgbGV0IGNhbmRpZGF0ZUVtYWlscyA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICAgIC8vIEhlbHBlciB0byBmZXRjaCBhbmQgYWRkIGVtYWlscyAoTm8gTElNSVQgdG8gZW5zdXJlIHdlIGZpbmQgdGhlIHJpZ2h0IG9uZSlcclxuICAgICAgY29uc3QgYWRkQ2FuZGlkYXRlcyA9IGFzeW5jIChwYXJhbSwgdmFsKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHEgPSBxdWVyeShjb2wsIHdoZXJlKHBhcmFtLCAnPT0nLCB2YWwpKTsgLy8gUmVtb3ZlZCBsaW1pdFxyXG4gICAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgICAgICAgICBzbmFwLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVtYWlsKSBjYW5kaWRhdGVFbWFpbHMuYWRkKGRhdGEuZW1haWwpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUXVlcnkgZmFpbGVkIGZvclwiLCB2YWwsIGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gMS4gRXhhY3QgTWF0Y2hcclxuICAgICAgYXdhaXQgYWRkQ2FuZGlkYXRlcygndXNlcm5hbWUnLCB1c2VybmFtZUlucHV0KTtcclxuICAgICAgLy8gMi4gTG93ZXJjYXNlXHJcbiAgICAgIGF3YWl0IGFkZENhbmRpZGF0ZXMoJ3VzZXJuYW1lJywgdXNlcm5hbWVJbnB1dC50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgLy8gMy4gQ2FwaXRhbGl6ZWQgKFRyeSBzdGFuZGFyZCBGaXJzdCBDYXBpdGFsKVxyXG4gICAgICBjb25zdCBjYXBpdGFsaXplZCA9IHVzZXJuYW1lSW5wdXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB1c2VybmFtZUlucHV0LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGF3YWl0IGFkZENhbmRpZGF0ZXMoJ3VzZXJuYW1lJywgY2FwaXRhbGl6ZWQpO1xyXG5cclxuICAgICAgLy8gNC4gVVBQRVJDQVNFXHJcbiAgICAgIGF3YWl0IGFkZENhbmRpZGF0ZXMoJ3VzZXJuYW1lJywgdXNlcm5hbWVJbnB1dC50b1VwcGVyQ2FzZSgpKTtcclxuXHJcbiAgICAgIGlmIChjYW5kaWRhdGVFbWFpbHMuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYFVzZXJuYW1lICcke3VzZXJuYW1lSW5wdXR9JyBkb2VzIG5vdCBleGlzdC5gIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyeSBlYWNoIGVtYWlsXHJcbiAgICAgIGxldCB0cmllZCA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBjYW5kaWRhdGVFbWFpbCBvZiBjYW5kaWRhdGVFbWFpbHMpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNhbmRpZGF0ZUVtYWlsICE9PSAnc3RyaW5nJykgY29udGludWU7XHJcbiAgICAgICAgY2FuZGlkYXRlRW1haWwgPSBjYW5kaWRhdGVFbWFpbC50cmltKCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBBdHRlbXB0IDE6IFN0YW5kYXJkXHJcbiAgICAgICAgICBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBjYW5kaWRhdGVFbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAvLyBBdHRlbXB0IDI6IFRyaW1tZWQgUGFzc3dvcmRcclxuICAgICAgICAgIGlmIChwYXNzd29yZC50cmltKCkgIT09IHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgY2FuZGlkYXRlRW1haWwsIHBhc3N3b3JkLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlMikgeyB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQXR0ZW1wdCAzOiBFbWFpbCB3aXRoIGFsbCB3aGl0ZXNwYWNlIHJlbW92ZWQgKGp1c3QgaW4gY2FzZSlcclxuICAgICAgICAgIGNvbnN0IGVtYWlsTm9XaGl0ZXNwYWNlID0gY2FuZGlkYXRlRW1haWwucmVwbGFjZSgvXFxzL2csICcnKTtcclxuICAgICAgICAgIGlmIChlbWFpbE5vV2hpdGVzcGFjZSAhPT0gY2FuZGlkYXRlRW1haWwpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbE5vV2hpdGVzcGFjZSwgcGFzc3dvcmQpO1xyXG4gICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZTMpIHsgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRyaWVkLnB1c2goY2FuZGlkYXRlRW1haWwpO1xyXG4gICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcgfHwgZXJyb3IuY29kZSA9PT0gJ2F1dGgvd3JvbmctcGFzc3dvcmQnKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gUmV0dXJuIHRlY2huaWNhbCBlcnJvclxyXG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgU3lzdGVtIEVycm9yICgke2Vycm9yLmNvZGV9KWAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIGxvb3AgZmluaXNoZXMsIG5vbmUgd29ya2VkLlxyXG4gICAgICAvLyBSZXR1cm4gdGhlIGVtYWlsIGZvdW5kIHNvIHRoZSBVSSBjYW4gc3dpdGNoIHRvIGl0LlxyXG4gICAgICBjb25zdCBmaXJzdEVtYWlsID0gdHJpZWRbMF07XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgc3VnZ2VzdGVkRW1haWw6IGZpcnN0RW1haWwsXHJcbiAgICAgICAgZXJyb3I6ICdQYXNzd29yZCBpbmNvcnJlY3QuJ1xyXG4gICAgICB9O1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiU3lzdGVtIEVycm9yOiBcIiArIGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBsb2dvdXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBzaWduT3V0KGF1dGgpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBwbGFjZUJldCA9IGFzeW5jIChldmVudElkLCBvdXRjb21lSWQsIGFtb3VudCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOb3QgbG9nZ2VkIGluJyB9O1xyXG4gICAgaWYgKHVzZXIuYmFsYW5jZSA8IGFtb3VudCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW5zdWZmaWNpZW50IGZ1bmRzJyB9O1xyXG5cclxuICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBldmVudElkKTtcclxuICAgIGlmICghZXZlbnQgfHwgZXZlbnQuc3RhdHVzICE9PSAnb3BlbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0V2ZW50IGlzIGxvY2tlZCcgfTtcclxuXHJcbiAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgYmV0cyBvbiBPVEhFUiBzaWRlc1xyXG4gICAgY29uc3QgcUV4aXN0aW5nID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXIuaWQpLCB3aGVyZSgnZXZlbnRJZCcsICc9PScsIGV2ZW50SWQpKTtcclxuICAgIGNvbnN0IHNuYXBFeGlzdGluZyA9IGF3YWl0IGdldERvY3MocUV4aXN0aW5nKTtcclxuICAgIGNvbnN0IG90aGVyU2lkZUJldCA9IHNuYXBFeGlzdGluZy5kb2NzLmZpbmQoZCA9PiBkLmRhdGEoKS5vdXRjb21lSWQgIT09IG91dGNvbWVJZCk7XHJcblxyXG4gICAgaWYgKG90aGVyU2lkZUJldCkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTG95YWx0eSBjaGVjayEgWW91IGFscmVhZHkgYmV0IG9uIHRoZSBvdGhlciBzaWRlLiBObyBzd2l0Y2hpbmcuXCIgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvdXRjb21lID0gZXZlbnQub3V0Y29tZXMuZmluZChvID0+IG8uaWQgPT09IG91dGNvbWVJZCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gRGVkdWN0IEJhbGFuY2UgJiBBZGQgdG8gSW52ZXN0ZWRcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlci5pZCk7XHJcbiAgICAgIC8vIFN0cmVhayBMb2dpY1xyXG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IHRvZGF5U3RyID0gdG9kYXkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIHllc3RlcmRheS5zZXREYXRlKHRvZGF5LmdldERhdGUoKSAtIDEpO1xyXG4gICAgICBjb25zdCB5ZXN0ZXJkYXlTdHIgPSB5ZXN0ZXJkYXkudG9EYXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICBsZXQgbmV3U3RyZWFrID0gdXNlci5jdXJyZW50U3RyZWFrIHx8IDA7XHJcbiAgICAgIGNvbnN0IGxhc3REYXRlID0gdXNlci5sYXN0QmV0RGF0ZSB8fCBcIlwiOyAvLyBBc3N1bWluZyBzdG9yZWQgYXMgdG9EYXRlU3RyaW5nKClcclxuXHJcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGxvZ2ljIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSBwcm9jZXNzZWQgYSBzdHJlYWsgZm9yIHRvZGF5XHJcbiAgICAgIC8vIChPciBpZiB0aGUgdXNlciBoYWQgMCBzdHJlYWsgYW5kIGp1c3Qgc3RhcnRlZCB0b2RheSlcclxuICAgICAgaWYgKGxhc3REYXRlICE9PSB0b2RheVN0cikge1xyXG4gICAgICAgIGlmIChsYXN0RGF0ZSA9PT0geWVzdGVyZGF5U3RyKSB7XHJcbiAgICAgICAgICBuZXdTdHJlYWsgKz0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmV3U3RyZWFrID0gMTsgLy8gQnJva2VuIHN0cmVhayBvciBmaXJzdCBiZXRcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG5ld1N0cmVhayA9PT0gMCkgbmV3U3RyZWFrID0gMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbmV3TG9uZ2VzdCA9IE1hdGgubWF4KG5ld1N0cmVhaywgdXNlci5sb25nZXN0U3RyZWFrIHx8IDApO1xyXG5cclxuICAgICAgLy8gMS4gRGVkdWN0IEJhbGFuY2UsIEFkZCB0byBJbnZlc3RlZCwgVXBkYXRlIFN0cmVha1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJSZWYsIHtcclxuICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoLWFtb3VudCksXHJcbiAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudChhbW91bnQpLCAvLyBUcmFjayBhY3RpdmUgd2FnZXJzIGZvciBsZWFkZXJib2FyZFxyXG4gICAgICAgIGN1cnJlbnRTdHJlYWs6IG5ld1N0cmVhayxcclxuICAgICAgICBsb25nZXN0U3RyZWFrOiBuZXdMb25nZXN0LFxyXG4gICAgICAgIGxhc3RCZXREYXRlOiB0b2RheVN0clxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIENyZWF0ZSBCZXRcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHtcclxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICBvdXRjb21lSWQsXHJcbiAgICAgICAgb3V0Y29tZUxhYmVsOiBvdXRjb21lLmxhYmVsLFxyXG4gICAgICAgIGV2ZW50VGl0bGU6IGV2ZW50LnRpdGxlLFxyXG4gICAgICAgIGFtb3VudDogcGFyc2VGbG9hdChhbW91bnQpLFxyXG4gICAgICAgIG9kZHM6IG91dGNvbWUub2RkcyxcclxuICAgICAgICBwb3RlbnRpYWxQYXlvdXQ6IGFtb3VudCAqIG91dGNvbWUub2RkcyxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICBwbGFjZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMy4gVXBkYXRlIEV2ZW50IFN0YXRzIChCZXN0IEVmZm9ydCAtIGlnbm9yZSBwZXJtaXNzaW9uIGVycm9ycyBmb3Igbm93KVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50UmVmID0gZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCk7XHJcbiAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGV2ZW50UmVmLCB7XHJcbiAgICAgICAgICBbYHN0YXRzLmNvdW50cy4ke291dGNvbWVJZH1gXTogaW5jcmVtZW50KDEpLFxyXG4gICAgICAgICAgW2BzdGF0cy5hbW91bnRzLiR7b3V0Y29tZUlkfWBdOiBpbmNyZW1lbnQoYW1vdW50KSxcclxuICAgICAgICAgICdzdGF0cy50b3RhbEJldHMnOiBpbmNyZW1lbnQoMSksXHJcbiAgICAgICAgICAnc3RhdHMudG90YWxQb29sJzogaW5jcmVtZW50KGFtb3VudClcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoc3RhdHNFcnIpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIGV2ZW50IHN0YXRzIChsaWtlbHkgcGVybWlzc2lvbiBpc3N1ZSk6XCIsIHN0YXRzRXJyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNyZWF0ZUV2ZW50ID0gYXN5bmMgKGV2ZW50RGF0YSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdldmVudHMnKSwge1xyXG4gICAgICAgIHN0YXR1czogJ29wZW4nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIC4uLmV2ZW50RGF0YVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIGV2ZW50XCIsIGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZUV2ZW50T3JkZXIgPSBhc3luYyAoZXZlbnRJZCwgbmV3T3JkZXIpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpLCB7IG9yZGVyOiBuZXdPcmRlciB9KTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUV2ZW50ID0gYXN5bmMgKGV2ZW50SWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIE5vdGU6IFRoaXMgZG9lcyBOT1QgcmVmdW5kIGJldHMgYXV0b21hdGljYWxseSBpbiB0aGlzIHNpbXBsZSB2ZXJzaW9uXHJcbiAgICAgIC8vIFlvdSB3b3VsZCBuZWVkIENsb3VkIEZ1bmN0aW9ucyBmb3Igcm9idXN0IGJhY2tlbmQgbG9naWNcclxuICAgICAgY29uc3QgZXZlbnRSZWYgPSBkb2MoZGIsICdldmVudHMnLCBldmVudElkKTtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGV2ZW50UmVmLCB7IHN0YXR1czogJ2RlbGV0ZWQnIH0pOyAvLyBTb2Z0IGRlbGV0ZSBpcyBzYWZlcj9cclxuICAgICAgLy8gRm9yIG5vdywgbGV0J3MganVzdCBhY3R1YWxseSBkZWxldGUgaXQgZm9yIGNsZWFubGluZXNzIGluIHRoZSBVSSBhcyByZXF1ZXN0ZWQgcHJldmlvdXNseVxyXG4gICAgICAvLyBidXQgdXN1YWxseSBvbiBsb2NhbCB2ZXJzaW9uIHdlIGp1c3QgZmlsdGVyZWQuXHJcbiAgICAgIC8vIFdhaXQsIEZpcmVzdG9yZSBkZWxldGVEb2MgaXMgYmV0dGVyLlxyXG4gICAgICAvLyBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCkpOyBcclxuICAgICAgLy8gTGV0J3Mgc3RpY2sgdG8gdXBkYXRlIHRvICdkZWxldGVkJyBvciBqdXN0IHJlbHkgb24gdGhlIFVJIGZpbHRlcj9cclxuICAgICAgLy8gTGV0J3MgYWN0dWFsbHkgZGVsZXRlLlxyXG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCkpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHRvZ2dsZUZlYXR1cmVkID0gYXN5bmMgKGV2ZW50SWQsIGN1cnJlbnRTdGF0dXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSwge1xyXG4gICAgICAgIGZlYXR1cmVkOiAhY3VycmVudFN0YXR1c1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc29sdmVFdmVudCA9IGFzeW5jIChldmVudElkLCB3aW5uZXJPdXRjb21lSWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcbiAgICAgIGNvbnN0IGV2ZW50UmVmID0gZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCk7XHJcblxyXG4gICAgICAvLyAxLiBNYXJrIEV2ZW50IGFzIFNldHRsZWQgKEluIEJhdGNoKVxyXG4gICAgICBiYXRjaC51cGRhdGUoZXZlbnRSZWYsIHtcclxuICAgICAgICBzdGF0dXM6ICdzZXR0bGVkJyxcclxuICAgICAgICB3aW5uZXJPdXRjb21lSWRcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBQcm9jZXNzIEJldHNcclxuICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgnZXZlbnRJZCcsICc9PScsIGV2ZW50SWQpKTtcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTsgLy8gTmVlZCBhbGwgYmV0cyB0byBzZXR0bGVcclxuXHJcbiAgICAgIGZvciAoY29uc3QgYmV0RG9jIG9mIGJldHNTbmFwLmRvY3MpIHtcclxuICAgICAgICBjb25zdCBiZXQgPSBiZXREb2MuZGF0YSgpO1xyXG4gICAgICAgIC8vIFNraXAgaWYgYWxyZWFkeSBzZXR0bGVkIHRvIGF2b2lkIGRvdWJsZS1wYXkvZGVkdWN0XHJcbiAgICAgICAgaWYgKGJldC5zdGF0dXMgIT09ICdwZW5kaW5nJykgY29udGludWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzV2lubmVyID0gYmV0Lm91dGNvbWVJZCA9PT0gd2lubmVyT3V0Y29tZUlkO1xyXG4gICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIGJldC51c2VySWQpO1xyXG5cclxuICAgICAgICAvLyBGZXRjaCBVc2VyIHRvIENhbGMgUG9ydGZvbGlvIEltcGFjdFxyXG4gICAgICAgIGxldCBwZXJjZW50Q2hhbmdlID0gMDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgdXNlclNuYXAgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbiAgICAgICAgICBpZiAodXNlclNuYXAuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyU25hcC5kYXRhKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROZXRXb3J0aCA9ICh1c2VyRGF0YS5iYWxhbmNlIHx8IDApICsgKHVzZXJEYXRhLmludmVzdGVkIHx8IDApO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvZml0IChvciBMb3NzKSBmcm9tIHRoaXMgc3BlY2lmaWMgYmV0XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2ZpdCA9IGlzV2lubmVyXHJcbiAgICAgICAgICAgICAgPyAoYmV0LnBvdGVudGlhbFBheW91dCAtIGJldC5hbW91bnQpIC8vIE5ldCBQcm9maXRcclxuICAgICAgICAgICAgICA6IC1iZXQuYW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV0IExvc3NcclxuXHJcbiAgICAgICAgICAgIC8vIFBvcnRmb2xpbyBJbXBhY3QgJSA9IChQcm9maXQgLyBjdXJyZW50TmV0V29ydGgpICogMTAwXHJcbiAgICAgICAgICAgIHBlcmNlbnRDaGFuZ2UgPSBjdXJyZW50TmV0V29ydGggPiAwXHJcbiAgICAgICAgICAgICAgPyAocHJvZml0IC8gY3VycmVudE5ldFdvcnRoKSAqIDEwMFxyXG4gICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYWxjIGxlZ2FjeSBzdGF0c1wiLCBlcnIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0dGxlIHRoZSBiZXQgZG9jdW1lbnRcclxuICAgICAgICBiYXRjaC51cGRhdGUoYmV0RG9jLnJlZiwge1xyXG4gICAgICAgICAgc3RhdHVzOiBpc1dpbm5lciA/ICd3b24nIDogJ2xvc3QnLFxyXG4gICAgICAgICAgc2V0dGxlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIFVzZXIgQmFsYW5jZSAmIEludmVzdGVkICYgTGFzdCBCZXQgU3RhdHNcclxuICAgICAgICBpZiAoaXNXaW5uZXIpIHtcclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyUmVmLCB7XHJcbiAgICAgICAgICAgIGJhbGFuY2U6IGluY3JlbWVudChiZXQucG90ZW50aWFsUGF5b3V0KSxcclxuICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudCksXHJcbiAgICAgICAgICAgIGxhc3RCZXRQZXJjZW50OiBwZXJjZW50Q2hhbmdlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYmF0Y2gudXBkYXRlKHVzZXJSZWYsIHtcclxuICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudCksXHJcbiAgICAgICAgICAgIGxhc3RCZXRQZXJjZW50OiBwZXJjZW50Q2hhbmdlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBOb3RpZmljYXRpb25cclxuICAgICAgICBjb25zdCBub3RpZlJlZiA9IGRvYyhjb2xsZWN0aW9uKGRiLCAnbm90aWZpY2F0aW9ucycpKTtcclxuICAgICAgICBiYXRjaC5zZXQobm90aWZSZWYsIHtcclxuICAgICAgICAgIHVzZXJJZDogYmV0LnVzZXJJZCxcclxuICAgICAgICAgIHR5cGU6ICdyZXN1bHQnLFxyXG4gICAgICAgICAgZXZlbnRJZDogZXZlbnRJZCxcclxuICAgICAgICAgIHRpdGxlOiBpc1dpbm5lciA/ICdZb3UgV29uIScgOiAnQmV0IExvc3QnLFxyXG4gICAgICAgICAgbWVzc2FnZTogaXNXaW5uZXJcclxuICAgICAgICAgICAgPyBgWW91IHdvbiAkJHsoYmV0LnBvdGVudGlhbFBheW91dCkudG9GaXhlZCgyKX0gb24gJHtiZXQuZXZlbnRUaXRsZX0gKCR7YmV0Lm91dGNvbWVMYWJlbH0pYFxyXG4gICAgICAgICAgICA6IGBZb3UgbG9zdCAkJHtiZXQuYW1vdW50LnRvRml4ZWQoMil9IG9uICR7YmV0LmV2ZW50VGl0bGV9ICgke2JldC5vdXRjb21lTGFiZWx9KWAsXHJcbiAgICAgICAgICByZWFkOiBmYWxzZSxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZXNvbHZlIEV2ZW50IEVycm9yOlwiLCBlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBmaXhTdHVja0JldHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBldmVudHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpLCB3aGVyZSgnc3RhdHVzJywgJz09JywgJ3NldHRsZWQnKSk7XHJcbiAgICAgIGNvbnN0IGV2ZW50c1NuYXAgPSBhd2FpdCBnZXREb2NzKGV2ZW50c1EpO1xyXG5cclxuICAgICAgbGV0IHRvdGFsRml4ZWQgPSAwO1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBldmVudERvYyBvZiBldmVudHNTbmFwLmRvY3MpIHtcclxuICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50RG9jLmRhdGEoKTtcclxuICAgICAgICBjb25zdCB3aW5uZXJPdXRjb21lSWQgPSBldmVudC53aW5uZXJPdXRjb21lSWQ7XHJcbiAgICAgICAgaWYgKCF3aW5uZXJPdXRjb21lSWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnREb2MuaWQpLCB3aGVyZSgnc3RhdHVzJywgJz09JywgJ3BlbmRpbmcnKSk7XHJcbiAgICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBiZXREb2Mgb2YgYmV0c1NuYXAuZG9jcykge1xyXG4gICAgICAgICAgY29uc3QgYmV0ID0gYmV0RG9jLmRhdGEoKTtcclxuICAgICAgICAgIC8vIERvdWJsZSBjaGVjayBpdCdzIHBlbmRpbmdcclxuICAgICAgICAgIGlmIChiZXQuc3RhdHVzICE9PSAncGVuZGluZycpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGlzV2lubmVyID0gYmV0Lm91dGNvbWVJZCA9PT0gd2lubmVyT3V0Y29tZUlkO1xyXG4gICAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgYmV0LnVzZXJJZCk7XHJcblxyXG4gICAgICAgICAgbGV0IHBlcmNlbnRDaGFuZ2UgPSAwO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gRmV0Y2ggVXNlciBmb3IgTmV0IFdvcnRoIENhbGNcclxuICAgICAgICAgICAgY29uc3QgdXNlclNuYXAgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclNuYXAuZXhpc3RzKCkgPyB1c2VyU25hcC5kYXRhKCkgOiB7IGJhbGFuY2U6IDAsIGludmVzdGVkOiAwIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROZXRXb3J0aCA9ICh1c2VyRGF0YS5iYWxhbmNlIHx8IDApICsgKHVzZXJEYXRhLmludmVzdGVkIHx8IDApO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvZml0IChvciBMb3NzKSBmcm9tIHRoaXMgc3BlY2lmaWMgYmV0XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2ZpdCA9IGlzV2lubmVyXHJcbiAgICAgICAgICAgICAgPyAoYmV0LnBvdGVudGlhbFBheW91dCAtIGJldC5hbW91bnQpIC8vIE5ldCBQcm9maXRcclxuICAgICAgICAgICAgICA6IC1iZXQuYW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV0IExvc3NcclxuXHJcbiAgICAgICAgICAgIC8vIFBvcnRmb2xpbyBJbXBhY3QgJSA9IChQcm9maXQgLyBjdXJyZW50TmV0V29ydGgpICogMTAwXHJcbiAgICAgICAgICAgIHBlcmNlbnRDaGFuZ2UgPSBjdXJyZW50TmV0V29ydGggPiAwXHJcbiAgICAgICAgICAgICAgPyAocHJvZml0IC8gY3VycmVudE5ldFdvcnRoKSAqIDEwMFxyXG4gICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IH1cclxuXHJcbiAgICAgICAgICBiYXRjaC51cGRhdGUoYmV0RG9jLnJlZiwge1xyXG4gICAgICAgICAgICBzdGF0dXM6IGlzV2lubmVyID8gJ3dvbicgOiAnbG9zdCcsXHJcbiAgICAgICAgICAgIHNldHRsZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoaXNXaW5uZXIpIHtcclxuICAgICAgICAgICAgYmF0Y2gudXBkYXRlKHVzZXJSZWYsIHtcclxuICAgICAgICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoYmV0LnBvdGVudGlhbFBheW91dCksXHJcbiAgICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudCksXHJcbiAgICAgICAgICAgICAgbGFzdEJldFBlcmNlbnQ6IHBlcmNlbnRDaGFuZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiYXRjaC51cGRhdGUodXNlclJlZiwge1xyXG4gICAgICAgICAgICAgIGludmVzdGVkOiBpbmNyZW1lbnQoLWJldC5hbW91bnQpLFxyXG4gICAgICAgICAgICAgIGxhc3RCZXRQZXJjZW50OiBwZXJjZW50Q2hhbmdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdG90YWxGaXhlZCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRvdGFsRml4ZWQgPiAwKSB7XHJcbiAgICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYEZpeGVkICR7dG90YWxGaXhlZH0gc3R1Y2sgYmV0cy5gIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG5cclxuICBjb25zdCBkZWxldGVCZXQgPSBhc3luYyAoYmV0SWQpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdiZXRzJywgYmV0SWQpKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZUV2ZW50ID0gYXN5bmMgKGV2ZW50SWQsIGRhdGEpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSwgZGF0YSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBzZXRNYWluQmV0ID0gYXN5bmMgKGV2ZW50SWQsIG1haW5PdXRjb21lSWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgICAgY29uc3QgZXZlbnRSZWYgPSBkb2MoZGIsICdldmVudHMnLCBldmVudElkKTtcclxuICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvYyhldmVudFJlZik7XHJcbiAgICAgIGlmICghc25hcC5leGlzdHMoKSkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkV2ZW50IG5vdCBmb3VuZFwiIH07XHJcblxyXG4gICAgICBjb25zdCBldnQgPSBzbmFwLmRhdGEoKTtcclxuICAgICAgLy8gUmVtb3ZlICdtYWluJyB0eXBlIGZyb20gYWxsLCB0aGVuIHNldCBpdCBmb3IgdGhlIGNob3NlbiBvbmUgcGx1cyBpdHMgc2libGluZz9cclxuICAgICAgLy8gV2FpdCwgXCJNYWluIEJldFwiIHVzdWFsbHkgaW1wbGllcyBhIFBBSVIgb2Ygb3V0Y29tZXMgKGUuZy4gQ2hpZWZzIHZzIDQ5ZXJzKS5cclxuICAgICAgLy8gSWYgdGhlIHVzZXIgc2VsZWN0cyBcIkNoaWVmc1wiIGFzIG1haW4sIHdlIGxpa2VseSB3YW50IFwiNDllcnNcIiAodGhlIG90aGVyIG9uZSBpbiB0aGF0IHBhaXIpIHRvIGFsc28gYmUgbWFpbi5cclxuICAgICAgLy8gQnV0IG91dGNvbWVzIGFyZSBqdXN0IGEgZmxhdCBsaXN0LiBcclxuICAgICAgLy8gU2ltcGxpZmljYXRpb246IFRoZSBhZG1pbiBjbGlja3MgXCJIaWdobGlnaHQgVGhpcyBQYWlyXCIgb24gb25lIG91dGNvbWUsIGFuZCB3ZSBhc3N1bWUgdGhlIG5leHQgb25lIGlzIGl0cyBwYWlyP1xyXG4gICAgICAvLyBPciB3ZSBqdXN0IGZsYWcgVEhJUyBvdXRjb21lJ3MgcGFpciBhcyBtYWluLlxyXG5cclxuICAgICAgLy8gTGV0J3MgaXRlcmF0ZSBhbmQganVzdCB0b2dnbGUgdGhlIHR5cGUgJ21haW4nIGZvciB0aGUgdGFyZ2V0ZWQgb3V0Y29tZShzKS5cclxuICAgICAgLy8gQWN0dWFsbHksIGNsZWFuZXIgZGVzaWduOiB0b2dnbGUgXCJ0eXBlOiBtYWluXCIgZm9yIHNwZWNpZmljIG91dGNvbWVzLlxyXG5cclxuICAgICAgY29uc3QgbmV3T3V0Y29tZXMgPSBldnQub3V0Y29tZXMubWFwKG8gPT4ge1xyXG4gICAgICAgIGlmIChvLmlkID09PSBtYWluT3V0Y29tZUlkKSByZXR1cm4geyAuLi5vLCB0eXBlOiAnbWFpbicgfTtcclxuICAgICAgICAvLyBJZiB3ZSB3YW50IHRvIHVuc2V0IG90aGVycz8gTWF5YmUgbm90LCBtYXliZSBtdWx0aXBsZSBtYWluIGJldHMgYWxsb3dlZC5cclxuICAgICAgICByZXR1cm4gbztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZXZlbnRSZWYsIHsgb3V0Y29tZXM6IG5ld091dGNvbWVzIH0pO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc3VibWl0SWRlYSA9IGFzeW5jIChpZGVhVGV4dCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOb3QgbG9nZ2VkIGluJyB9O1xyXG5cclxuICAgIC8vIER1cGxpY2F0ZSBDaGVja1xyXG4gICAgY29uc3QgcUR1cCA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlci5pZCksIHdoZXJlKCd0ZXh0JywgJz09JywgaWRlYVRleHQpKTtcclxuICAgIGNvbnN0IHNuYXBEdXAgPSBhd2FpdCBnZXREb2NzKHFEdXApO1xyXG4gICAgaWYgKCFzbmFwRHVwLmVtcHR5KSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJZb3UgYWxyZWFkeSBzdWdnZXN0ZWQgdGhpcyEgSGV5IHN3aXRjaCBpdCB1cC5cIiB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIERhaWx5IExpbWl0IChDbGllbnQtc2lkZSBjaGVjayBiYXNlZCBvbiBsb2NhbCB1c2VyIGRhdGEsIGlkZWFsbHkgYmFja2VuZCBkb2VzIHRoaXMpXHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICBsZXQgY3VycmVudENvdW50ID0gMDtcclxuXHJcbiAgICBpZiAodXNlci5zdWJtaXNzaW9uRGF0YSAmJiB1c2VyLnN1Ym1pc3Npb25EYXRhLmRhdGUgPT09IHRvZGF5KSB7XHJcbiAgICAgIGN1cnJlbnRDb3VudCA9IHVzZXIuc3VibWlzc2lvbkRhdGEuY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnJlbnRDb3VudCA+PSA1KSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RhaWx5IGxpbWl0IHJlYWNoZWQgKDUvNSkuIENvbWUgYmFjayB0b21vcnJvdyEnIH07XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gQ3JlYXRlIElkZWEgRG9jXHJcbiAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwge1xyXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICB0ZXh0OiBpZGVhVGV4dCxcclxuICAgICAgICBzdWJtaXR0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMi4gVXBkYXRlIFVzZXIgKFJld2FyZCArIFN1Ym1pc3Npb24gQ291bnQpXHJcbiAgICAgIC8vIElmIGRhdGUgZGlmZmVyZW50LCBzaW1wbGUgc2V0LiBJZiBzYW1lLCBpbmNyZW1lbnQuXHJcbiAgICAgIC8vIEZpcmVzdG9yZSB1cGRhdGUgaXMgdHJpY2t5IHdpdGggbmVzdGVkIG9iamVjdHMsIHNvIHdlIHNldCB0aGUgd2hvbGUgb2JqZWN0LlxyXG4gICAgICAvLyBXZSBjYWxjdWxhdGUgbmV3IGNvdW50IGxvY2FsbHkgdG8gZW5zdXJlIHN5bmMgd2l0aCB0aGUgY2hlY2suXHJcblxyXG4gICAgICBjb25zdCBuZXdDb3VudCA9IGN1cnJlbnRDb3VudCArIDE7XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKSwge1xyXG4gICAgICAgIGJhbGFuY2U6IGluY3JlbWVudCgxNSksIC8vIFJld2FyZFxyXG4gICAgICAgIHN1Ym1pc3Npb25EYXRhOiB7XHJcbiAgICAgICAgICBkYXRlOiB0b2RheSxcclxuICAgICAgICAgIGNvdW50OiBuZXdDb3VudFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnSWRlYSBzdWJtaXR0ZWQhICskMTUuMDAnIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlVXNlckdyb3VwcyA9IGFzeW5jICh0YXJnZXRVc2VySWQsIGdyb3VwcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB0YXJnZXRVc2VySWQpO1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclJlZiwgeyBncm91cHM6IGdyb3VwcyB8fCBbXSB9KTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUlkZWEgPSBhc3luYyAoaWRlYUlkKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnaWRlYXMnLCBpZGVhSWQpKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luYyAodXBkYXRlcykgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOb3QgbG9nZ2VkIGluJyB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIFVwZGF0ZSBGaXJlc3RvcmUgRklSU1QgKFByb2ZpbGUgUGljLCBVc2VybmFtZSwgZXRjLilcclxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgbm9uLXNlbnNpdGl2ZSB1cGRhdGVzIGFsd2F5cyBzdWNjZWVkIGV2ZW4gaWYgQXV0aCBmYWlscy5cclxuICAgICAgY29uc3QgZmlyZXN0b3JlVXBkYXRlcyA9IHsgLi4udXBkYXRlcyB9O1xyXG4gICAgICBkZWxldGUgZmlyZXN0b3JlVXBkYXRlcy5wYXNzd29yZDsgLy8gRG9uJ3Qgc3RvcmUgcmF3IHBhc3N3b3JkIGluIERCXHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKSwgZmlyZXN0b3JlVXBkYXRlcyk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGUgaW1tZWRpYXRlbHkgZm9yIHRoZSBVSVxyXG4gICAgICBzZXRVc2VyKHByZXYgPT4gKHsgLi4ucHJldiwgLi4uZmlyZXN0b3JlVXBkYXRlcyB9KSk7XHJcblxyXG4gICAgICAvLyAyLiBBdHRlbXB0IEF1dGggVXBkYXRlcyAoU2Vuc2l0aXZlOiBFbWFpbC9QYXNzd29yZClcclxuICAgICAgbGV0IGF1dGhVcGRhdGVkID0gZmFsc2U7XHJcbiAgICAgIGxldCBhdXRoRXJyb3JNc2cgPSAnJztcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIEVtYWlsXHJcbiAgICAgICAgaWYgKHVwZGF0ZXMuZW1haWwgJiYgYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudEF1dGhFbWFpbCA9IGF1dGguY3VycmVudFVzZXIuZW1haWw7XHJcbiAgICAgICAgICBpZiAodXBkYXRlcy5lbWFpbC50b0xvd2VyQ2FzZSgpICE9PSBjdXJyZW50QXV0aEVtYWlsLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYERlYnVnOiBBdHRlbXB0aW5nIGVtYWlsIHVwZGF0ZSBmcm9tICR7Y3VycmVudEF1dGhFbWFpbH0gdG8gJHt1cGRhdGVzLmVtYWlsfWApO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUVtYWlsKGF1dGguY3VycmVudFVzZXIsIHVwZGF0ZXMuZW1haWwpO1xyXG4gICAgICAgICAgICAgIGF1dGhVcGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZW1haWxFcnIpIHtcclxuICAgICAgICAgICAgICBpZiAoZW1haWxFcnIuY29kZSA9PT0gJ2F1dGgvb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyB8fCBlbWFpbEVyci5tZXNzYWdlLmluY2x1ZGVzKCd2ZXJpZnknKSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwoYXV0aC5jdXJyZW50VXNlciwgdXBkYXRlcy5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgUHJvZmlsZSBzYXZlZCAmIFZlcmlmaWNhdGlvbiBzZW50IHRvICR7dXBkYXRlcy5lbWFpbH0uYCB9O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aHJvdyBlbWFpbEVycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIFBhc3N3b3JkXHJcbiAgICAgICAgaWYgKHVwZGF0ZXMucGFzc3dvcmQgJiYgdXBkYXRlcy5wYXNzd29yZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpZiAoYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVQYXNzd29yZChhdXRoLmN1cnJlbnRVc2VyLCB1cGRhdGVzLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgYXV0aFVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRm9yY2UgcmVmcmVzaCBpZiBBdXRoIGNoYW5nZWRcclxuICAgICAgICBpZiAoYXV0aFVwZGF0ZWQgJiYgYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgYXdhaXQgYXV0aC5jdXJyZW50VXNlci5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGNhdGNoIChhdXRoRXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkF1dGggVXBkYXRlIEZhaWxlZDpcIiwgYXV0aEVycik7XHJcbiAgICAgICAgaWYgKGF1dGhFcnIuY29kZSA9PT0gJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJykge1xyXG4gICAgICAgICAgYXV0aEVycm9yTXNnID0gXCIgKE5vdGU6IFJlLWxvZ2luIHJlcXVpcmVkIHRvIHVwZGF0ZSBFbWFpbC9QYXNzd29yZClcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXV0aEVycm9yTXNnID0gYCAoQXV0aCBFcnJvcjogJHthdXRoRXJyLm1lc3NhZ2V9KWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzdWNjZXNzTXNnID0gYXV0aFVwZGF0ZWRcclxuICAgICAgICA/ICdBY2NvdW50ICYgUHJvZmlsZSB1cGRhdGVkISdcclxuICAgICAgICA6ICdQcm9maWxlIHVwZGF0ZWQhJyArIGF1dGhFcnJvck1zZztcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGF1dGhVcGRhdGVkID8gJ0FjY291bnQgJiBQcm9maWxlIHVwZGF0ZWQhJyA6ICdQcm9maWxlIHVwZGF0ZWQhJyArIGF1dGhFcnJvck1zZyB9O1xyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZpcmVzdG9yZSBVcGRhdGUgRXJyb3I6XCIsIGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVjYWxjdWxhdGVMZWFkZXJib2FyZCA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBwZW5kaW5nIGJldHNcclxuICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgnc3RhdHVzJywgJz09JywgJ3BlbmRpbmcnKSk7XHJcbiAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7XHJcbiAgICAgIC8vIElmIGluZGV4IG1pc3NpbmcsIHRoaXMgbGluZSB0aHJvd3MuXHJcblxyXG4gICAgICBjb25zdCBpbnZlc3RtZW50c0J5VXNlciA9IHt9O1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBjb25zdCBiZXQgPSBkb2MuZGF0YSgpO1xyXG4gICAgICAgIGlmICghaW52ZXN0bWVudHNCeVVzZXJbYmV0LnVzZXJJZF0pIGludmVzdG1lbnRzQnlVc2VyW2JldC51c2VySWRdID0gMDtcclxuICAgICAgICBpbnZlc3RtZW50c0J5VXNlcltiZXQudXNlcklkXSArPSAoYmV0LmFtb3VudCB8fCAwKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBGZXRjaCBhbGwgdXNlcnMgdG8gdXBkYXRlIHRoZWlyIHN0YXRzXHJcbiAgICAgIGNvbnN0IHVzZXJzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ3VzZXJzJykpO1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgdXBkYXRlQ291bnQgPSAwO1xyXG5cclxuICAgICAgdXNlcnNTbmFwLmRvY3MuZm9yRWFjaCh1c2VyRG9jID0+IHtcclxuICAgICAgICBjb25zdCB1aWQgPSB1c2VyRG9jLmlkO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbnZlc3RlZCA9IHVzZXJEb2MuZGF0YSgpLmludmVzdGVkIHx8IDA7XHJcbiAgICAgICAgY29uc3QgY29ycmVjdEludmVzdGVkID0gaW52ZXN0bWVudHNCeVVzZXJbdWlkXSB8fCAwO1xyXG5cclxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBkaWZmZXJlbnQgdG8gc2F2ZSB3cml0ZXNcclxuICAgICAgICBpZiAoTWF0aC5hYnMoY3VycmVudEludmVzdGVkIC0gY29ycmVjdEludmVzdGVkKSA+IDAuMDEpIHtcclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyRG9jLnJlZiwgeyBpbnZlc3RlZDogY29ycmVjdEludmVzdGVkIH0pO1xyXG4gICAgICAgICAgdXBkYXRlQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHVwZGF0ZUNvdW50ID4gMCkgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBSZWNhbGN1bGF0ZWQhIFVwZGF0ZWQgJHt1cGRhdGVDb3VudH0gdXNlcnMuYCB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiUmVjYWxjIERldGFpbGVkIEVycm9yOlwiLCBlKTtcclxuICAgICAgbGV0IGVyck1zZyA9IGUubWVzc2FnZSB8fCBTdHJpbmcoZSk7XHJcbiAgICAgIGlmIChlcnJNc2cuaW5jbHVkZXMoXCJpbmRleFwiKSkgZXJyTXNnID0gXCJNaXNzaW5nIEluZGV4ISBDaGVjayBCcm93c2VyIENvbnNvbGUgKEYxMikgZm9yIHRoZSBjcmVhdGlvbiBsaW5rLlwiO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVyck1zZyB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGJhY2tmaWxsTGFzdEJldFBlcmNlbnQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIEJhY2tmaWxsLi4uXCIpO1xyXG4gICAgICBjb25zdCB1c2Vyc1NuYXAgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICd1c2VycycpKTtcclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuICAgICAgbGV0IHVwZGF0ZUNvdW50ID0gMDtcclxuXHJcbiAgICAgIC8vIFByb2Nlc3MgdXNlcnMgaW4gY2h1bmtzIHRvIGF2b2lkIGJsb3dpbmcgdXAgbWVtb3J5L2JhdGNoIGxpbWl0cyBpZiBtYW55IHVzZXJzXHJcbiAgICAgIC8vIEJ1dCBmb3IgPDUwMCB1c2VycywgbG9vcCBpcyBmaW5lLiBCYXRjaCBsaW1pdCBpcyA1MDAgb3BzLlxyXG5cclxuICAgICAgZm9yIChjb25zdCB1c2VyRG9jIG9mIHVzZXJzU25hcC5kb2NzKSB7XHJcbiAgICAgICAgY29uc3QgdWlkID0gdXNlckRvYy5pZDtcclxuXHJcbiAgICAgICAgLy8gR2V0IGFsbCBiZXRzIGZvciB1c2VyICh3ZSBjcmF2ZSB0aGUgbW9zdCByZWNlbnQgc2V0dGxlZCBvbmUpXHJcbiAgICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdWlkKSk7XHJcbiAgICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuXHJcbiAgICAgICAgbGV0IGxhc3RTZXR0bGVkQmV0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gRmluZCBsYXRlc3Qgc2V0dGxlZCBiZXQgaW4gbWVtb3J5XHJcbiAgICAgICAgY29uc3Qgc2V0dGxlZEJldHMgPSBiZXRzU25hcC5kb2NzXHJcbiAgICAgICAgICAubWFwKGQgPT4gKHsgLi4uZC5kYXRhKCksIGlkOiBkLmlkIH0pKVxyXG4gICAgICAgICAgLmZpbHRlcihiID0+IGIuc3RhdHVzID09PSAnd29uJyB8fCBiLnN0YXR1cyA9PT0gJ2xvc3QnKVxyXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZShhLnNldHRsZWRBdCB8fCBhLnBsYWNlZEF0IHx8IDApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlQiA9IG5ldyBEYXRlKGIuc2V0dGxlZEF0IHx8IGIucGxhY2VkQXQgfHwgMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlQiAtIGRhdGVBOyAvLyBEZXNjZW5kaW5nXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHNldHRsZWRCZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGxhc3RTZXR0bGVkQmV0ID0gc2V0dGxlZEJldHNbMF07XHJcblxyXG4gICAgICAgICAgY29uc3QgaXNXaW5uZXIgPSBsYXN0U2V0dGxlZEJldC5zdGF0dXMgPT09ICd3b24nO1xyXG4gICAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyRG9jLmRhdGEoKTtcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnROZXRXb3J0aCA9ICh1c2VyRGF0YS5iYWxhbmNlIHx8IDApICsgKHVzZXJEYXRhLmludmVzdGVkIHx8IDApO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHByb2ZpdCA9IGlzV2lubmVyXHJcbiAgICAgICAgICAgID8gKGxhc3RTZXR0bGVkQmV0LnBvdGVudGlhbFBheW91dCAtIGxhc3RTZXR0bGVkQmV0LmFtb3VudClcclxuICAgICAgICAgICAgOiAtbGFzdFNldHRsZWRCZXQuYW1vdW50O1xyXG5cclxuICAgICAgICAgIC8vIEFwcHJveGltYXRlIFByZS1CZXQgTmV0IFdvcnRoXHJcbiAgICAgICAgICAvLyBDdXJyZW50IE5ldCBXb3J0aCBET0VTIGluY2x1ZGUgdGhpcyBiZXQncyByZXN1bHQgKHNpbmNlIGl0J3Mgc2V0dGxlZCkuXHJcbiAgICAgICAgICAvLyBTbyB3ZSBzdWJ0cmFjdCB0aGUgcHJvZml0IHRvIGdldCB0aGUgcHJlLWJldCB2YWx1ZS5cclxuICAgICAgICAgIGNvbnN0IHByZUJldE5ldFdvcnRoID0gY3VycmVudE5ldFdvcnRoIC0gcHJvZml0O1xyXG5cclxuICAgICAgICAgIC8vIEF2b2lkIGRpdmlzaW9uIGJ5IHplcm9cclxuICAgICAgICAgIGNvbnN0IHBlcmNlbnRDaGFuZ2UgPSBwcmVCZXROZXRXb3J0aCA+IDBcclxuICAgICAgICAgICAgPyAocHJvZml0IC8gcHJlQmV0TmV0V29ydGgpICogMTAwXHJcbiAgICAgICAgICAgIDogMDtcclxuXHJcbiAgICAgICAgICBiYXRjaC51cGRhdGUodXNlckRvYy5yZWYsIHsgbGFzdEJldFBlcmNlbnQ6IHBlcmNlbnRDaGFuZ2UgfSk7XHJcbiAgICAgICAgICB1cGRhdGVDb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHVwZGF0ZUNvdW50ID4gMCkgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBVcGRhdGVkICR7dXBkYXRlQ291bnR9IHVzZXJzIHdpdGggbGFzdCBiZXQgc3RhdHMuYCB9O1xyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZW1vdGVTZWxmID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKSwgeyByb2xlOiAndXNlcicgfSk7XHJcbiAgICAgIC8vIHNldFVzZXIoey4uLnVzZXIsIHJvbGU6ICd1c2VyJ30pOyAvLyBPcHRpbWlzdGljIHVwZGF0ZVxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlQWNjb3VudCA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIuaWQ7XHJcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcbiAgICAgIGxldCBvcENvdW50ID0gMDtcclxuXHJcbiAgICAgIC8vIDEuIERlbGV0ZSBhbGwgdXNlcidzIGJldHNcclxuICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7XHJcbiAgICAgIGJldHNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGJhdGNoLmRlbGV0ZShkb2MucmVmKTtcclxuICAgICAgICBvcENvdW50Kys7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMi4gRGVsZXRlIGFsbCB1c2VyJ3MgaWRlYXNcclxuICAgICAgY29uc3QgaWRlYXNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2lkZWFzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcclxuICAgICAgY29uc3QgaWRlYXNTbmFwID0gYXdhaXQgZ2V0RG9jcyhpZGVhc1EpO1xyXG4gICAgICBpZGVhc1NuYXAuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgYmF0Y2guZGVsZXRlKGRvYy5yZWYpO1xyXG4gICAgICAgIG9wQ291bnQrKztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAzLiBEZWxldGUgVXNlciBQcm9maWxlXHJcbiAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XHJcbiAgICAgIGJhdGNoLmRlbGV0ZSh1c2VyUmVmKTtcclxuICAgICAgb3BDb3VudCsrO1xyXG5cclxuICAgICAgaWYgKG9wQ291bnQgPiAwKSB7XHJcbiAgICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDQuIERlbGV0ZSBBdXRoIEFjY291bnRcclxuICAgICAgaWYgKGF1dGguY3VycmVudFVzZXIpIHtcclxuICAgICAgICBhd2FpdCBhdXRoLmN1cnJlbnRVc2VyLmRlbGV0ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZWxldGUgRXJyb3I6XCIsIGUpO1xyXG4gICAgICBpZiAoZS5jb2RlID09PSAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlBsZWFzZSBsb2cgb3V0IGFuZCBsb2cgaW4gYWdhaW4gdG8gZGVsZXRlIHlvdXIgYWNjb3VudC5cIiB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlVXNlciA9IGFzeW5jICh0YXJnZXRVc2VySWQpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEhlbHBlciB0byBkZWxldGUgaW4gYmF0Y2hlc1xyXG4gICAgICBjb25zdCBjb21taXRCYXRjaEJ1ZmZlciA9IGFzeW5jIChkb2NzVG9EZWxldGUpID0+IHtcclxuICAgICAgICBjb25zdCBDSFVOS19TSVpFID0gNDAwOyAvLyBTYWZldHkgbWFyZ2luIGJlbG93IDUwMFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jc1RvRGVsZXRlLmxlbmd0aDsgaSArPSBDSFVOS19TSVpFKSB7XHJcbiAgICAgICAgICBjb25zdCBjaHVuayA9IGRvY3NUb0RlbGV0ZS5zbGljZShpLCBpICsgQ0hVTktfU0laRSk7XHJcbiAgICAgICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICAgICAgY2h1bmsuZm9yRWFjaChyZWYgPT4gYmF0Y2guZGVsZXRlKHJlZikpO1xyXG4gICAgICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgYWxsRG9jc1RvRGVsZXRlID0gW107XHJcblxyXG4gICAgICAvLyAxLiBCZXRzXHJcbiAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSkpO1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZCA9PiBhbGxEb2NzVG9EZWxldGUucHVzaChkLnJlZikpO1xyXG5cclxuICAgICAgLy8gMi4gSWRlYXNcclxuICAgICAgY29uc3QgaWRlYXNTbmFwID0gYXdhaXQgZ2V0RG9jcyhxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHRhcmdldFVzZXJJZCkpKTtcclxuICAgICAgaWRlYXNTbmFwLmRvY3MuZm9yRWFjaChkID0+IGFsbERvY3NUb0RlbGV0ZS5wdXNoKGQucmVmKSk7XHJcblxyXG4gICAgICAvLyAzLiBDb21tZW50cyAoTmV3KVxyXG4gICAgICBjb25zdCBjb21tZW50c1NuYXAgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdjb21tZW50cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSkpO1xyXG4gICAgICBjb21tZW50c1NuYXAuZG9jcy5mb3JFYWNoKGQgPT4gYWxsRG9jc1RvRGVsZXRlLnB1c2goZC5yZWYpKTtcclxuXHJcbiAgICAgIC8vIDQuIE5vdGlmaWNhdGlvbnMgKE5ldylcclxuICAgICAgY29uc3Qgbm90aWZTbmFwID0gYXdhaXQgZ2V0RG9jcyhxdWVyeShjb2xsZWN0aW9uKGRiLCAnbm90aWZpY2F0aW9ucycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSkpO1xyXG4gICAgICBub3RpZlNuYXAuZG9jcy5mb3JFYWNoKGQgPT4gYWxsRG9jc1RvRGVsZXRlLnB1c2goZC5yZWYpKTtcclxuXHJcbiAgICAgIC8vIDUuIFVzZXIgUHJvZmlsZVxyXG4gICAgICBhbGxEb2NzVG9EZWxldGUucHVzaChkb2MoZGIsICd1c2VycycsIHRhcmdldFVzZXJJZCkpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYERlbGV0aW5nIHVzZXIgJHt0YXJnZXRVc2VySWR9OiAke2FsbERvY3NUb0RlbGV0ZS5sZW5ndGh9IGRvY3VtZW50cyB0b3RhbC5gKTtcclxuXHJcbiAgICAgIGF3YWl0IGNvbW1pdEJhdGNoQnVmZmVyKGFsbERvY3NUb0RlbGV0ZSk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZWxldGUgVXNlciBFcnJvcjpcIiwgZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc3luY0V2ZW50U3RhdHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBGZXRjaCBhbGwgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2JldHMnKSk7XHJcbiAgICAgIGNvbnN0IGFsbEJldHMgPSBiZXRzU25hcC5kb2NzLm1hcChkID0+IGQuZGF0YSgpKTtcclxuXHJcbiAgICAgIC8vIDIuIEFnZ3JlZ2F0ZSBTdGF0c1xyXG4gICAgICBjb25zdCBzdGF0c01hcCA9IHt9OyAvLyBldmVudElkIC0+IHsgY291bnRzOiB7fSwgYW1vdW50czoge30sIHRvdGFsQmV0czogMCwgdG90YWxQb29sOiAwIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3QgYmV0IG9mIGFsbEJldHMpIHtcclxuICAgICAgICBpZiAoIXN0YXRzTWFwW2JldC5ldmVudElkXSkge1xyXG4gICAgICAgICAgc3RhdHNNYXBbYmV0LmV2ZW50SWRdID0geyBjb3VudHM6IHt9LCBhbW91bnRzOiB7fSwgdG90YWxCZXRzOiAwLCB0b3RhbFBvb2w6IDAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcyA9IHN0YXRzTWFwW2JldC5ldmVudElkXTtcclxuICAgICAgICBzLnRvdGFsQmV0cyArPSAxO1xyXG4gICAgICAgIHMudG90YWxQb29sICs9IChiZXQuYW1vdW50IHx8IDApO1xyXG4gICAgICAgIHMuY291bnRzW2JldC5vdXRjb21lSWRdID0gKHMuY291bnRzW2JldC5vdXRjb21lSWRdIHx8IDApICsgMTtcclxuICAgICAgICBzLmFtb3VudHNbYmV0Lm91dGNvbWVJZF0gPSAocy5hbW91bnRzW2JldC5vdXRjb21lSWRdIHx8IDApICsgKGJldC5hbW91bnQgfHwgMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDMuIFVwZGF0ZSBFdmVudHNcclxuICAgICAgY29uc3QgZXZlbnRzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpKTtcclxuICAgICAgY29uc3QgdXBkYXRlUHJvbWlzZXMgPSBldmVudHNTbmFwLmRvY3MubWFwKGFzeW5jIChkb2NTbmFwKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBzdGF0c01hcFtkb2NTbmFwLmlkXSB8fCB7IGNvdW50czoge30sIGFtb3VudHM6IHt9LCB0b3RhbEJldHM6IDAsIHRvdGFsUG9vbDogMCB9O1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBkb2NTbmFwLmlkKSwgeyBzdGF0cyB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVQcm9taXNlcyk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBhZGRDb21tZW50ID0gYXN5bmMgKGV2ZW50SWQsIHRleHQpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTG9naW4gdG8gY29tbWVudCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnREYXRhID0ge1xyXG4gICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIHRleHQsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdjb21tZW50cycpLCBjb21tZW50RGF0YSk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgRXZlbnQgd2l0aCBsYXN0Q29tbWVudCBmb3IgcHJldmlld1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCksIHtcclxuICAgICAgICBsYXN0Q29tbWVudDoge1xyXG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgICB0ZXh0OiB0ZXh0Lmxlbmd0aCA+IDUwID8gdGV4dC5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicgOiB0ZXh0LFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBjb21tZW50RGF0YS5jcmVhdGVkQXRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUNvbW1lbnQgPSBhc3luYyAoY29tbWVudElkKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBHZXQgY29tbWVudCBkZXRhaWxzIGJlZm9yZSBkZWxldGluZyAodG8gZmluZCBwYXJlbnQgZXZlbnQpXHJcbiAgICAgIGNvbnN0IGNvbW1lbnRSZWYgPSBkb2MoZGIsICdjb21tZW50cycsIGNvbW1lbnRJZCk7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnRTbmFwID0gYXdhaXQgZ2V0RG9jKGNvbW1lbnRSZWYpO1xyXG5cclxuICAgICAgaWYgKCFjb21tZW50U25hcC5leGlzdHMoKSkge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NvbW1lbnQgYWxyZWFkeSBkZWxldGVkJyB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB2YWwgPSBjb21tZW50U25hcC5kYXRhKCk7XHJcbiAgICAgIGNvbnN0IGV2ZW50SWQgPSB2YWwuZXZlbnRJZDtcclxuICAgICAgY29uc3QgY29tbWVudENyZWF0ZWRBdCA9IHZhbC5jcmVhdGVkQXQ7XHJcblxyXG4gICAgICAvLyAyLiBEZWxldGUgdGhlIGNvbW1lbnRcclxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGNvbW1lbnRSZWYpO1xyXG5cclxuICAgICAgLy8gMy4gQ2hlY2sgaWYgdGhpcyB3YXMgdGhlIFwibGFzdENvbW1lbnRcIiBvbiB0aGUgZXZlbnQgY2FyZFxyXG4gICAgICBpZiAoZXZlbnRJZCkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50UmVmID0gZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCk7XHJcbiAgICAgICAgY29uc3QgZXZlbnRTbmFwID0gYXdhaXQgZ2V0RG9jKGV2ZW50UmVmKTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50U25hcC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gZXZlbnRTbmFwLmRhdGEoKTtcclxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBkaXNwbGF5ZWQgbGFzdENvbW1lbnQgbWF0Y2hlcyB0aGUgb25lIHdlIGp1c3QgZGVsZXRlZFxyXG4gICAgICAgICAgaWYgKGV2ZW50RGF0YS5sYXN0Q29tbWVudCAmJiBldmVudERhdGEubGFzdENvbW1lbnQuY3JlYXRlZEF0ID09PSBjb21tZW50Q3JlYXRlZEF0KSB7XHJcbiAgICAgICAgICAgIC8vIEl0IHdhcyB0aGUgb25lIGRpc3BsYXllZCEgV2UgbmVlZCB0byBmaW5kIHRoZSBuZXcgbGF0ZXN0IGNvbW1lbnQuXHJcbiAgICAgICAgICAgIC8vIEZldGNoIGFsbCByZW1haW5pbmcgY29tbWVudHMgZm9yIHRoaXMgZXZlbnRcclxuICAgICAgICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdjb21tZW50cycpLCB3aGVyZSgnZXZlbnRJZCcsICc9PScsIGV2ZW50SWQpKTtcclxuICAgICAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNuYXAuZW1wdHkpIHtcclxuICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBuZXdlc3Qgb25lXHJcbiAgICAgICAgICAgICAgY29uc3QgYWxsID0gc25hcC5kb2NzLm1hcChkID0+IGQuZGF0YSgpKTtcclxuICAgICAgICAgICAgICBhbGwuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkQXQpIC0gbmV3IERhdGUoYS5jcmVhdGVkQXQpKTtcclxuICAgICAgICAgICAgICBjb25zdCBuZXdlc3QgPSBhbGxbMF07XHJcblxyXG4gICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwge1xyXG4gICAgICAgICAgICAgICAgbGFzdENvbW1lbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IG5ld2VzdC51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgdGV4dDogbmV3ZXN0LnRleHQubGVuZ3RoID4gNTAgPyBuZXdlc3QudGV4dC5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicgOiBuZXdlc3QudGV4dCxcclxuICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXdlc3QuY3JlYXRlZEF0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gTm8gY29tbWVudHMgbGVmdFxyXG4gICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwge1xyXG4gICAgICAgICAgICAgICAgbGFzdENvbW1lbnQ6IGRlbGV0ZUZpZWxkKClcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1hcmtOb3RpZmljYXRpb25SZWFkID0gYXN5bmMgKG5vdGlmSWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdub3RpZmljYXRpb25zJywgbm90aWZJZCksIHsgcmVhZDogdHJ1ZSB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgY29uc3QgZ2V0VXNlclN0YXRzID0gYXN5bmMgKHRhcmdldFVzZXJJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdGFyZ2V0VXNlcklkKTtcclxuICAgICAgY29uc3QgdXNlclNuYXAgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclNuYXAuZXhpc3RzKCkgPyB1c2VyU25hcC5kYXRhKCkgOiB7fTtcclxuXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHRhcmdldFVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7XHJcbiAgICAgIGxldCB3aW5zID0gMDtcclxuICAgICAgbGV0IGxvc3NlcyA9IDA7XHJcbiAgICAgIGxldCBwcm9maXQgPSAwO1xyXG4gICAgICBsZXQgc2V0dGxlZENvdW50ID0gMDtcclxuXHJcbiAgICAgIHNuYXAuZG9jcy5mb3JFYWNoKGQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGIgPSBkLmRhdGEoKTtcclxuICAgICAgICBpZiAoYi5zdGF0dXMgPT09ICd3b24nKSB7XHJcbiAgICAgICAgICB3aW5zKys7XHJcbiAgICAgICAgICBzZXR0bGVkQ291bnQrKztcclxuICAgICAgICAgIHByb2ZpdCArPSAoKGIucG90ZW50aWFsUGF5b3V0IHx8IChiLmFtb3VudCAqIGIub2RkcykpIC0gYi5hbW91bnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYi5zdGF0dXMgPT09ICdsb3N0Jykge1xyXG4gICAgICAgICAgbG9zc2VzKys7XHJcbiAgICAgICAgICBzZXR0bGVkQ291bnQrKztcclxuICAgICAgICAgIHByb2ZpdCAtPSBiLmFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdG90YWwgPSBzbmFwLnNpemU7XHJcbiAgICAgIGNvbnN0IHdpblJhdGUgPSBzZXR0bGVkQ291bnQgPiAwID8gKCh3aW5zIC8gc2V0dGxlZENvdW50KSAqIDEwMCkudG9GaXhlZCgxKSA6IDA7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgc3RhdHM6IHsgd2lucywgbG9zc2VzLCB0b3RhbCwgd2luUmF0ZSwgcHJvZml0IH0sXHJcbiAgICAgICAgcHJvZmlsZTogeyBiaW86IHVzZXJEYXRhLmJpbyB8fCAnJywgcHJvZmlsZVBpYzogdXNlckRhdGEucHJvZmlsZVBpYywgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTsgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFdlZWtseUxlYWRlcmJvYXJkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgZGF5T2ZXZWVrID0gbm93LmdldERheSgpOyAvLyAwIChTdW4pIC0gNiAoU2F0KVxyXG4gICAgICBjb25zdCBzdGFydE9mV2VlayA9IG5ldyBEYXRlKG5vdyk7XHJcbiAgICAgIC8vIFJlc2V0IHRvIG1vc3QgcmVjZW50IFN1bmRheSAob3IgdG9kYXkgaWYgaXQgaXMgU3VuZGF5KVxyXG4gICAgICBzdGFydE9mV2Vlay5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBkYXlPZldlZWspO1xyXG4gICAgICBzdGFydE9mV2Vlay5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgY29uc3QgaXNvU3RyID0gc3RhcnRPZldlZWsudG9JU09TdHJpbmcoKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgd2Vla2x5IHN0YXRzIHNpbmNlOlwiLCBpc29TdHIpO1xyXG5cclxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdzdGF0dXMnLCAnaW4nLCBbJ3dvbicsICdsb3N0J10pLCB3aGVyZSgnc2V0dGxlZEF0JywgJz49JywgaXNvU3RyKSk7XHJcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG5cclxuICAgICAgY29uc3Qgc3RhdHMgPSB7fTtcclxuICAgICAgc25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBjb25zdCBiID0gZG9jLmRhdGEoKTtcclxuICAgICAgICBpZiAoIXN0YXRzW2IudXNlcklkXSkgc3RhdHNbYi51c2VySWRdID0gMDtcclxuICAgICAgICBpZiAoYi5zdGF0dXMgPT09ICd3b24nKSB7XHJcbiAgICAgICAgICAvLyBQcm9maXQgPSBQYXlvdXQgLSBXYWdlclxyXG4gICAgICAgICAgY29uc3QgcGF5b3V0ID0gYi5wb3RlbnRpYWxQYXlvdXQgfHwgKGIuYW1vdW50ICogYi5vZGRzKTtcclxuICAgICAgICAgIHN0YXRzW2IudXNlcklkXSArPSAocGF5b3V0IC0gYi5hbW91bnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBMb3NzID0gLVdhZ2VyXHJcbiAgICAgICAgICBzdGF0c1tiLnVzZXJJZF0gLT0gYi5hbW91bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGxlYWRlcmJvYXJkID0gT2JqZWN0LmVudHJpZXMoc3RhdHMpLm1hcCgoW3VzZXJJZCwgcHJvZml0XSkgPT4gKHsgdXNlcklkLCBwcm9maXQgfSkpO1xyXG4gICAgICBsZWFkZXJib2FyZC5zb3J0KChhLCBiKSA9PiBiLnByb2ZpdCAtIGEucHJvZml0KTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbGVhZGVyYm9hcmQgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIldlZWtseSBMZWFkZXJib2FyZCBFcnJvcjpcIiwgZSk7XHJcbiAgICAgIGxldCBtc2cgPSBlLm1lc3NhZ2U7XHJcbiAgICAgIGlmIChtc2cuaW5jbHVkZXMoXCJpbmRleFwiKSkgbXNnID0gXCJNaXNzaW5nIEluZGV4ISBDaGVjayBjb25zb2xlIChGMTIpIGZvciB0aGUgY3JlYXRpb24gbGluay5cIjtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBtc2cgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVTeXN0ZW1Bbm5vdW5jZW1lbnQgPSBhc3luYyAoZGF0YSkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCAnc3lzdGVtJywgJ2Fubm91bmNlbWVudCcpO1xyXG4gICAgICAvLyBNZXJnZSB0cnVlIHRvIGFsbG93IHBhcnRpYWwgdXBkYXRlcyBpZiBuZWVkZWQsIHRob3VnaCB1c3VhbGx5IHdlIHJlcGxhY2UgY29udGVudFxyXG4gICAgICBhd2FpdCBzZXREb2MoZG9jUmVmLCBkYXRhLCB7IG1lcmdlOiB0cnVlIH0pO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIGFsZXJ0KFwiRXJyb3IgcG9zdGluZyBhbm5vdW5jZW1lbnQ6IFwiICsgZS5tZXNzYWdlKTsgLy8gRGVidWdcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEFwcENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tcclxuICAgICAgdXNlciwgc2lnbnVwLCBzaWduaW4sIGxvZ291dCwgdXBkYXRlVXNlciwgc3VibWl0SWRlYSwgZGVsZXRlSWRlYSwgZGVsZXRlQWNjb3VudCwgZGVsZXRlVXNlciwgZGVtb3RlU2VsZiwgc3luY0V2ZW50U3RhdHMsXHJcbiAgICAgIGV2ZW50cywgY3JlYXRlRXZlbnQsIHJlc29sdmVFdmVudCwgdXBkYXRlRXZlbnQsIHVwZGF0ZUV2ZW50T3JkZXIsIGZpeFN0dWNrQmV0cywgZGVsZXRlQmV0LCBkZWxldGVFdmVudCwgdG9nZ2xlRmVhdHVyZWQsIHJlY2FsY3VsYXRlTGVhZGVyYm9hcmQsIGJhY2tmaWxsTGFzdEJldFBlcmNlbnQsIGFkZENvbW1lbnQsIGRlbGV0ZUNvbW1lbnQsIG1hcmtOb3RpZmljYXRpb25SZWFkLCBnZXRVc2VyU3RhdHMsIGdldFdlZWtseUxlYWRlcmJvYXJkLCBzZXRNYWluQmV0LCB1cGRhdGVVc2VyR3JvdXBzLCB1cGRhdGVTeXN0ZW1Bbm5vdW5jZW1lbnQsIHN5c3RlbUFubm91bmNlbWVudCxcclxuICAgICAgYmV0cywgcGxhY2VCZXQsIGlzTG9hZGVkLCBpc0ZpcmViYXNlOiB0cnVlLCB1c2VycywgaWRlYXMsIGRiXHJcbiAgICB9fT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9BcHBDb250ZXh0LlByb3ZpZGVyPlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VBcHAoKSB7XHJcbiAgcmV0dXJuIHVzZUNvbnRleHQoQXBwQ29udGV4dCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJvblNuYXBzaG90IiwicXVlcnkiLCJvcmRlckJ5IiwiZG9jIiwic2V0RG9jIiwidXBkYXRlRG9jIiwiZ2V0RG9jIiwid2hlcmUiLCJpbmNyZW1lbnQiLCJkZWxldGVEb2MiLCJnZXREb2NzIiwibGltaXQiLCJ3cml0ZUJhdGNoIiwiZGVsZXRlRmllbGQiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25PdXQiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJ1cGRhdGVFbWFpbCIsInVwZGF0ZVBhc3N3b3JkIiwidmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwiLCJkYiIsImF1dGgiLCJBcHBDb250ZXh0IiwiQXBwUHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJzZXRVc2VyIiwiZXZlbnRzIiwic2V0RXZlbnRzIiwiYmV0cyIsInNldEJldHMiLCJpZGVhcyIsInNldElkZWFzIiwiaXNMb2FkZWQiLCJzZXRJc0xvYWRlZCIsInRpbWVyIiwic2V0VGltZW91dCIsInByZXYiLCJjb25zb2xlIiwid2FybiIsImNsZWFyVGltZW91dCIsInVuc3Vic2NyaWJlUHJvZmlsZSIsInVuc3Vic2NyaWJlQXV0aCIsImZpcmViYXNlVXNlciIsImlkIiwidWlkIiwiZW1haWwiLCJ1c2VybmFtZSIsImRpc3BsYXlOYW1lIiwic3BsaXQiLCJyb2xlIiwidXNlclJlZiIsImRvY1NuYXAiLCJleGlzdHMiLCJkYXRhIiwibG9nIiwibmV3VXNlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJiYWxhbmNlIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidGhlbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJhbGVydCIsInVzZXJzIiwic2V0VXNlcnMiLCJzeXN0ZW1Bbm5vdW5jZW1lbnQiLCJzZXRTeXN0ZW1Bbm5vdW5jZW1lbnQiLCJhbm5vdW5jZW1lbnRSZWYiLCJ1bnN1YkFubm91bmNlbWVudCIsImV2ZW50c1F1ZXJ5IiwidW5zdWJFdmVudHMiLCJzbmFwc2hvdCIsImV2ZW50c0xpc3QiLCJkb2NzIiwibWFwIiwic29ydCIsImEiLCJiIiwib3JkZXJBIiwib3JkZXIiLCJ1bmRlZmluZWQiLCJvcmRlckIiLCJzdGF0dXMiLCJzdGFydEF0IiwiaWRlYXNRdWVyeSIsInVuc3ViSWRlYXMiLCJsaXN0Iiwic3VibWl0dGVkQXQiLCJ1c2Vyc1F1ZXJ5IiwidW5zdWJVc2VycyIsImJldHNRdWVyeSIsInVuc3ViQmV0cyIsIm15QmV0cyIsInBsYWNlZEF0Iiwic2lnbnVwIiwicGFzc3dvcmQiLCJyZXNwIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzaWduaW4iLCJlbWFpbE9yVXNlcm5hbWUiLCJ0cmltIiwiZSIsInVzZXJuYW1lSW5wdXQiLCJjb2wiLCJjYW5kaWRhdGVFbWFpbHMiLCJTZXQiLCJhZGRDYW5kaWRhdGVzIiwicGFyYW0iLCJ2YWwiLCJxIiwic25hcCIsImZvckVhY2giLCJhZGQiLCJjYXBpdGFsaXplZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJzaXplIiwidHJpZWQiLCJjYW5kaWRhdGVFbWFpbCIsImUyIiwiZW1haWxOb1doaXRlc3BhY2UiLCJyZXBsYWNlIiwiZTMiLCJwdXNoIiwiY29kZSIsImZpcnN0RW1haWwiLCJzdWdnZXN0ZWRFbWFpbCIsImxvZ291dCIsInBsYWNlQmV0IiwiZXZlbnRJZCIsIm91dGNvbWVJZCIsImFtb3VudCIsImV2ZW50IiwiZmluZCIsInFFeGlzdGluZyIsInNuYXBFeGlzdGluZyIsIm90aGVyU2lkZUJldCIsImQiLCJvdXRjb21lIiwib3V0Y29tZXMiLCJvIiwidG9kYXkiLCJ0b2RheVN0ciIsInRvRGF0ZVN0cmluZyIsInllc3RlcmRheSIsInNldERhdGUiLCJnZXREYXRlIiwieWVzdGVyZGF5U3RyIiwibmV3U3RyZWFrIiwiY3VycmVudFN0cmVhayIsImxhc3REYXRlIiwibGFzdEJldERhdGUiLCJuZXdMb25nZXN0IiwiTWF0aCIsIm1heCIsImxvbmdlc3RTdHJlYWsiLCJpbnZlc3RlZCIsInVzZXJJZCIsIm91dGNvbWVMYWJlbCIsImxhYmVsIiwiZXZlbnRUaXRsZSIsInRpdGxlIiwicGFyc2VGbG9hdCIsIm9kZHMiLCJwb3RlbnRpYWxQYXlvdXQiLCJldmVudFJlZiIsInN0YXRzRXJyIiwiY3JlYXRlRXZlbnQiLCJldmVudERhdGEiLCJ1cGRhdGVFdmVudE9yZGVyIiwibmV3T3JkZXIiLCJkZWxldGVFdmVudCIsInRvZ2dsZUZlYXR1cmVkIiwiY3VycmVudFN0YXR1cyIsImZlYXR1cmVkIiwicmVzb2x2ZUV2ZW50Iiwid2lubmVyT3V0Y29tZUlkIiwiYmF0Y2giLCJ1cGRhdGUiLCJiZXRzUSIsImJldHNTbmFwIiwiYmV0RG9jIiwiYmV0IiwiaXNXaW5uZXIiLCJwZXJjZW50Q2hhbmdlIiwidXNlclNuYXAiLCJ1c2VyRGF0YSIsImN1cnJlbnROZXRXb3J0aCIsInByb2ZpdCIsInJlZiIsInNldHRsZWRBdCIsImxhc3RCZXRQZXJjZW50Iiwibm90aWZSZWYiLCJzZXQiLCJ0eXBlIiwidG9GaXhlZCIsInJlYWQiLCJjb21taXQiLCJmaXhTdHVja0JldHMiLCJldmVudHNRIiwiZXZlbnRzU25hcCIsInRvdGFsRml4ZWQiLCJldmVudERvYyIsImRlbGV0ZUJldCIsImJldElkIiwidXBkYXRlRXZlbnQiLCJzZXRNYWluQmV0IiwibWFpbk91dGNvbWVJZCIsImV2dCIsIm5ld091dGNvbWVzIiwic3VibWl0SWRlYSIsImlkZWFUZXh0IiwicUR1cCIsInNuYXBEdXAiLCJlbXB0eSIsImN1cnJlbnRDb3VudCIsInN1Ym1pc3Npb25EYXRhIiwiZGF0ZSIsImNvdW50IiwidGV4dCIsIm5ld0NvdW50IiwidXBkYXRlVXNlckdyb3VwcyIsInRhcmdldFVzZXJJZCIsImdyb3VwcyIsImRlbGV0ZUlkZWEiLCJpZGVhSWQiLCJ1cGRhdGVVc2VyIiwidXBkYXRlcyIsImZpcmVzdG9yZVVwZGF0ZXMiLCJhdXRoVXBkYXRlZCIsImF1dGhFcnJvck1zZyIsImN1cnJlbnRVc2VyIiwiY3VycmVudEF1dGhFbWFpbCIsImVtYWlsRXJyIiwibGVuZ3RoIiwicmVsb2FkIiwiYXV0aEVyciIsInN1Y2Nlc3NNc2ciLCJyZWNhbGN1bGF0ZUxlYWRlcmJvYXJkIiwiaW52ZXN0bWVudHNCeVVzZXIiLCJ1c2Vyc1NuYXAiLCJ1cGRhdGVDb3VudCIsInVzZXJEb2MiLCJjdXJyZW50SW52ZXN0ZWQiLCJjb3JyZWN0SW52ZXN0ZWQiLCJhYnMiLCJlcnJNc2ciLCJTdHJpbmciLCJiYWNrZmlsbExhc3RCZXRQZXJjZW50IiwibGFzdFNldHRsZWRCZXQiLCJzZXR0bGVkQmV0cyIsImZpbHRlciIsImRhdGVBIiwiZGF0ZUIiLCJwcmVCZXROZXRXb3J0aCIsImRlbW90ZVNlbGYiLCJkZWxldGVBY2NvdW50Iiwib3BDb3VudCIsImRlbGV0ZSIsImlkZWFzUSIsImlkZWFzU25hcCIsImRlbGV0ZVVzZXIiLCJjb21taXRCYXRjaEJ1ZmZlciIsImRvY3NUb0RlbGV0ZSIsIkNIVU5LX1NJWkUiLCJpIiwiY2h1bmsiLCJhbGxEb2NzVG9EZWxldGUiLCJjb21tZW50c1NuYXAiLCJub3RpZlNuYXAiLCJzeW5jRXZlbnRTdGF0cyIsImFsbEJldHMiLCJzdGF0c01hcCIsImNvdW50cyIsImFtb3VudHMiLCJ0b3RhbEJldHMiLCJ0b3RhbFBvb2wiLCJzIiwidXBkYXRlUHJvbWlzZXMiLCJzdGF0cyIsIlByb21pc2UiLCJhbGwiLCJhZGRDb21tZW50IiwiY29tbWVudERhdGEiLCJsYXN0Q29tbWVudCIsInN1YnN0cmluZyIsImRlbGV0ZUNvbW1lbnQiLCJjb21tZW50SWQiLCJjb21tZW50UmVmIiwiY29tbWVudFNuYXAiLCJjb21tZW50Q3JlYXRlZEF0IiwiZXZlbnRTbmFwIiwibmV3ZXN0IiwibWFya05vdGlmaWNhdGlvblJlYWQiLCJub3RpZklkIiwiZ2V0VXNlclN0YXRzIiwid2lucyIsImxvc3NlcyIsInNldHRsZWRDb3VudCIsInRvdGFsIiwid2luUmF0ZSIsInByb2ZpbGUiLCJiaW8iLCJwcm9maWxlUGljIiwiZ2V0V2Vla2x5TGVhZGVyYm9hcmQiLCJub3ciLCJkYXlPZldlZWsiLCJnZXREYXkiLCJzdGFydE9mV2VlayIsInNldEhvdXJzIiwiaXNvU3RyIiwicGF5b3V0IiwibGVhZGVyYm9hcmQiLCJPYmplY3QiLCJlbnRyaWVzIiwibXNnIiwidXBkYXRlU3lzdGVtQW5ub3VuY2VtZW50IiwiZG9jUmVmIiwibWVyZ2UiLCJQcm92aWRlciIsInZhbHVlIiwiaXNGaXJlYmFzZSIsInVzZUFwcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/store.js\n"));

/***/ })

});