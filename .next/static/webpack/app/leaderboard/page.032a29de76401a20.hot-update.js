"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/leaderboard/page",{

/***/ "(app-pages-browser)/./src/lib/store.js":
/*!**************************!*\
  !*** ./src/lib/store.js ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppProvider: function() { return /* binding */ AppProvider; },\n/* harmony export */   useApp: function() { return /* binding */ useApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ AppProvider,useApp auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\nconst AppContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\nfunction AppProvider(param) {\n    let { children } = param;\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bets, setBets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [ideas, setIdeas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Safety timeout: If Firebase auth hangs for >1s, just load the app (as signed out) to prevent being stuck.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setIsLoaded((prev)=>{\n                if (!prev) console.warn(\"Firebase auth slow - forcing load state\");\n                return true;\n            });\n        }, 1200);\n        return ()=>clearTimeout(timer);\n    }, []);\n    // --- 1. Auth & User Profile Listener ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let unsubscribeProfile = null;\n        // Auth Listener\n        const unsubscribeAuth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, (firebaseUser)=>{\n            // 1. Clean up previous profile listener if any\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n                unsubscribeProfile = null;\n            }\n            if (firebaseUser) {\n                // User is signed in -> Set basic auth user immediately to prevent logout loop\n                // We will enrich this with DB data in a moment\n                setUser((prev)=>prev || {\n                        id: firebaseUser.uid,\n                        email: firebaseUser.email,\n                        username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                        role: \"user\"\n                    });\n                // Listen to Firestore Profile\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", firebaseUser.uid);\n                unsubscribeProfile = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(userRef, (docSnap)=>{\n                    if (docSnap.exists()) {\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...docSnap.data()\n                        });\n                    } else {\n                        // Document does not exist (e.g. first login or previous error).\n                        console.log(\">>> DETECTED NEW USER (No Profile Found) - Creating Profile...\");\n                        // Auto-create the user profile in Firestore\n                        const newUser = {\n                            email: firebaseUser.email,\n                            username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                            role: firebaseUser.email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                            balance: 1000,\n                            createdAt: new Date().toISOString()\n                        };\n                        // Write to DB\n                        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, newUser).then(()=>{\n                            console.log(\">>> SUCCESSFULLY CREATED PROFILE FOR:\", newUser.email);\n                        // alert(\"Welcome! Your profile has been created with $1000.\");\n                        }).catch((err)=>{\n                            console.error(\">>> ERROR CREATING PROFILE:\", err);\n                            alert(\"Error creating profile. Check permissions.\");\n                        });\n                        // Set local state\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...newUser\n                        });\n                    }\n                    setIsLoaded(true);\n                });\n            } else {\n                // User is signed out\n                setUser(null);\n                setBets([]);\n                setIsLoaded(true);\n            }\n        });\n        // Cleanup function when component unmounts\n        return ()=>{\n            unsubscribeAuth();\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n            }\n        };\n    }, []);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // List of all users for leaderboard\n    // ... (existing timeout code) ...\n    // --- 2. Data Listeners (Events, Ideas, Users) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Listen to Events (Limit 50 active)\n        const eventsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubEvents = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(eventsQuery, (snapshot)=>{\n            const eventsList = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            eventsList.sort((a, b)=>{\n                // Open events first\n                if (a.status === \"open\" && b.status !== \"open\") return -1;\n                if (a.status !== \"open\" && b.status === \"open\") return 1;\n                // Then sort by startAt date (ascending: earliest date first)\n                return new Date(a.startAt) - new Date(b.startAt);\n            });\n            setEvents(eventsList);\n        });\n        // Listen to Ideas (Limit 50 recent)\n        // Removed orderBy to avoid missing index issues. Sorting client-side.\n        const ideasQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubIdeas = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(ideasQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            list.sort((a, b)=>new Date(b.submittedAt) - new Date(a.submittedAt));\n            setIdeas(list);\n        }, (error)=>{\n            console.error(\"Error listening to ideas:\", error);\n        });\n        // Listen to Users (Global List for Leaderboard & Admin)\n        const usersQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubUsers = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(usersQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Client-side sort by balance desc\n            list.sort((a, b)=>(b.balance || 0) - (a.balance || 0));\n            setUsers(list);\n        });\n        return ()=>{\n            unsubEvents();\n            unsubIdeas();\n            unsubUsers();\n        };\n    }, []);\n    // --- 3. Bets Listener (Only for logged in user) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!user) {\n            setBets([]);\n            return;\n        }\n        const betsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(100));\n        const unsubBets = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(betsQuery, (snapshot)=>{\n            // We'll trust the client side sorting for now or add orderBy index later\n            const myBets = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            myBets.sort((a, b)=>new Date(b.placedAt) - new Date(a.placedAt));\n            setBets(myBets);\n        // localStorage.setItem('bet_bets_cache', JSON.stringify(myBets));\n        });\n        return ()=>unsubBets();\n    }, [\n        user === null || user === void 0 ? void 0 : user.id\n    ]); // Only re-run if user ID changes is tricky, better safe dependency\n    // --- Actions ---\n    const signup = async (email, username, password)=>{\n        try {\n            const resp = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.createUserWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            // Create User Document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", resp.user.uid), {\n                email,\n                username: username || email.split(\"@\")[0],\n                role: email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                balance: 1000,\n                createdAt: new Date().toISOString()\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const signin = async (emailOrUsername, password)=>{\n        try {\n            let email = emailOrUsername;\n            // Simple check: if no '@', assume username\n            if (!email.includes(\"@\")) {\n                const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"username\", \"==\", emailOrUsername), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(1));\n                const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                if (snap.empty) {\n                    return {\n                        success: false,\n                        error: \"User-not-found\"\n                    };\n                }\n                email = snap.docs[0].data().email;\n            }\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const logout = async ()=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n    const placeBet = async (eventId, outcomeId, amount)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        if (user.balance < amount) return {\n            success: false,\n            error: \"Insufficient funds\"\n        };\n        const event = events.find((e)=>e.id === eventId);\n        if (!event || event.status !== \"open\") return {\n            success: false,\n            error: \"Event is locked\"\n        };\n        // Check for existing bets on OTHER sides\n        const qExisting = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n        const snapExisting = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qExisting);\n        const otherSideBet = snapExisting.docs.find((d)=>d.data().outcomeId !== outcomeId);\n        if (otherSideBet) {\n            return {\n                success: false,\n                error: \"Loyalty check! You already bet on the other side. No switching.\"\n            };\n        }\n        const outcome = event.outcomes.find((o)=>o.id === outcomeId);\n        try {\n            // 1. Deduct Balance & Add to Invested\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-amount),\n                invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount) // Track active wagers for leaderboard\n            });\n            // 2. Create Bet\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), {\n                userId: user.id,\n                username: user.username,\n                eventId,\n                outcomeId,\n                outcomeLabel: outcome.label,\n                eventTitle: event.title,\n                amount: parseFloat(amount),\n                odds: outcome.odds,\n                potentialPayout: amount * outcome.odds,\n                status: \"pending\",\n                placedAt: new Date().toISOString()\n            });\n            // 3. Update Event Stats (Best Effort - ignore permission errors for now)\n            try {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                    [\"stats.counts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    [\"stats.amounts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                    \"stats.totalBets\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    \"stats.totalPool\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount)\n                });\n            } catch (statsErr) {\n                console.warn(\"Could not update event stats (likely permission issue):\", statsErr);\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const createEvent = async (eventData)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), {\n                status: \"open\",\n                createdAt: new Date().toISOString(),\n                ...eventData\n            });\n        } catch (e) {\n            console.error(\"Error creating event\", e);\n        }\n    };\n    const deleteEvent = async (eventId)=>{\n        try {\n            // Note: This does NOT refund bets automatically in this simple version\n            // You would need Cloud Functions for robust backend logic\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                status: \"deleted\"\n            }); // Soft delete is safer?\n            // For now, let's just actually delete it for cleanliness in the UI as requested previously\n            // but usually on local version we just filtered.\n            // Wait, Firestore deleteDoc is better.\n            // await deleteDoc(doc(db, 'events', eventId)); \n            // Let's stick to update to 'deleted' or just rely on the UI filter?\n            // Let's actually delete.\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId));\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const toggleFeatured = async (eventId, currentStatus)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                featured: !currentStatus\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const resolveEvent = async (eventId, winnerOutcomeId)=>{\n        try {\n            // 1. Mark Event as Settled\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                status: \"settled\",\n                winnerOutcomeId\n            });\n            // 2. Process Bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ); // Need all bets to settle\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            betsSnap.docs.forEach((betDoc)=>{\n                const bet = betDoc.data();\n                const isWinner = bet.outcomeId === winnerOutcomeId;\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                // Settle the bet document\n                batch.update(betDoc.ref, {\n                    status: isWinner ? \"won\" : \"lost\",\n                    settledAt: new Date().toISOString()\n                });\n                // Update User Balance & Invested\n                // Always decrease 'invested' because the bet is over.\n                // Increase 'balance' only if they won.\n                if (isWinner) {\n                    batch.update(userRef, {\n                        balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount)\n                    });\n                } else {\n                    batch.update(userRef, {\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount)\n                    });\n                }\n                // Create Notification\n                const notifRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\"));\n                batch.set(notifRef, {\n                    userId: bet.userId,\n                    type: \"result\",\n                    eventId: eventId,\n                    title: isWinner ? \"You Won!\" : \"Bet Lost\",\n                    message: isWinner ? \"You won $\".concat(bet.potentialPayout.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\") : \"You lost $\".concat(bet.amount.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\"),\n                    read: false,\n                    createdAt: new Date().toISOString()\n                });\n            });\n            await batch.commit();\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateEvent = async (eventId, data)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), data);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const submitIdea = async (ideaText)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        // Duplicate Check\n        const qDup = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"text\", \"==\", ideaText));\n        const snapDup = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qDup);\n        if (!snapDup.empty) {\n            return {\n                success: false,\n                error: \"You already suggested this! Hey switch it up.\"\n            };\n        }\n        // Check Daily Limit (Client-side check based on local user data, ideally backend does this)\n        const today = new Date().toDateString();\n        let currentCount = 0;\n        if (user.submissionData && user.submissionData.date === today) {\n            currentCount = user.submissionData.count;\n        }\n        if (currentCount >= 5) {\n            return {\n                success: false,\n                error: \"Daily limit reached (5/5). Come back tomorrow!\"\n            };\n        }\n        try {\n            // 1. Create Idea Doc\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), {\n                userId: user.id,\n                username: user.username,\n                text: ideaText,\n                submittedAt: new Date().toISOString()\n            });\n            // 2. Update User (Reward + Submission Count)\n            // If date different, simple set. If same, increment.\n            // Firestore update is tricky with nested objects, so we set the whole object.\n            // We calculate new count locally to ensure sync with the check.\n            const newCount = currentCount + 1;\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(15),\n                submissionData: {\n                    date: today,\n                    count: newCount\n                }\n            });\n            return {\n                success: true,\n                message: \"Idea submitted! +$15.00\"\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteIdea = async (ideaId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\", ideaId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUser = async (updates)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        try {\n            // 1. Update Firestore FIRST (Profile Pic, Username, etc.)\n            // This ensures that non-sensitive updates always succeed even if Auth fails.\n            const firestoreUpdates = {\n                ...updates\n            };\n            delete firestoreUpdates.password; // Don't store raw password in DB\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), firestoreUpdates);\n            // Update local state immediately for the UI\n            setUser((prev)=>({\n                    ...prev,\n                    ...firestoreUpdates\n                }));\n            // 2. Attempt Auth Updates (Sensitive: Email/Password)\n            let authUpdated = false;\n            let authErrorMsg = \"\";\n            try {\n                // Update Email\n                if (updates.email && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    const currentAuthEmail = _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.email;\n                    if (updates.email.toLowerCase() !== currentAuthEmail.toLowerCase()) {\n                        console.log(\"Debug: Attempting email update from \".concat(currentAuthEmail, \" to \").concat(updates.email));\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                            authUpdated = true;\n                        } catch (emailErr) {\n                            if (emailErr.code === \"auth/operation-not-allowed\" || emailErr.message.includes(\"verify\")) {\n                                await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.verifyBeforeUpdateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                                return {\n                                    success: true,\n                                    message: \"Profile saved & Verification sent to \".concat(updates.email, \".\")\n                                };\n                            }\n                            throw emailErr;\n                        }\n                    }\n                }\n                // Update Password\n                if (updates.password && updates.password.length > 0) {\n                    if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updatePassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.password);\n                        authUpdated = true;\n                    }\n                }\n                // Force refresh if Auth changed\n                if (authUpdated && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.reload();\n                }\n            } catch (authErr) {\n                console.error(\"Auth Update Failed:\", authErr);\n                if (authErr.code === \"auth/requires-recent-login\") {\n                    authErrorMsg = \" (Note: Re-login required to update Email/Password)\";\n                } else {\n                    authErrorMsg = \" (Auth Error: \".concat(authErr.message, \")\");\n                }\n            }\n            const successMsg = authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg;\n            return {\n                success: true,\n                message: authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg\n            };\n        } catch (e) {\n            console.error(\"Firestore Update Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const recalculateLeaderboard = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all pending bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            // If index missing, this line throws.\n            const investmentsByUser = {};\n            betsSnap.docs.forEach((doc)=>{\n                const bet = doc.data();\n                if (!investmentsByUser[bet.userId]) investmentsByUser[bet.userId] = 0;\n                investmentsByUser[bet.userId] += bet.amount || 0;\n            });\n            // 2. Fetch all users to update their stats\n            const usersSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"));\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let updateCount = 0;\n            usersSnap.docs.forEach((userDoc)=>{\n                const uid = userDoc.id;\n                const currentInvested = userDoc.data().invested || 0;\n                const correctInvested = investmentsByUser[uid] || 0;\n                // Only update if different to save writes\n                if (Math.abs(currentInvested - correctInvested) > 0.01) {\n                    batch.update(userDoc.ref, {\n                        invested: correctInvested\n                    });\n                    updateCount++;\n                }\n            });\n            if (updateCount > 0) await batch.commit();\n            return {\n                success: true,\n                message: \"Recalculated! Updated \".concat(updateCount, \" users.\")\n            };\n        } catch (e) {\n            console.error(\"Recalc Detailed Error:\", e);\n            let errMsg = e.message || String(e);\n            if (errMsg.includes(\"index\")) errMsg = \"Missing Index! Check Browser Console (F12) for the creation link.\";\n            return {\n                success: false,\n                error: errMsg\n            };\n        }\n    };\n    const demoteSelf = async ()=>{\n        if (!user) return;\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                role: \"user\"\n            });\n            // setUser({...user, role: 'user'}); // Optimistic update\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteAccount = async ()=>{\n        if (!user) return {\n            success: false\n        };\n        try {\n            const userId = user.id;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", userId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            // 4. Delete Auth Account\n            if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.delete();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete Error:\", e);\n            if (e.code === \"auth/requires-recent-login\") {\n                return {\n                    success: false,\n                    error: \"Please log out and log in again to delete your account.\"\n                };\n            }\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteUser = async (targetUserId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const syncEventStats = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"));\n            const allBets = betsSnap.docs.map((d)=>d.data());\n            // 2. Aggregate Stats\n            const statsMap = {}; // eventId -> { counts: {}, amounts: {}, totalBets: 0, totalPool: 0 }\n            for (const bet of allBets){\n                if (!statsMap[bet.eventId]) {\n                    statsMap[bet.eventId] = {\n                        counts: {},\n                        amounts: {},\n                        totalBets: 0,\n                        totalPool: 0\n                    };\n                }\n                const s = statsMap[bet.eventId];\n                s.totalBets += 1;\n                s.totalPool += bet.amount || 0;\n                s.counts[bet.outcomeId] = (s.counts[bet.outcomeId] || 0) + 1;\n                s.amounts[bet.outcomeId] = (s.amounts[bet.outcomeId] || 0) + (bet.amount || 0);\n            }\n            // 3. Update Events\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"));\n            const updatePromises = eventsSnap.docs.map(async (docSnap)=>{\n                const stats = statsMap[docSnap.id] || {\n                    counts: {},\n                    amounts: {},\n                    totalBets: 0,\n                    totalPool: 0\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", docSnap.id), {\n                    stats\n                });\n            });\n            await Promise.all(updatePromises);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const addComment = async (eventId, text)=>{\n        if (!user) return {\n            success: false,\n            error: \"Login to comment\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), {\n                eventId,\n                userId: user.id,\n                username: user.username,\n                text,\n                createdAt: new Date().toISOString()\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const markNotificationRead = async (notifId)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\", notifId), {\n                read: true\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const getUserStats = async (targetUserId)=>{\n        try {\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n            const userData = userSnap.exists() ? userSnap.data() : {};\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            let wins = 0;\n            let losses = 0;\n            let profit = 0;\n            let settledCount = 0;\n            snap.docs.forEach((d)=>{\n                const b = d.data();\n                if (b.status === \"won\") {\n                    wins++;\n                    settledCount++;\n                    profit += (b.potentialPayout || b.amount * b.odds) - b.amount;\n                } else if (b.status === \"lost\") {\n                    losses++;\n                    settledCount++;\n                    profit -= b.amount;\n                }\n            });\n            const total = snap.size;\n            const winRate = settledCount > 0 ? (wins / settledCount * 100).toFixed(1) : 0;\n            return {\n                success: true,\n                stats: {\n                    wins,\n                    losses,\n                    total,\n                    winRate,\n                    profit\n                },\n                profile: {\n                    bio: userData.bio || \"\",\n                    profilePic: userData.profilePic,\n                    username: userData.username\n                }\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const getWeeklyLeaderboard = async ()=>{\n        try {\n            const d = new Date();\n            const day = d.getDay();\n            const diff = d.getDate() - day;\n            const startOfWeek = new Date(d.setDate(diff));\n            startOfWeek.setHours(0, 0, 0, 0);\n            const isoStr = startOfWeek.toISOString();\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"in\", [\n                \"won\",\n                \"lost\"\n            ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"settledAt\", \">=\", isoStr));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            const stats = {};\n            snap.docs.forEach((doc)=>{\n                const b = doc.data();\n                if (!stats[b.userId]) stats[b.userId] = 0;\n                if (b.status === \"won\") {\n                    stats[b.userId] += (b.potentialPayout || b.amount * b.odds) - b.amount;\n                } else {\n                    stats[b.userId] -= b.amount;\n                }\n            });\n            const leaderboard = Object.entries(stats).map((param)=>{\n                let [userId, profit] = param;\n                return {\n                    userId,\n                    profit\n                };\n            });\n            leaderboard.sort((a, b)=>b.profit - a.profit);\n            return {\n                success: true,\n                data: leaderboard\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AppContext.Provider, {\n        value: {\n            user,\n            signup,\n            signin,\n            logout,\n            updateUser,\n            submitIdea,\n            deleteIdea,\n            deleteAccount,\n            deleteUser,\n            demoteSelf,\n            syncEventStats,\n            events,\n            createEvent,\n            resolveEvent,\n            updateEvent,\n            deleteEvent,\n            toggleFeatured,\n            recalculateLeaderboard,\n            addComment,\n            markNotificationRead,\n            getUserStats,\n            getWeeklyLeaderboard,\n            bets,\n            placeBet,\n            isLoaded,\n            isFirebase: true,\n            users,\n            ideas,\n            db: _firebase__WEBPACK_IMPORTED_MODULE_4__.db\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\ffear\\\\OneDrive\\\\Documents\\\\GitHub\\\\bet-it-happens\\\\src\\\\lib\\\\store.js\",\n        lineNumber: 793,\n        columnNumber: 5\n    }, this);\n}\n_s(AppProvider, \"8lkHadQ9lcbI+p4G40QKBYMKzTo=\");\n_c = AppProvider;\nfunction useApp() {\n    _s1();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppContext);\n}\n_s1(useApp, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDckp0TTtZQUFNeUU7WUFBVXJFO1lBQVVnTixZQUFZO1lBQU03SztZQUFPckM7WUFBT1gsRUFBRUEsMkNBQUFBO1FBQzlEO2tCQUNHSTs7Ozs7O0FBR1A7R0FqeEJnQkQ7S0FBQUE7QUFteEJULFNBQVMyTjs7SUFDZCxPQUFPdlAsaURBQVVBLENBQUMyQjtBQUNwQjtJQUZnQjROIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvc3RvcmUuanM/NTExNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXCJ1c2UgY2xpZW50XCI7XHJcbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge1xyXG4gIGNvbGxlY3Rpb24sIGFkZERvYywgb25TbmFwc2hvdCwgcXVlcnksIG9yZGVyQnksXHJcbiAgZG9jLCBzZXREb2MsIHVwZGF0ZURvYywgZ2V0RG9jLCB3aGVyZSwgaW5jcmVtZW50LCBkZWxldGVEb2MsIGdldERvY3MsIGxpbWl0LCB3cml0ZUJhdGNoXHJcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHtcclxuICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLFxyXG4gIHNpZ25PdXQsIG9uQXV0aFN0YXRlQ2hhbmdlZCwgdXBkYXRlRW1haWwsIHVwZGF0ZVBhc3N3b3JkLCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbFxyXG59IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xyXG5pbXBvcnQgeyBkYiwgYXV0aCB9IGZyb20gJy4vZmlyZWJhc2UnO1xyXG5cclxuY29uc3QgQXBwQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBcHBQcm92aWRlcih7IGNoaWxkcmVuIH0pIHtcclxuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbZXZlbnRzLCBzZXRFdmVudHNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtiZXRzLCBzZXRCZXRzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbaWRlYXMsIHNldElkZWFzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbaXNMb2FkZWQsIHNldElzTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgLy8gU2FmZXR5IHRpbWVvdXQ6IElmIEZpcmViYXNlIGF1dGggaGFuZ3MgZm9yID4xcywganVzdCBsb2FkIHRoZSBhcHAgKGFzIHNpZ25lZCBvdXQpIHRvIHByZXZlbnQgYmVpbmcgc3R1Y2suXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNldElzTG9hZGVkKHByZXYgPT4ge1xyXG4gICAgICAgIGlmICghcHJldikgY29uc29sZS53YXJuKFwiRmlyZWJhc2UgYXV0aCBzbG93IC0gZm9yY2luZyBsb2FkIHN0YXRlXCIpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIH0sIDEyMDApO1xyXG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyAtLS0gMS4gQXV0aCAmIFVzZXIgUHJvZmlsZSBMaXN0ZW5lciAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IHVuc3Vic2NyaWJlUHJvZmlsZSA9IG51bGw7XHJcblxyXG4gICAgLy8gQXV0aCBMaXN0ZW5lclxyXG4gICAgY29uc3QgdW5zdWJzY3JpYmVBdXRoID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIChmaXJlYmFzZVVzZXIpID0+IHtcclxuICAgICAgLy8gMS4gQ2xlYW4gdXAgcHJldmlvdXMgcHJvZmlsZSBsaXN0ZW5lciBpZiBhbnlcclxuICAgICAgaWYgKHVuc3Vic2NyaWJlUHJvZmlsZSkge1xyXG4gICAgICAgIHVuc3Vic2NyaWJlUHJvZmlsZSgpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlUHJvZmlsZSA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChmaXJlYmFzZVVzZXIpIHtcclxuICAgICAgICAvLyBVc2VyIGlzIHNpZ25lZCBpbiAtPiBTZXQgYmFzaWMgYXV0aCB1c2VyIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgbG9nb3V0IGxvb3BcclxuICAgICAgICAvLyBXZSB3aWxsIGVucmljaCB0aGlzIHdpdGggREIgZGF0YSBpbiBhIG1vbWVudFxyXG4gICAgICAgIHNldFVzZXIocHJldiA9PiBwcmV2IHx8IHtcclxuICAgICAgICAgIGlkOiBmaXJlYmFzZVVzZXIudWlkLFxyXG4gICAgICAgICAgZW1haWw6IGZpcmViYXNlVXNlci5lbWFpbCxcclxuICAgICAgICAgIHVzZXJuYW1lOiBmaXJlYmFzZVVzZXIuZGlzcGxheU5hbWUgfHwgZmlyZWJhc2VVc2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXHJcbiAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIExpc3RlbiB0byBGaXJlc3RvcmUgUHJvZmlsZVxyXG4gICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIGZpcmViYXNlVXNlci51aWQpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlUHJvZmlsZSA9IG9uU25hcHNob3QodXNlclJlZiwgKGRvY1NuYXApID0+IHtcclxuICAgICAgICAgIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgIHNldFVzZXIoeyBpZDogZmlyZWJhc2VVc2VyLnVpZCwgLi4uZG9jU25hcC5kYXRhKCkgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBEb2N1bWVudCBkb2VzIG5vdCBleGlzdCAoZS5nLiBmaXJzdCBsb2dpbiBvciBwcmV2aW91cyBlcnJvcikuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPj4+IERFVEVDVEVEIE5FVyBVU0VSIChObyBQcm9maWxlIEZvdW5kKSAtIENyZWF0aW5nIFByb2ZpbGUuLi5cIik7XHJcbiAgICAgICAgICAgIC8vIEF1dG8tY3JlYXRlIHRoZSB1c2VyIHByb2ZpbGUgaW4gRmlyZXN0b3JlXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSB7XHJcbiAgICAgICAgICAgICAgZW1haWw6IGZpcmViYXNlVXNlci5lbWFpbCxcclxuICAgICAgICAgICAgICB1c2VybmFtZTogZmlyZWJhc2VVc2VyLmRpc3BsYXlOYW1lIHx8IGZpcmViYXNlVXNlci5lbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgICAgICAgIHJvbGU6IChmaXJlYmFzZVVzZXIuZW1haWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWRtaW4nKSkgPyAnYWRtaW4nIDogJ3VzZXInLFxyXG4gICAgICAgICAgICAgIGJhbGFuY2U6IDEwMDAsXHJcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdyaXRlIHRvIERCXHJcbiAgICAgICAgICAgIHNldERvYyh1c2VyUmVmLCBuZXdVc2VyKVxyXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPj4+IFNVQ0NFU1NGVUxMWSBDUkVBVEVEIFBST0ZJTEUgRk9SOlwiLCBuZXdVc2VyLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiV2VsY29tZSEgWW91ciBwcm9maWxlIGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCAkMTAwMC5cIik7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCI+Pj4gRVJST1IgQ1JFQVRJTkcgUFJPRklMRTpcIiwgZXJyKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJyb3IgY3JlYXRpbmcgcHJvZmlsZS4gQ2hlY2sgcGVybWlzc2lvbnMuXCIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IGxvY2FsIHN0YXRlXHJcbiAgICAgICAgICAgIHNldFVzZXIoeyBpZDogZmlyZWJhc2VVc2VyLnVpZCwgLi4ubmV3VXNlciB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNldElzTG9hZGVkKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIG91dFxyXG4gICAgICAgIHNldFVzZXIobnVsbCk7XHJcbiAgICAgICAgc2V0QmV0cyhbXSk7XHJcbiAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENsZWFudXAgZnVuY3Rpb24gd2hlbiBjb21wb25lbnQgdW5tb3VudHNcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHVuc3Vic2NyaWJlQXV0aCgpO1xyXG4gICAgICBpZiAodW5zdWJzY3JpYmVQcm9maWxlKSB7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBbdXNlcnMsIHNldFVzZXJzXSA9IHVzZVN0YXRlKFtdKTsgLy8gTGlzdCBvZiBhbGwgdXNlcnMgZm9yIGxlYWRlcmJvYXJkXHJcblxyXG4gIC8vIC4uLiAoZXhpc3RpbmcgdGltZW91dCBjb2RlKSAuLi5cclxuXHJcbiAgLy8gLS0tIDIuIERhdGEgTGlzdGVuZXJzIChFdmVudHMsIElkZWFzLCBVc2VycykgLS0tXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIExpc3RlbiB0byBFdmVudHMgKExpbWl0IDUwIGFjdGl2ZSlcclxuICAgIGNvbnN0IGV2ZW50c1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJFdmVudHMgPSBvblNuYXBzaG90KGV2ZW50c1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnRzTGlzdCA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgZXZlbnRzTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgLy8gT3BlbiBldmVudHMgZmlyc3RcclxuICAgICAgICBpZiAoYS5zdGF0dXMgPT09ICdvcGVuJyAmJiBiLnN0YXR1cyAhPT0gJ29wZW4nKSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGEuc3RhdHVzICE9PSAnb3BlbicgJiYgYi5zdGF0dXMgPT09ICdvcGVuJykgcmV0dXJuIDE7XHJcbiAgICAgICAgLy8gVGhlbiBzb3J0IGJ5IHN0YXJ0QXQgZGF0ZSAoYXNjZW5kaW5nOiBlYXJsaWVzdCBkYXRlIGZpcnN0KVxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShhLnN0YXJ0QXQpIC0gbmV3IERhdGUoYi5zdGFydEF0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIHNldEV2ZW50cyhldmVudHNMaXN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBJZGVhcyAoTGltaXQgNTAgcmVjZW50KVxyXG4gICAgLy8gUmVtb3ZlZCBvcmRlckJ5IHRvIGF2b2lkIG1pc3NpbmcgaW5kZXggaXNzdWVzLiBTb3J0aW5nIGNsaWVudC1zaWRlLlxyXG4gICAgY29uc3QgaWRlYXNRdWVyeSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCBsaW1pdCg1MCkpO1xyXG4gICAgY29uc3QgdW5zdWJJZGVhcyA9IG9uU25hcHNob3QoaWRlYXNRdWVyeSwgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpc3QgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbiAgICAgIGxpc3Quc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5zdWJtaXR0ZWRBdCkgLSBuZXcgRGF0ZShhLnN1Ym1pdHRlZEF0KSk7XHJcbiAgICAgIHNldElkZWFzKGxpc3QpO1xyXG4gICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsaXN0ZW5pbmcgdG8gaWRlYXM6XCIsIGVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBVc2VycyAoR2xvYmFsIExpc3QgZm9yIExlYWRlcmJvYXJkICYgQWRtaW4pXHJcbiAgICBjb25zdCB1c2Vyc1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3VzZXJzJyksIGxpbWl0KDUwKSk7XHJcbiAgICBjb25zdCB1bnN1YlVzZXJzID0gb25TbmFwc2hvdCh1c2Vyc1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgY29uc3QgbGlzdCA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgLy8gQ2xpZW50LXNpZGUgc29ydCBieSBiYWxhbmNlIGRlc2NcclxuICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiAoYi5iYWxhbmNlIHx8IDApIC0gKGEuYmFsYW5jZSB8fCAwKSk7XHJcbiAgICAgIHNldFVzZXJzKGxpc3QpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdW5zdWJFdmVudHMoKTtcclxuICAgICAgdW5zdWJJZGVhcygpO1xyXG4gICAgICB1bnN1YlVzZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyAtLS0gMy4gQmV0cyBMaXN0ZW5lciAoT25seSBmb3IgbG9nZ2VkIGluIHVzZXIpIC0tLVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgc2V0QmV0cyhbXSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBiZXRzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlci5pZCksIGxpbWl0KDEwMCkpO1xyXG4gICAgY29uc3QgdW5zdWJCZXRzID0gb25TbmFwc2hvdChiZXRzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAvLyBXZSdsbCB0cnVzdCB0aGUgY2xpZW50IHNpZGUgc29ydGluZyBmb3Igbm93IG9yIGFkZCBvcmRlckJ5IGluZGV4IGxhdGVyXHJcbiAgICAgIGNvbnN0IG15QmV0cyA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgbXlCZXRzLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIucGxhY2VkQXQpIC0gbmV3IERhdGUoYS5wbGFjZWRBdCkpO1xyXG4gICAgICBzZXRCZXRzKG15QmV0cyk7XHJcbiAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiZXRfYmV0c19jYWNoZScsIEpTT04uc3RyaW5naWZ5KG15QmV0cykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHVuc3ViQmV0cygpO1xyXG4gIH0sIFt1c2VyPy5pZF0pOyAvLyBPbmx5IHJlLXJ1biBpZiB1c2VyIElEIGNoYW5nZXMgaXMgdHJpY2t5LCBiZXR0ZXIgc2FmZSBkZXBlbmRlbmN5XHJcblxyXG4gIC8vIC0tLSBBY3Rpb25zIC0tLVxyXG5cclxuICBjb25zdCBzaWdudXAgPSBhc3luYyAoZW1haWwsIHVzZXJuYW1lLCBwYXNzd29yZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIFVzZXIgRG9jdW1lbnRcclxuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXJzJywgcmVzcC51c2VyLnVpZCksIHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUgfHwgZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICByb2xlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpID8gJ2FkbWluJyA6ICd1c2VyJywgLy8gQmFzaWMgcm9sZSBhc3NpZ25tZW50XHJcbiAgICAgICAgYmFsYW5jZTogMTAwMCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNpZ25pbiA9IGFzeW5jIChlbWFpbE9yVXNlcm5hbWUsIHBhc3N3b3JkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgZW1haWwgPSBlbWFpbE9yVXNlcm5hbWU7XHJcbiAgICAgIC8vIFNpbXBsZSBjaGVjazogaWYgbm8gJ0AnLCBhc3N1bWUgdXNlcm5hbWVcclxuICAgICAgaWYgKCFlbWFpbC5pbmNsdWRlcygnQCcpKSB7XHJcbiAgICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICd1c2VycycpLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCBlbWFpbE9yVXNlcm5hbWUpLCBsaW1pdCgxKSk7XHJcbiAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgICAgICAgaWYgKHNuYXAuZW1wdHkpIHtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXItbm90LWZvdW5kJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbWFpbCA9IHNuYXAuZG9jc1swXS5kYXRhKCkuZW1haWw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHNpZ25PdXQoYXV0aCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHBsYWNlQmV0ID0gYXN5bmMgKGV2ZW50SWQsIG91dGNvbWVJZCwgYW1vdW50KSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcbiAgICBpZiAodXNlci5iYWxhbmNlIDwgYW1vdW50KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnN1ZmZpY2llbnQgZnVuZHMnIH07XHJcblxyXG4gICAgY29uc3QgZXZlbnQgPSBldmVudHMuZmluZChlID0+IGUuaWQgPT09IGV2ZW50SWQpO1xyXG4gICAgaWYgKCFldmVudCB8fCBldmVudC5zdGF0dXMgIT09ICdvcGVuJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRXZlbnQgaXMgbG9ja2VkJyB9O1xyXG5cclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBiZXRzIG9uIE9USEVSIHNpZGVzXHJcbiAgICBjb25zdCBxRXhpc3RpbmcgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlci5pZCksIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnRJZCkpO1xyXG4gICAgY29uc3Qgc25hcEV4aXN0aW5nID0gYXdhaXQgZ2V0RG9jcyhxRXhpc3RpbmcpO1xyXG4gICAgY29uc3Qgb3RoZXJTaWRlQmV0ID0gc25hcEV4aXN0aW5nLmRvY3MuZmluZChkID0+IGQuZGF0YSgpLm91dGNvbWVJZCAhPT0gb3V0Y29tZUlkKTtcclxuXHJcbiAgICBpZiAob3RoZXJTaWRlQmV0KSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJMb3lhbHR5IGNoZWNrISBZb3UgYWxyZWFkeSBiZXQgb24gdGhlIG90aGVyIHNpZGUuIE5vIHN3aXRjaGluZy5cIiB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG91dGNvbWUgPSBldmVudC5vdXRjb21lcy5maW5kKG8gPT4gby5pZCA9PT0gb3V0Y29tZUlkKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBEZWR1Y3QgQmFsYW5jZSAmIEFkZCB0byBJbnZlc3RlZFxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKTtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJSZWYsIHtcclxuICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoLWFtb3VudCksXHJcbiAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudChhbW91bnQpIC8vIFRyYWNrIGFjdGl2ZSB3YWdlcnMgZm9yIGxlYWRlcmJvYXJkXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMi4gQ3JlYXRlIEJldFxyXG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwge1xyXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICBldmVudElkLFxyXG4gICAgICAgIG91dGNvbWVJZCxcclxuICAgICAgICBvdXRjb21lTGFiZWw6IG91dGNvbWUubGFiZWwsXHJcbiAgICAgICAgZXZlbnRUaXRsZTogZXZlbnQudGl0bGUsXHJcbiAgICAgICAgYW1vdW50OiBwYXJzZUZsb2F0KGFtb3VudCksXHJcbiAgICAgICAgb2Rkczogb3V0Y29tZS5vZGRzLFxyXG4gICAgICAgIHBvdGVudGlhbFBheW91dDogYW1vdW50ICogb3V0Y29tZS5vZGRzLFxyXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgIHBsYWNlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAzLiBVcGRhdGUgRXZlbnQgU3RhdHMgKEJlc3QgRWZmb3J0IC0gaWdub3JlIHBlcm1pc3Npb24gZXJyb3JzIGZvciBub3cpXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRSZWYgPSBkb2MoZGIsICdldmVudHMnLCBldmVudElkKTtcclxuICAgICAgICBhd2FpdCB1cGRhdGVEb2MoZXZlbnRSZWYsIHtcclxuICAgICAgICAgIFtgc3RhdHMuY291bnRzLiR7b3V0Y29tZUlkfWBdOiBpbmNyZW1lbnQoMSksXHJcbiAgICAgICAgICBbYHN0YXRzLmFtb3VudHMuJHtvdXRjb21lSWR9YF06IGluY3JlbWVudChhbW91bnQpLFxyXG4gICAgICAgICAgJ3N0YXRzLnRvdGFsQmV0cyc6IGluY3JlbWVudCgxKSxcclxuICAgICAgICAgICdzdGF0cy50b3RhbFBvb2wnOiBpbmNyZW1lbnQoYW1vdW50KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChzdGF0c0Vycikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgZXZlbnQgc3RhdHMgKGxpa2VseSBwZXJtaXNzaW9uIGlzc3VlKTpcIiwgc3RhdHNFcnIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY3JlYXRlRXZlbnQgPSBhc3luYyAoZXZlbnREYXRhKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpLCB7XHJcbiAgICAgICAgc3RhdHVzOiAnb3BlbicsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgLi4uZXZlbnREYXRhXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgZXZlbnRcIiwgZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlRXZlbnQgPSBhc3luYyAoZXZlbnRJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gTm90ZTogVGhpcyBkb2VzIE5PVCByZWZ1bmQgYmV0cyBhdXRvbWF0aWNhbGx5IGluIHRoaXMgc2ltcGxlIHZlcnNpb25cclxuICAgICAgLy8gWW91IHdvdWxkIG5lZWQgQ2xvdWQgRnVuY3Rpb25zIGZvciByb2J1c3QgYmFja2VuZCBsb2dpY1xyXG4gICAgICBjb25zdCBldmVudFJlZiA9IGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpO1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZXZlbnRSZWYsIHsgc3RhdHVzOiAnZGVsZXRlZCcgfSk7IC8vIFNvZnQgZGVsZXRlIGlzIHNhZmVyP1xyXG4gICAgICAvLyBGb3Igbm93LCBsZXQncyBqdXN0IGFjdHVhbGx5IGRlbGV0ZSBpdCBmb3IgY2xlYW5saW5lc3MgaW4gdGhlIFVJIGFzIHJlcXVlc3RlZCBwcmV2aW91c2x5XHJcbiAgICAgIC8vIGJ1dCB1c3VhbGx5IG9uIGxvY2FsIHZlcnNpb24gd2UganVzdCBmaWx0ZXJlZC5cclxuICAgICAgLy8gV2FpdCwgRmlyZXN0b3JlIGRlbGV0ZURvYyBpcyBiZXR0ZXIuXHJcbiAgICAgIC8vIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSk7IFxyXG4gICAgICAvLyBMZXQncyBzdGljayB0byB1cGRhdGUgdG8gJ2RlbGV0ZWQnIG9yIGp1c3QgcmVseSBvbiB0aGUgVUkgZmlsdGVyP1xyXG4gICAgICAvLyBMZXQncyBhY3R1YWxseSBkZWxldGUuXHJcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlRmVhdHVyZWQgPSBhc3luYyAoZXZlbnRJZCwgY3VycmVudFN0YXR1cykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpLCB7XHJcbiAgICAgICAgZmVhdHVyZWQ6ICFjdXJyZW50U3RhdHVzXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzb2x2ZUV2ZW50ID0gYXN5bmMgKGV2ZW50SWQsIHdpbm5lck91dGNvbWVJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gTWFyayBFdmVudCBhcyBTZXR0bGVkXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBldmVudElkKSwge1xyXG4gICAgICAgIHN0YXR1czogJ3NldHRsZWQnLFxyXG4gICAgICAgIHdpbm5lck91dGNvbWVJZFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIFByb2Nlc3MgQmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdldmVudElkJywgJz09JywgZXZlbnRJZCkpO1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpOyAvLyBOZWVkIGFsbCBiZXRzIHRvIHNldHRsZVxyXG5cclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuXHJcbiAgICAgIGJldHNTbmFwLmRvY3MuZm9yRWFjaCgoYmV0RG9jKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYmV0ID0gYmV0RG9jLmRhdGEoKTtcclxuICAgICAgICBjb25zdCBpc1dpbm5lciA9IGJldC5vdXRjb21lSWQgPT09IHdpbm5lck91dGNvbWVJZDtcclxuICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCBiZXQudXNlcklkKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dGxlIHRoZSBiZXQgZG9jdW1lbnRcclxuICAgICAgICBiYXRjaC51cGRhdGUoYmV0RG9jLnJlZiwge1xyXG4gICAgICAgICAgc3RhdHVzOiBpc1dpbm5lciA/ICd3b24nIDogJ2xvc3QnLFxyXG4gICAgICAgICAgc2V0dGxlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIFVzZXIgQmFsYW5jZSAmIEludmVzdGVkXHJcbiAgICAgICAgLy8gQWx3YXlzIGRlY3JlYXNlICdpbnZlc3RlZCcgYmVjYXVzZSB0aGUgYmV0IGlzIG92ZXIuXHJcbiAgICAgICAgLy8gSW5jcmVhc2UgJ2JhbGFuY2UnIG9ubHkgaWYgdGhleSB3b24uXHJcbiAgICAgICAgaWYgKGlzV2lubmVyKSB7XHJcbiAgICAgICAgICBiYXRjaC51cGRhdGUodXNlclJlZiwge1xyXG4gICAgICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoYmV0LnBvdGVudGlhbFBheW91dCksXHJcbiAgICAgICAgICAgIGludmVzdGVkOiBpbmNyZW1lbnQoLWJldC5hbW91bnQpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYmF0Y2gudXBkYXRlKHVzZXJSZWYsIHtcclxuICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIE5vdGlmaWNhdGlvblxyXG4gICAgICAgIGNvbnN0IG5vdGlmUmVmID0gZG9jKGNvbGxlY3Rpb24oZGIsICdub3RpZmljYXRpb25zJykpO1xyXG4gICAgICAgIGJhdGNoLnNldChub3RpZlJlZiwge1xyXG4gICAgICAgICAgdXNlcklkOiBiZXQudXNlcklkLFxyXG4gICAgICAgICAgdHlwZTogJ3Jlc3VsdCcsXHJcbiAgICAgICAgICBldmVudElkOiBldmVudElkLFxyXG4gICAgICAgICAgdGl0bGU6IGlzV2lubmVyID8gJ1lvdSBXb24hJyA6ICdCZXQgTG9zdCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiBpc1dpbm5lclxyXG4gICAgICAgICAgICA/IGBZb3Ugd29uICQkeyhiZXQucG90ZW50aWFsUGF5b3V0KS50b0ZpeGVkKDIpfSBvbiAke2JldC5ldmVudFRpdGxlfSAoJHtiZXQub3V0Y29tZUxhYmVsfSlgXHJcbiAgICAgICAgICAgIDogYFlvdSBsb3N0ICQke2JldC5hbW91bnQudG9GaXhlZCgyKX0gb24gJHtiZXQuZXZlbnRUaXRsZX0gKCR7YmV0Lm91dGNvbWVMYWJlbH0pYCxcclxuICAgICAgICAgIHJlYWQ6IGZhbHNlLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgY29uc3QgdXBkYXRlRXZlbnQgPSBhc3luYyAoZXZlbnRJZCwgZGF0YSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpLCBkYXRhKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHN1Ym1pdElkZWEgPSBhc3luYyAoaWRlYVRleHQpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm90IGxvZ2dlZCBpbicgfTtcclxuXHJcbiAgICAvLyBEdXBsaWNhdGUgQ2hlY2tcclxuICAgIGNvbnN0IHFEdXAgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXIuaWQpLCB3aGVyZSgndGV4dCcsICc9PScsIGlkZWFUZXh0KSk7XHJcbiAgICBjb25zdCBzbmFwRHVwID0gYXdhaXQgZ2V0RG9jcyhxRHVwKTtcclxuICAgIGlmICghc25hcER1cC5lbXB0eSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiWW91IGFscmVhZHkgc3VnZ2VzdGVkIHRoaXMhIEhleSBzd2l0Y2ggaXQgdXAuXCIgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBEYWlseSBMaW1pdCAoQ2xpZW50LXNpZGUgY2hlY2sgYmFzZWQgb24gbG9jYWwgdXNlciBkYXRhLCBpZGVhbGx5IGJhY2tlbmQgZG9lcyB0aGlzKVxyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgbGV0IGN1cnJlbnRDb3VudCA9IDA7XHJcblxyXG4gICAgaWYgKHVzZXIuc3VibWlzc2lvbkRhdGEgJiYgdXNlci5zdWJtaXNzaW9uRGF0YS5kYXRlID09PSB0b2RheSkge1xyXG4gICAgICBjdXJyZW50Q291bnQgPSB1c2VyLnN1Ym1pc3Npb25EYXRhLmNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdXJyZW50Q291bnQgPj0gNSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdEYWlseSBsaW1pdCByZWFjaGVkICg1LzUpLiBDb21lIGJhY2sgdG9tb3Jyb3chJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIENyZWF0ZSBJZGVhIERvY1xyXG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2lkZWFzJyksIHtcclxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgdGV4dDogaWRlYVRleHQsXHJcbiAgICAgICAgc3VibWl0dGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIFVwZGF0ZSBVc2VyIChSZXdhcmQgKyBTdWJtaXNzaW9uIENvdW50KVxyXG4gICAgICAvLyBJZiBkYXRlIGRpZmZlcmVudCwgc2ltcGxlIHNldC4gSWYgc2FtZSwgaW5jcmVtZW50LlxyXG4gICAgICAvLyBGaXJlc3RvcmUgdXBkYXRlIGlzIHRyaWNreSB3aXRoIG5lc3RlZCBvYmplY3RzLCBzbyB3ZSBzZXQgdGhlIHdob2xlIG9iamVjdC5cclxuICAgICAgLy8gV2UgY2FsY3VsYXRlIG5ldyBjb3VudCBsb2NhbGx5IHRvIGVuc3VyZSBzeW5jIHdpdGggdGhlIGNoZWNrLlxyXG5cclxuICAgICAgY29uc3QgbmV3Q291bnQgPSBjdXJyZW50Q291bnQgKyAxO1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ3VzZXJzJywgdXNlci5pZCksIHtcclxuICAgICAgICBiYWxhbmNlOiBpbmNyZW1lbnQoMTUpLCAvLyBSZXdhcmRcclxuICAgICAgICBzdWJtaXNzaW9uRGF0YToge1xyXG4gICAgICAgICAgZGF0ZTogdG9kYXksXHJcbiAgICAgICAgICBjb3VudDogbmV3Q291bnRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0lkZWEgc3VibWl0dGVkISArJDE1LjAwJyB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUlkZWEgPSBhc3luYyAoaWRlYUlkKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnaWRlYXMnLCBpZGVhSWQpKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luYyAodXBkYXRlcykgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOb3QgbG9nZ2VkIGluJyB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIFVwZGF0ZSBGaXJlc3RvcmUgRklSU1QgKFByb2ZpbGUgUGljLCBVc2VybmFtZSwgZXRjLilcclxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgbm9uLXNlbnNpdGl2ZSB1cGRhdGVzIGFsd2F5cyBzdWNjZWVkIGV2ZW4gaWYgQXV0aCBmYWlscy5cclxuICAgICAgY29uc3QgZmlyZXN0b3JlVXBkYXRlcyA9IHsgLi4udXBkYXRlcyB9O1xyXG4gICAgICBkZWxldGUgZmlyZXN0b3JlVXBkYXRlcy5wYXNzd29yZDsgLy8gRG9uJ3Qgc3RvcmUgcmF3IHBhc3N3b3JkIGluIERCXHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKSwgZmlyZXN0b3JlVXBkYXRlcyk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGUgaW1tZWRpYXRlbHkgZm9yIHRoZSBVSVxyXG4gICAgICBzZXRVc2VyKHByZXYgPT4gKHsgLi4ucHJldiwgLi4uZmlyZXN0b3JlVXBkYXRlcyB9KSk7XHJcblxyXG4gICAgICAvLyAyLiBBdHRlbXB0IEF1dGggVXBkYXRlcyAoU2Vuc2l0aXZlOiBFbWFpbC9QYXNzd29yZClcclxuICAgICAgbGV0IGF1dGhVcGRhdGVkID0gZmFsc2U7XHJcbiAgICAgIGxldCBhdXRoRXJyb3JNc2cgPSAnJztcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIEVtYWlsXHJcbiAgICAgICAgaWYgKHVwZGF0ZXMuZW1haWwgJiYgYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudEF1dGhFbWFpbCA9IGF1dGguY3VycmVudFVzZXIuZW1haWw7XHJcbiAgICAgICAgICBpZiAodXBkYXRlcy5lbWFpbC50b0xvd2VyQ2FzZSgpICE9PSBjdXJyZW50QXV0aEVtYWlsLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYERlYnVnOiBBdHRlbXB0aW5nIGVtYWlsIHVwZGF0ZSBmcm9tICR7Y3VycmVudEF1dGhFbWFpbH0gdG8gJHt1cGRhdGVzLmVtYWlsfWApO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUVtYWlsKGF1dGguY3VycmVudFVzZXIsIHVwZGF0ZXMuZW1haWwpO1xyXG4gICAgICAgICAgICAgIGF1dGhVcGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZW1haWxFcnIpIHtcclxuICAgICAgICAgICAgICBpZiAoZW1haWxFcnIuY29kZSA9PT0gJ2F1dGgvb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyB8fCBlbWFpbEVyci5tZXNzYWdlLmluY2x1ZGVzKCd2ZXJpZnknKSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwoYXV0aC5jdXJyZW50VXNlciwgdXBkYXRlcy5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgUHJvZmlsZSBzYXZlZCAmIFZlcmlmaWNhdGlvbiBzZW50IHRvICR7dXBkYXRlcy5lbWFpbH0uYCB9O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aHJvdyBlbWFpbEVycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIFBhc3N3b3JkXHJcbiAgICAgICAgaWYgKHVwZGF0ZXMucGFzc3dvcmQgJiYgdXBkYXRlcy5wYXNzd29yZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpZiAoYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVQYXNzd29yZChhdXRoLmN1cnJlbnRVc2VyLCB1cGRhdGVzLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgYXV0aFVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRm9yY2UgcmVmcmVzaCBpZiBBdXRoIGNoYW5nZWRcclxuICAgICAgICBpZiAoYXV0aFVwZGF0ZWQgJiYgYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgYXdhaXQgYXV0aC5jdXJyZW50VXNlci5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGNhdGNoIChhdXRoRXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkF1dGggVXBkYXRlIEZhaWxlZDpcIiwgYXV0aEVycik7XHJcbiAgICAgICAgaWYgKGF1dGhFcnIuY29kZSA9PT0gJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJykge1xyXG4gICAgICAgICAgYXV0aEVycm9yTXNnID0gXCIgKE5vdGU6IFJlLWxvZ2luIHJlcXVpcmVkIHRvIHVwZGF0ZSBFbWFpbC9QYXNzd29yZClcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXV0aEVycm9yTXNnID0gYCAoQXV0aCBFcnJvcjogJHthdXRoRXJyLm1lc3NhZ2V9KWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzdWNjZXNzTXNnID0gYXV0aFVwZGF0ZWRcclxuICAgICAgICA/ICdBY2NvdW50ICYgUHJvZmlsZSB1cGRhdGVkISdcclxuICAgICAgICA6ICdQcm9maWxlIHVwZGF0ZWQhJyArIGF1dGhFcnJvck1zZztcclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGF1dGhVcGRhdGVkID8gJ0FjY291bnQgJiBQcm9maWxlIHVwZGF0ZWQhJyA6ICdQcm9maWxlIHVwZGF0ZWQhJyArIGF1dGhFcnJvck1zZyB9O1xyXG5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZpcmVzdG9yZSBVcGRhdGUgRXJyb3I6XCIsIGUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVjYWxjdWxhdGVMZWFkZXJib2FyZCA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBwZW5kaW5nIGJldHNcclxuICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgnc3RhdHVzJywgJz09JywgJ3BlbmRpbmcnKSk7XHJcbiAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7XHJcbiAgICAgIC8vIElmIGluZGV4IG1pc3NpbmcsIHRoaXMgbGluZSB0aHJvd3MuXHJcblxyXG4gICAgICBjb25zdCBpbnZlc3RtZW50c0J5VXNlciA9IHt9O1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBjb25zdCBiZXQgPSBkb2MuZGF0YSgpO1xyXG4gICAgICAgIGlmICghaW52ZXN0bWVudHNCeVVzZXJbYmV0LnVzZXJJZF0pIGludmVzdG1lbnRzQnlVc2VyW2JldC51c2VySWRdID0gMDtcclxuICAgICAgICBpbnZlc3RtZW50c0J5VXNlcltiZXQudXNlcklkXSArPSAoYmV0LmFtb3VudCB8fCAwKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBGZXRjaCBhbGwgdXNlcnMgdG8gdXBkYXRlIHRoZWlyIHN0YXRzXHJcbiAgICAgIGNvbnN0IHVzZXJzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ3VzZXJzJykpO1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgdXBkYXRlQ291bnQgPSAwO1xyXG5cclxuICAgICAgdXNlcnNTbmFwLmRvY3MuZm9yRWFjaCh1c2VyRG9jID0+IHtcclxuICAgICAgICBjb25zdCB1aWQgPSB1c2VyRG9jLmlkO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbnZlc3RlZCA9IHVzZXJEb2MuZGF0YSgpLmludmVzdGVkIHx8IDA7XHJcbiAgICAgICAgY29uc3QgY29ycmVjdEludmVzdGVkID0gaW52ZXN0bWVudHNCeVVzZXJbdWlkXSB8fCAwO1xyXG5cclxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBkaWZmZXJlbnQgdG8gc2F2ZSB3cml0ZXNcclxuICAgICAgICBpZiAoTWF0aC5hYnMoY3VycmVudEludmVzdGVkIC0gY29ycmVjdEludmVzdGVkKSA+IDAuMDEpIHtcclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyRG9jLnJlZiwgeyBpbnZlc3RlZDogY29ycmVjdEludmVzdGVkIH0pO1xyXG4gICAgICAgICAgdXBkYXRlQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHVwZGF0ZUNvdW50ID4gMCkgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBSZWNhbGN1bGF0ZWQhIFVwZGF0ZWQgJHt1cGRhdGVDb3VudH0gdXNlcnMuYCB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiUmVjYWxjIERldGFpbGVkIEVycm9yOlwiLCBlKTtcclxuICAgICAgbGV0IGVyck1zZyA9IGUubWVzc2FnZSB8fCBTdHJpbmcoZSk7XHJcbiAgICAgIGlmIChlcnJNc2cuaW5jbHVkZXMoXCJpbmRleFwiKSkgZXJyTXNnID0gXCJNaXNzaW5nIEluZGV4ISBDaGVjayBCcm93c2VyIENvbnNvbGUgKEYxMikgZm9yIHRoZSBjcmVhdGlvbiBsaW5rLlwiO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVyck1zZyB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbW90ZVNlbGYgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCB7IHJvbGU6ICd1c2VyJyB9KTtcclxuICAgICAgLy8gc2V0VXNlcih7Li4udXNlciwgcm9sZTogJ3VzZXInfSk7IC8vIE9wdGltaXN0aWMgdXBkYXRlXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVBY2NvdW50ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlcklkID0gdXNlci5pZDtcclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuICAgICAgbGV0IG9wQ291bnQgPSAwO1xyXG5cclxuICAgICAgLy8gMS4gRGVsZXRlIGFsbCB1c2VyJ3MgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgYmV0c1NuYXAuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgYmF0Y2guZGVsZXRlKGRvYy5yZWYpO1xyXG4gICAgICAgIG9wQ291bnQrKztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBEZWxldGUgYWxsIHVzZXIncyBpZGVhc1xyXG4gICAgICBjb25zdCBpZGVhc1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBpZGVhc1NuYXAgPSBhd2FpdCBnZXREb2NzKGlkZWFzUSk7XHJcbiAgICAgIGlkZWFzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDMuIERlbGV0ZSBVc2VyIFByb2ZpbGVcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkKTtcclxuICAgICAgYmF0Y2guZGVsZXRlKHVzZXJSZWYpO1xyXG4gICAgICBvcENvdW50Kys7XHJcblxyXG4gICAgICBpZiAob3BDb3VudCA+IDApIHtcclxuICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gNC4gRGVsZXRlIEF1dGggQWNjb3VudFxyXG4gICAgICBpZiAoYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgIGF3YWl0IGF1dGguY3VycmVudFVzZXIuZGVsZXRlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkRlbGV0ZSBFcnJvcjpcIiwgZSk7XHJcbiAgICAgIGlmIChlLmNvZGUgPT09ICdhdXRoL3JlcXVpcmVzLXJlY2VudC1sb2dpbicpIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUGxlYXNlIGxvZyBvdXQgYW5kIGxvZyBpbiBhZ2FpbiB0byBkZWxldGUgeW91ciBhY2NvdW50LlwiIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKHRhcmdldFVzZXJJZCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuICAgICAgbGV0IG9wQ291bnQgPSAwO1xyXG5cclxuICAgICAgLy8gMS4gRGVsZXRlIGFsbCB1c2VyJ3MgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB0YXJnZXRVc2VySWQpKTtcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgYmV0c1NuYXAuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgYmF0Y2guZGVsZXRlKGRvYy5yZWYpO1xyXG4gICAgICAgIG9wQ291bnQrKztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBEZWxldGUgYWxsIHVzZXIncyBpZGVhc1xyXG4gICAgICBjb25zdCBpZGVhc1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHRhcmdldFVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBpZGVhc1NuYXAgPSBhd2FpdCBnZXREb2NzKGlkZWFzUSk7XHJcbiAgICAgIGlkZWFzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDMuIERlbGV0ZSBVc2VyIFByb2ZpbGVcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdGFyZ2V0VXNlcklkKTtcclxuICAgICAgYmF0Y2guZGVsZXRlKHVzZXJSZWYpO1xyXG4gICAgICBvcENvdW50Kys7XHJcblxyXG4gICAgICBpZiAob3BDb3VudCA+IDApIHtcclxuICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHN5bmNFdmVudFN0YXRzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gRmV0Y2ggYWxsIGJldHNcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdiZXRzJykpO1xyXG4gICAgICBjb25zdCBhbGxCZXRzID0gYmV0c1NuYXAuZG9jcy5tYXAoZCA9PiBkLmRhdGEoKSk7XHJcblxyXG4gICAgICAvLyAyLiBBZ2dyZWdhdGUgU3RhdHNcclxuICAgICAgY29uc3Qgc3RhdHNNYXAgPSB7fTsgLy8gZXZlbnRJZCAtPiB7IGNvdW50czoge30sIGFtb3VudHM6IHt9LCB0b3RhbEJldHM6IDAsIHRvdGFsUG9vbDogMCB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGJldCBvZiBhbGxCZXRzKSB7XHJcbiAgICAgICAgaWYgKCFzdGF0c01hcFtiZXQuZXZlbnRJZF0pIHtcclxuICAgICAgICAgIHN0YXRzTWFwW2JldC5ldmVudElkXSA9IHsgY291bnRzOiB7fSwgYW1vdW50czoge30sIHRvdGFsQmV0czogMCwgdG90YWxQb29sOiAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHMgPSBzdGF0c01hcFtiZXQuZXZlbnRJZF07XHJcbiAgICAgICAgcy50b3RhbEJldHMgKz0gMTtcclxuICAgICAgICBzLnRvdGFsUG9vbCArPSAoYmV0LmFtb3VudCB8fCAwKTtcclxuICAgICAgICBzLmNvdW50c1tiZXQub3V0Y29tZUlkXSA9IChzLmNvdW50c1tiZXQub3V0Y29tZUlkXSB8fCAwKSArIDE7XHJcbiAgICAgICAgcy5hbW91bnRzW2JldC5vdXRjb21lSWRdID0gKHMuYW1vdW50c1tiZXQub3V0Y29tZUlkXSB8fCAwKSArIChiZXQuYW1vdW50IHx8IDApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAzLiBVcGRhdGUgRXZlbnRzXHJcbiAgICAgIGNvbnN0IGV2ZW50c1NuYXAgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdldmVudHMnKSk7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZVByb21pc2VzID0gZXZlbnRzU25hcC5kb2NzLm1hcChhc3luYyAoZG9jU25hcCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0gc3RhdHNNYXBbZG9jU25hcC5pZF0gfHwgeyBjb3VudHM6IHt9LCBhbW91bnRzOiB7fSwgdG90YWxCZXRzOiAwLCB0b3RhbFBvb2w6IDAgfTtcclxuICAgICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZG9jU25hcC5pZCksIHsgc3RhdHMgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodXBkYXRlUHJvbWlzZXMpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYWRkQ29tbWVudCA9IGFzeW5jIChldmVudElkLCB0ZXh0KSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0xvZ2luIHRvIGNvbW1lbnQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2NvbW1lbnRzJyksIHtcclxuICAgICAgICBldmVudElkLFxyXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICB0ZXh0LFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbWFya05vdGlmaWNhdGlvblJlYWQgPSBhc3luYyAobm90aWZJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ25vdGlmaWNhdGlvbnMnLCBub3RpZklkKSwgeyByZWFkOiB0cnVlIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9XHJcbiAgfTtcclxuXHJcblxyXG5cclxuICBjb25zdCBnZXRVc2VyU3RhdHMgPSBhc3luYyAodGFyZ2V0VXNlcklkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB0YXJnZXRVc2VySWQpO1xyXG4gICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcclxuICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyU25hcC5leGlzdHMoKSA/IHVzZXJTbmFwLmRhdGEoKSA6IHt9O1xyXG5cclxuICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgbGV0IHdpbnMgPSAwO1xyXG4gICAgICBsZXQgbG9zc2VzID0gMDtcclxuICAgICAgbGV0IHByb2ZpdCA9IDA7XHJcbiAgICAgIGxldCBzZXR0bGVkQ291bnQgPSAwO1xyXG5cclxuICAgICAgc25hcC5kb2NzLmZvckVhY2goZCA9PiB7XHJcbiAgICAgICAgY29uc3QgYiA9IGQuZGF0YSgpO1xyXG4gICAgICAgIGlmIChiLnN0YXR1cyA9PT0gJ3dvbicpIHtcclxuICAgICAgICAgIHdpbnMrKztcclxuICAgICAgICAgIHNldHRsZWRDb3VudCsrO1xyXG4gICAgICAgICAgcHJvZml0ICs9ICgoYi5wb3RlbnRpYWxQYXlvdXQgfHwgKGIuYW1vdW50ICogYi5vZGRzKSkgLSBiLmFtb3VudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiLnN0YXR1cyA9PT0gJ2xvc3QnKSB7XHJcbiAgICAgICAgICBsb3NzZXMrKztcclxuICAgICAgICAgIHNldHRsZWRDb3VudCsrO1xyXG4gICAgICAgICAgcHJvZml0IC09IGIuYW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0b3RhbCA9IHNuYXAuc2l6ZTtcclxuICAgICAgY29uc3Qgd2luUmF0ZSA9IHNldHRsZWRDb3VudCA+IDAgPyAoKHdpbnMgLyBzZXR0bGVkQ291bnQpICogMTAwKS50b0ZpeGVkKDEpIDogMDtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBzdGF0czogeyB3aW5zLCBsb3NzZXMsIHRvdGFsLCB3aW5SYXRlLCBwcm9maXQgfSxcclxuICAgICAgICBwcm9maWxlOiB7IGJpbzogdXNlckRhdGEuYmlvIHx8ICcnLCBwcm9maWxlUGljOiB1c2VyRGF0YS5wcm9maWxlUGljLCB1c2VybmFtZTogdXNlckRhdGEudXNlcm5hbWUgfVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9OyB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0V2Vla2x5TGVhZGVyYm9hcmQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgZGF5ID0gZC5nZXREYXkoKTtcclxuICAgICAgY29uc3QgZGlmZiA9IGQuZ2V0RGF0ZSgpIC0gZGF5O1xyXG4gICAgICBjb25zdCBzdGFydE9mV2VlayA9IG5ldyBEYXRlKGQuc2V0RGF0ZShkaWZmKSk7XHJcbiAgICAgIHN0YXJ0T2ZXZWVrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgICBjb25zdCBpc29TdHIgPSBzdGFydE9mV2Vlay50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdzdGF0dXMnLCAnaW4nLCBbJ3dvbicsICdsb3N0J10pLCB3aGVyZSgnc2V0dGxlZEF0JywgJz49JywgaXNvU3RyKSk7XHJcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG5cclxuICAgICAgY29uc3Qgc3RhdHMgPSB7fTtcclxuICAgICAgc25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBjb25zdCBiID0gZG9jLmRhdGEoKTtcclxuICAgICAgICBpZiAoIXN0YXRzW2IudXNlcklkXSkgc3RhdHNbYi51c2VySWRdID0gMDtcclxuICAgICAgICBpZiAoYi5zdGF0dXMgPT09ICd3b24nKSB7XHJcbiAgICAgICAgICBzdGF0c1tiLnVzZXJJZF0gKz0gKChiLnBvdGVudGlhbFBheW91dCB8fCAoYi5hbW91bnQgKiBiLm9kZHMpKSAtIGIuYW1vdW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3RhdHNbYi51c2VySWRdIC09IGIuYW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBsZWFkZXJib2FyZCA9IE9iamVjdC5lbnRyaWVzKHN0YXRzKS5tYXAoKFt1c2VySWQsIHByb2ZpdF0pID0+ICh7IHVzZXJJZCwgcHJvZml0IH0pKTtcclxuICAgICAgbGVhZGVyYm9hcmQuc29ydCgoYSwgYikgPT4gYi5wcm9maXQgLSBhLnByb2ZpdCk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGxlYWRlcmJvYXJkIH07XHJcbiAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07IH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEFwcENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tcclxuICAgICAgdXNlciwgc2lnbnVwLCBzaWduaW4sIGxvZ291dCwgdXBkYXRlVXNlciwgc3VibWl0SWRlYSwgZGVsZXRlSWRlYSwgZGVsZXRlQWNjb3VudCwgZGVsZXRlVXNlciwgZGVtb3RlU2VsZiwgc3luY0V2ZW50U3RhdHMsXHJcbiAgICAgIGV2ZW50cywgY3JlYXRlRXZlbnQsIHJlc29sdmVFdmVudCwgdXBkYXRlRXZlbnQsIGRlbGV0ZUV2ZW50LCB0b2dnbGVGZWF0dXJlZCwgcmVjYWxjdWxhdGVMZWFkZXJib2FyZCwgYWRkQ29tbWVudCwgbWFya05vdGlmaWNhdGlvblJlYWQsIGdldFVzZXJTdGF0cywgZ2V0V2Vla2x5TGVhZGVyYm9hcmQsXHJcbiAgICAgIGJldHMsIHBsYWNlQmV0LCBpc0xvYWRlZCwgaXNGaXJlYmFzZTogdHJ1ZSwgdXNlcnMsIGlkZWFzLCBkYlxyXG4gICAgfX0+XHJcbiAgICAgIHtjaGlsZHJlbn1cclxuICAgIDwvQXBwQ29udGV4dC5Qcm92aWRlcj5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQXBwKCkge1xyXG4gIHJldHVybiB1c2VDb250ZXh0KEFwcENvbnRleHQpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJjb2xsZWN0aW9uIiwiYWRkRG9jIiwib25TbmFwc2hvdCIsInF1ZXJ5Iiwib3JkZXJCeSIsImRvYyIsInNldERvYyIsInVwZGF0ZURvYyIsImdldERvYyIsIndoZXJlIiwiaW5jcmVtZW50IiwiZGVsZXRlRG9jIiwiZ2V0RG9jcyIsImxpbWl0Iiwid3JpdGVCYXRjaCIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbk91dCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInVwZGF0ZUVtYWlsIiwidXBkYXRlUGFzc3dvcmQiLCJ2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCIsImRiIiwiYXV0aCIsIkFwcENvbnRleHQiLCJBcHBQcm92aWRlciIsImNoaWxkcmVuIiwidXNlciIsInNldFVzZXIiLCJldmVudHMiLCJzZXRFdmVudHMiLCJiZXRzIiwic2V0QmV0cyIsImlkZWFzIiwic2V0SWRlYXMiLCJpc0xvYWRlZCIsInNldElzTG9hZGVkIiwidGltZXIiLCJzZXRUaW1lb3V0IiwicHJldiIsImNvbnNvbGUiLCJ3YXJuIiwiY2xlYXJUaW1lb3V0IiwidW5zdWJzY3JpYmVQcm9maWxlIiwidW5zdWJzY3JpYmVBdXRoIiwiZmlyZWJhc2VVc2VyIiwiaWQiLCJ1aWQiLCJlbWFpbCIsInVzZXJuYW1lIiwiZGlzcGxheU5hbWUiLCJzcGxpdCIsInJvbGUiLCJ1c2VyUmVmIiwiZG9jU25hcCIsImV4aXN0cyIsImRhdGEiLCJsb2ciLCJuZXdVc2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImJhbGFuY2UiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImFsZXJ0IiwidXNlcnMiLCJzZXRVc2VycyIsImV2ZW50c1F1ZXJ5IiwidW5zdWJFdmVudHMiLCJzbmFwc2hvdCIsImV2ZW50c0xpc3QiLCJkb2NzIiwibWFwIiwic29ydCIsImEiLCJiIiwic3RhdHVzIiwic3RhcnRBdCIsImlkZWFzUXVlcnkiLCJ1bnN1YklkZWFzIiwibGlzdCIsInN1Ym1pdHRlZEF0IiwidXNlcnNRdWVyeSIsInVuc3ViVXNlcnMiLCJiZXRzUXVlcnkiLCJ1bnN1YkJldHMiLCJteUJldHMiLCJwbGFjZWRBdCIsInNpZ251cCIsInBhc3N3b3JkIiwicmVzcCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic2lnbmluIiwiZW1haWxPclVzZXJuYW1lIiwicSIsInNuYXAiLCJlbXB0eSIsImxvZ291dCIsInBsYWNlQmV0IiwiZXZlbnRJZCIsIm91dGNvbWVJZCIsImFtb3VudCIsImV2ZW50IiwiZmluZCIsImUiLCJxRXhpc3RpbmciLCJzbmFwRXhpc3RpbmciLCJvdGhlclNpZGVCZXQiLCJkIiwib3V0Y29tZSIsIm91dGNvbWVzIiwibyIsImludmVzdGVkIiwidXNlcklkIiwib3V0Y29tZUxhYmVsIiwibGFiZWwiLCJldmVudFRpdGxlIiwidGl0bGUiLCJwYXJzZUZsb2F0Iiwib2RkcyIsInBvdGVudGlhbFBheW91dCIsImV2ZW50UmVmIiwic3RhdHNFcnIiLCJjcmVhdGVFdmVudCIsImV2ZW50RGF0YSIsImRlbGV0ZUV2ZW50IiwidG9nZ2xlRmVhdHVyZWQiLCJjdXJyZW50U3RhdHVzIiwiZmVhdHVyZWQiLCJyZXNvbHZlRXZlbnQiLCJ3aW5uZXJPdXRjb21lSWQiLCJiZXRzUSIsImJldHNTbmFwIiwiYmF0Y2giLCJmb3JFYWNoIiwiYmV0RG9jIiwiYmV0IiwiaXNXaW5uZXIiLCJ1cGRhdGUiLCJyZWYiLCJzZXR0bGVkQXQiLCJub3RpZlJlZiIsInNldCIsInR5cGUiLCJ0b0ZpeGVkIiwicmVhZCIsImNvbW1pdCIsInVwZGF0ZUV2ZW50Iiwic3VibWl0SWRlYSIsImlkZWFUZXh0IiwicUR1cCIsInNuYXBEdXAiLCJ0b2RheSIsInRvRGF0ZVN0cmluZyIsImN1cnJlbnRDb3VudCIsInN1Ym1pc3Npb25EYXRhIiwiZGF0ZSIsImNvdW50IiwidGV4dCIsIm5ld0NvdW50IiwiZGVsZXRlSWRlYSIsImlkZWFJZCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwiZmlyZXN0b3JlVXBkYXRlcyIsImF1dGhVcGRhdGVkIiwiYXV0aEVycm9yTXNnIiwiY3VycmVudFVzZXIiLCJjdXJyZW50QXV0aEVtYWlsIiwiZW1haWxFcnIiLCJjb2RlIiwibGVuZ3RoIiwicmVsb2FkIiwiYXV0aEVyciIsInN1Y2Nlc3NNc2ciLCJyZWNhbGN1bGF0ZUxlYWRlcmJvYXJkIiwiaW52ZXN0bWVudHNCeVVzZXIiLCJ1c2Vyc1NuYXAiLCJ1cGRhdGVDb3VudCIsInVzZXJEb2MiLCJjdXJyZW50SW52ZXN0ZWQiLCJjb3JyZWN0SW52ZXN0ZWQiLCJNYXRoIiwiYWJzIiwiZXJyTXNnIiwiU3RyaW5nIiwiZGVtb3RlU2VsZiIsImRlbGV0ZUFjY291bnQiLCJvcENvdW50IiwiZGVsZXRlIiwiaWRlYXNRIiwiaWRlYXNTbmFwIiwiZGVsZXRlVXNlciIsInRhcmdldFVzZXJJZCIsInN5bmNFdmVudFN0YXRzIiwiYWxsQmV0cyIsInN0YXRzTWFwIiwiY291bnRzIiwiYW1vdW50cyIsInRvdGFsQmV0cyIsInRvdGFsUG9vbCIsInMiLCJldmVudHNTbmFwIiwidXBkYXRlUHJvbWlzZXMiLCJzdGF0cyIsIlByb21pc2UiLCJhbGwiLCJhZGRDb21tZW50IiwibWFya05vdGlmaWNhdGlvblJlYWQiLCJub3RpZklkIiwiZ2V0VXNlclN0YXRzIiwidXNlclNuYXAiLCJ1c2VyRGF0YSIsIndpbnMiLCJsb3NzZXMiLCJwcm9maXQiLCJzZXR0bGVkQ291bnQiLCJ0b3RhbCIsInNpemUiLCJ3aW5SYXRlIiwicHJvZmlsZSIsImJpbyIsInByb2ZpbGVQaWMiLCJnZXRXZWVrbHlMZWFkZXJib2FyZCIsImRheSIsImdldERheSIsImRpZmYiLCJnZXREYXRlIiwic3RhcnRPZldlZWsiLCJzZXREYXRlIiwic2V0SG91cnMiLCJpc29TdHIiLCJsZWFkZXJib2FyZCIsIk9iamVjdCIsImVudHJpZXMiLCJQcm92aWRlciIsInZhbHVlIiwiaXNGaXJlYmFzZSIsInVzZUFwcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/store.js\n"));

/***/ })

});