"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/store.js":
/*!**************************!*\
  !*** ./src/lib/store.js ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppProvider: function() { return /* binding */ AppProvider; },\n/* harmony export */   useApp: function() { return /* binding */ useApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ AppProvider,useApp auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\nconst AppContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\nfunction AppProvider(param) {\n    let { children } = param;\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bets, setBets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [ideas, setIdeas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Safety timeout: If Firebase auth hangs for >1s, just load the app (as signed out) to prevent being stuck.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const timer = setTimeout(()=>{\n            setIsLoaded((prev)=>{\n                if (!prev) console.warn(\"Firebase auth slow - forcing load state\");\n                return true;\n            });\n        }, 1200);\n        return ()=>clearTimeout(timer);\n    }, []);\n    // --- 1. Auth & User Profile Listener ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let unsubscribeProfile = null;\n        // Auth Listener\n        const unsubscribeAuth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, (firebaseUser)=>{\n            // 1. Clean up previous profile listener if any\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n                unsubscribeProfile = null;\n            }\n            if (firebaseUser) {\n                // User is signed in -> Set basic auth user immediately to prevent logout loop\n                // We will enrich this with DB data in a moment\n                setUser((prev)=>prev || {\n                        id: firebaseUser.uid,\n                        email: firebaseUser.email,\n                        username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                        role: \"user\"\n                    });\n                // Listen to Firestore Profile\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", firebaseUser.uid);\n                unsubscribeProfile = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(userRef, (docSnap)=>{\n                    if (docSnap.exists()) {\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...docSnap.data()\n                        });\n                    } else {\n                        // Document does not exist (e.g. first login or previous error).\n                        console.log(\">>> DETECTED NEW USER (No Profile Found) - Creating Profile...\");\n                        // Auto-create the user profile in Firestore\n                        const newUser = {\n                            email: firebaseUser.email,\n                            username: firebaseUser.displayName || firebaseUser.email.split(\"@\")[0],\n                            role: firebaseUser.email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                            balance: 1000,\n                            createdAt: new Date().toISOString()\n                        };\n                        // Write to DB\n                        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, newUser).then(()=>{\n                            console.log(\">>> SUCCESSFULLY CREATED PROFILE FOR:\", newUser.email);\n                        // alert(\"Welcome! Your profile has been created with $1000.\");\n                        }).catch((err)=>{\n                            console.error(\">>> ERROR CREATING PROFILE:\", err);\n                            alert(\"Error creating profile. Check permissions.\");\n                        });\n                        // Set local state\n                        setUser({\n                            id: firebaseUser.uid,\n                            ...newUser\n                        });\n                    }\n                    setIsLoaded(true);\n                });\n            } else {\n                // User is signed out\n                setUser(null);\n                setBets([]);\n                setIsLoaded(true);\n            }\n        });\n        // Cleanup function when component unmounts\n        return ()=>{\n            unsubscribeAuth();\n            if (unsubscribeProfile) {\n                unsubscribeProfile();\n            }\n        };\n    }, []);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // List of all users for leaderboard\n    // ... (existing timeout code) ...\n    // --- 2. Data Listeners (Events, Ideas, Users) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Listen to Events (Limit 50 active)\n        const eventsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubEvents = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(eventsQuery, (snapshot)=>{\n            const eventsList = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            eventsList.sort((a, b)=>{\n                // Open events first\n                if (a.status === \"open\" && b.status !== \"open\") return -1;\n                if (a.status !== \"open\" && b.status === \"open\") return 1;\n                // Then sort by startAt date (ascending: earliest date first)\n                return new Date(a.startAt) - new Date(b.startAt);\n            });\n            setEvents(eventsList);\n        });\n        // Listen to Ideas (Limit 50 recent)\n        // Removed orderBy to avoid missing index issues. Sorting client-side.\n        const ideasQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubIdeas = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(ideasQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            list.sort((a, b)=>new Date(b.submittedAt) - new Date(a.submittedAt));\n            setIdeas(list);\n        }, (error)=>{\n            console.error(\"Error listening to ideas:\", error);\n        });\n        // Listen to Users (Global List for Leaderboard & Admin)\n        const usersQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        const unsubUsers = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(usersQuery, (snapshot)=>{\n            const list = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Client-side sort by balance desc\n            list.sort((a, b)=>(b.balance || 0) - (a.balance || 0));\n            setUsers(list);\n        });\n        return ()=>{\n            unsubEvents();\n            unsubIdeas();\n            unsubUsers();\n        };\n    }, []);\n    // --- 3. Bets Listener (Only for logged in user) ---\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!user) {\n            setBets([]);\n            return;\n        }\n        const betsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(100));\n        const unsubBets = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(betsQuery, (snapshot)=>{\n            // We'll trust the client side sorting for now or add orderBy index later\n            const myBets = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            myBets.sort((a, b)=>new Date(b.placedAt) - new Date(a.placedAt));\n            setBets(myBets);\n        // localStorage.setItem('bet_bets_cache', JSON.stringify(myBets));\n        });\n        return ()=>unsubBets();\n    }, [\n        user === null || user === void 0 ? void 0 : user.id\n    ]); // Only re-run if user ID changes is tricky, better safe dependency\n    // --- Actions ---\n    const signup = async (email, username, password)=>{\n        try {\n            const resp = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.createUserWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n            // Create User Document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", resp.user.uid), {\n                email,\n                username: username || email.split(\"@\")[0],\n                role: email.toLowerCase().includes(\"admin\") ? \"admin\" : \"user\",\n                balance: 1000,\n                createdAt: new Date().toISOString()\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    };\n    const signin = async (emailOrUsername, password)=>{\n        try {\n            let email = emailOrUsername.trim();\n            // If it looks like an email, just try it directly\n            if (email.includes(\"@\")) {\n                try {\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, email, password);\n                    return {\n                        success: true\n                    };\n                } catch (e) {\n                    console.error(\"Email login failed\", e);\n                    return {\n                        success: false,\n                        error: e.message\n                    };\n                }\n            }\n            // Username lookup logic\n            const usernameInput = email;\n            const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\");\n            let candidateEmails = new Set();\n            // Helper to fetch and add emails (No LIMIT to ensure we find the right one)\n            const addCandidates = async (param, val)=>{\n                try {\n                    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(col, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(param, \"==\", val)); // Removed limit\n                    const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n                    snap.forEach((doc)=>{\n                        const data = doc.data();\n                        if (data.email) candidateEmails.add(data.email);\n                    });\n                } catch (err) {\n                    console.error(\"Query failed for\", val, err);\n                }\n            };\n            // 1. Exact Match\n            await addCandidates(\"username\", usernameInput);\n            // 2. Lowercase\n            await addCandidates(\"username\", usernameInput.toLowerCase());\n            // 3. Capitalized (Try standard First Capital)\n            const capitalized = usernameInput.charAt(0).toUpperCase() + usernameInput.slice(1).toLowerCase();\n            await addCandidates(\"username\", capitalized);\n            // 4. UPPERCASE (Just in case)\n            await addCandidates(\"username\", usernameInput.toUpperCase());\n            console.log(\"[LoginDebug] Username '\".concat(usernameInput, \"' resolved to candidates:\"), Array.from(candidateEmails));\n            if (candidateEmails.size === 0) {\n                return {\n                    success: false,\n                    error: \"Username '\".concat(usernameInput, \"' not found.\")\n                };\n            }\n            // Try each email\n            let tried = [];\n            for (const candidateEmail of candidateEmails){\n                try {\n                    // Attempt 1: Raw Password\n                    await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, candidateEmail, password);\n                    console.log(\"[LoginDebug] Success with \".concat(candidateEmail));\n                    return {\n                        success: true\n                    };\n                } catch (error) {\n                    // Attempt 2: Trimmed Password\n                    if (password.trim() !== password) {\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, candidateEmail, password.trim());\n                            console.log(\"[LoginDebug] Success with \".concat(candidateEmail, \" (trimmed)\"));\n                            return {\n                                success: true\n                            };\n                        } catch (e2) {}\n                    }\n                    tried.push(candidateEmail);\n                    if (error.code === \"auth/invalid-credential\" || error.code === \"auth/wrong-password\") {\n                        continue;\n                    }\n                    return {\n                        success: false,\n                        error: \"Account error (\".concat(candidateEmail, \"): \").concat(error.code)\n                    };\n                }\n            }\n            // If loop finishes, none worked.\n            console.warn(\"[LoginDebug] Failed all candidates. Tried:\", tried);\n            return {\n                success: false,\n                error: \"Login matched the email(s): \".concat(tried.join(\", \"), \". But the password was incorrect.\")\n            };\n        } catch (error) {\n            console.error(error);\n            return {\n                success: false,\n                error: \"System Error: \" + error.message\n            };\n        }\n    };\n    const logout = async ()=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(error);\n        }\n    };\n    const placeBet = async (eventId, outcomeId, amount)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        if (user.balance < amount) return {\n            success: false,\n            error: \"Insufficient funds\"\n        };\n        const event = events.find((e)=>e.id === eventId);\n        if (!event || event.status !== \"open\") return {\n            success: false,\n            error: \"Event is locked\"\n        };\n        // Check for existing bets on OTHER sides\n        const qExisting = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n        const snapExisting = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qExisting);\n        const otherSideBet = snapExisting.docs.find((d)=>d.data().outcomeId !== outcomeId);\n        if (otherSideBet) {\n            return {\n                success: false,\n                error: \"Loyalty check! You already bet on the other side. No switching.\"\n            };\n        }\n        const outcome = event.outcomes.find((o)=>o.id === outcomeId);\n        try {\n            // 1. Deduct Balance & Add to Invested\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-amount),\n                invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount) // Track active wagers for leaderboard\n            });\n            // 2. Create Bet\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), {\n                userId: user.id,\n                username: user.username,\n                eventId,\n                outcomeId,\n                outcomeLabel: outcome.label,\n                eventTitle: event.title,\n                amount: parseFloat(amount),\n                odds: outcome.odds,\n                potentialPayout: amount * outcome.odds,\n                status: \"pending\",\n                placedAt: new Date().toISOString()\n            });\n            // 3. Update Event Stats (Best Effort - ignore permission errors for now)\n            try {\n                const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                    [\"stats.counts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    [\"stats.amounts.\".concat(outcomeId)]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount),\n                    \"stats.totalBets\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(1),\n                    \"stats.totalPool\": (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(amount)\n                });\n            } catch (statsErr) {\n                console.warn(\"Could not update event stats (likely permission issue):\", statsErr);\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const createEvent = async (eventData)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), {\n                status: \"open\",\n                createdAt: new Date().toISOString(),\n                ...eventData\n            });\n        } catch (e) {\n            console.error(\"Error creating event\", e);\n        }\n    };\n    const deleteEvent = async (eventId)=>{\n        try {\n            // Note: This does NOT refund bets automatically in this simple version\n            // You would need Cloud Functions for robust backend logic\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(eventRef, {\n                status: \"deleted\"\n            }); // Soft delete is safer?\n            // For now, let's just actually delete it for cleanliness in the UI as requested previously\n            // but usually on local version we just filtered.\n            // Wait, Firestore deleteDoc is better.\n            // await deleteDoc(doc(db, 'events', eventId)); \n            // Let's stick to update to 'deleted' or just rely on the UI filter?\n            // Let's actually delete.\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId));\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const toggleFeatured = async (eventId, currentStatus)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                featured: !currentStatus\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const resolveEvent = async (eventId, winnerOutcomeId)=>{\n        try {\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            const eventRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId);\n            // 1. Mark Event as Settled (In Batch)\n            batch.update(eventRef, {\n                status: \"settled\",\n                winnerOutcomeId\n            });\n            // 2. Process Bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ); // Need all bets to settle\n            betsSnap.docs.forEach((betDoc)=>{\n                const bet = betDoc.data();\n                // Skip if already settled to avoid double-pay/deduct\n                if (bet.status !== \"pending\") return;\n                const isWinner = bet.outcomeId === winnerOutcomeId;\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                // Settle the bet document\n                batch.update(betDoc.ref, {\n                    status: isWinner ? \"won\" : \"lost\",\n                    settledAt: new Date().toISOString()\n                });\n                // Update User Balance & Invested\n                if (isWinner) {\n                    batch.update(userRef, {\n                        balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount)\n                    });\n                } else {\n                    batch.update(userRef, {\n                        invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount)\n                    });\n                }\n                // Create Notification\n                const notifRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\"));\n                batch.set(notifRef, {\n                    userId: bet.userId,\n                    type: \"result\",\n                    eventId: eventId,\n                    title: isWinner ? \"You Won!\" : \"Bet Lost\",\n                    message: isWinner ? \"You won $\".concat(bet.potentialPayout.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\") : \"You lost $\".concat(bet.amount.toFixed(2), \" on \").concat(bet.eventTitle, \" (\").concat(bet.outcomeLabel, \")\"),\n                    read: false,\n                    createdAt: new Date().toISOString()\n                });\n            });\n            await batch.commit();\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const fixStuckBets = async ()=>{\n        try {\n            const eventsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"settled\"));\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(eventsQ);\n            let totalFixed = 0;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            for (const eventDoc of eventsSnap.docs){\n                const event = eventDoc.data();\n                const winnerOutcomeId = event.winnerOutcomeId;\n                if (!winnerOutcomeId) continue;\n                const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"eventId\", \"==\", eventDoc.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n                const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n                betsSnap.docs.forEach((betDoc)=>{\n                    const bet = betDoc.data();\n                    // Double check it's pending\n                    if (bet.status !== \"pending\") return;\n                    const isWinner = bet.outcomeId === winnerOutcomeId;\n                    const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", bet.userId);\n                    batch.update(betDoc.ref, {\n                        status: isWinner ? \"won\" : \"lost\",\n                        settledAt: new Date().toISOString()\n                    });\n                    if (isWinner) {\n                        batch.update(userRef, {\n                            balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(bet.potentialPayout),\n                            invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount)\n                        });\n                    } else {\n                        batch.update(userRef, {\n                            invested: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(-bet.amount)\n                        });\n                    }\n                    totalFixed++;\n                });\n            }\n            if (totalFixed > 0) {\n                await batch.commit();\n            }\n            return {\n                success: true,\n                message: \"Fixed \".concat(totalFixed, \" stuck bets.\")\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteBet = async (betId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\", betId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateEvent = async (eventId, data)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), data);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const submitIdea = async (ideaText)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        // Duplicate Check\n        const qDup = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.id), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"text\", \"==\", ideaText));\n        const snapDup = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(qDup);\n        if (!snapDup.empty) {\n            return {\n                success: false,\n                error: \"You already suggested this! Hey switch it up.\"\n            };\n        }\n        // Check Daily Limit (Client-side check based on local user data, ideally backend does this)\n        const today = new Date().toDateString();\n        let currentCount = 0;\n        if (user.submissionData && user.submissionData.date === today) {\n            currentCount = user.submissionData.count;\n        }\n        if (currentCount >= 5) {\n            return {\n                success: false,\n                error: \"Daily limit reached (5/5). Come back tomorrow!\"\n            };\n        }\n        try {\n            // 1. Create Idea Doc\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), {\n                userId: user.id,\n                username: user.username,\n                text: ideaText,\n                submittedAt: new Date().toISOString()\n            });\n            // 2. Update User (Reward + Submission Count)\n            // If date different, simple set. If same, increment.\n            // Firestore update is tricky with nested objects, so we set the whole object.\n            // We calculate new count locally to ensure sync with the check.\n            const newCount = currentCount + 1;\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                balance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.increment)(15),\n                submissionData: {\n                    date: today,\n                    count: newCount\n                }\n            });\n            return {\n                success: true,\n                message: \"Idea submitted! +$15.00\"\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteIdea = async (ideaId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\", ideaId));\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const updateUser = async (updates)=>{\n        if (!user) return {\n            success: false,\n            error: \"Not logged in\"\n        };\n        try {\n            // 1. Update Firestore FIRST (Profile Pic, Username, etc.)\n            // This ensures that non-sensitive updates always succeed even if Auth fails.\n            const firestoreUpdates = {\n                ...updates\n            };\n            delete firestoreUpdates.password; // Don't store raw password in DB\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), firestoreUpdates);\n            // Update local state immediately for the UI\n            setUser((prev)=>({\n                    ...prev,\n                    ...firestoreUpdates\n                }));\n            // 2. Attempt Auth Updates (Sensitive: Email/Password)\n            let authUpdated = false;\n            let authErrorMsg = \"\";\n            try {\n                // Update Email\n                if (updates.email && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    const currentAuthEmail = _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.email;\n                    if (updates.email.toLowerCase() !== currentAuthEmail.toLowerCase()) {\n                        console.log(\"Debug: Attempting email update from \".concat(currentAuthEmail, \" to \").concat(updates.email));\n                        try {\n                            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                            authUpdated = true;\n                        } catch (emailErr) {\n                            if (emailErr.code === \"auth/operation-not-allowed\" || emailErr.message.includes(\"verify\")) {\n                                await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.verifyBeforeUpdateEmail)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.email);\n                                return {\n                                    success: true,\n                                    message: \"Profile saved & Verification sent to \".concat(updates.email, \".\")\n                                };\n                            }\n                            throw emailErr;\n                        }\n                    }\n                }\n                // Update Password\n                if (updates.password && updates.password.length > 0) {\n                    if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updatePassword)(_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser, updates.password);\n                        authUpdated = true;\n                    }\n                }\n                // Force refresh if Auth changed\n                if (authUpdated && _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                    await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.reload();\n                }\n            } catch (authErr) {\n                console.error(\"Auth Update Failed:\", authErr);\n                if (authErr.code === \"auth/requires-recent-login\") {\n                    authErrorMsg = \" (Note: Re-login required to update Email/Password)\";\n                } else {\n                    authErrorMsg = \" (Auth Error: \".concat(authErr.message, \")\");\n                }\n            }\n            const successMsg = authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg;\n            return {\n                success: true,\n                message: authUpdated ? \"Account & Profile updated!\" : \"Profile updated!\" + authErrorMsg\n            };\n        } catch (e) {\n            console.error(\"Firestore Update Error:\", e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const recalculateLeaderboard = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all pending bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"==\", \"pending\"));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            // If index missing, this line throws.\n            const investmentsByUser = {};\n            betsSnap.docs.forEach((doc)=>{\n                const bet = doc.data();\n                if (!investmentsByUser[bet.userId]) investmentsByUser[bet.userId] = 0;\n                investmentsByUser[bet.userId] += bet.amount || 0;\n            });\n            // 2. Fetch all users to update their stats\n            const usersSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\"));\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let updateCount = 0;\n            usersSnap.docs.forEach((userDoc)=>{\n                const uid = userDoc.id;\n                const currentInvested = userDoc.data().invested || 0;\n                const correctInvested = investmentsByUser[uid] || 0;\n                // Only update if different to save writes\n                if (Math.abs(currentInvested - correctInvested) > 0.01) {\n                    batch.update(userDoc.ref, {\n                        invested: correctInvested\n                    });\n                    updateCount++;\n                }\n            });\n            if (updateCount > 0) await batch.commit();\n            return {\n                success: true,\n                message: \"Recalculated! Updated \".concat(updateCount, \" users.\")\n            };\n        } catch (e) {\n            console.error(\"Recalc Detailed Error:\", e);\n            let errMsg = e.message || String(e);\n            if (errMsg.includes(\"index\")) errMsg = \"Missing Index! Check Browser Console (F12) for the creation link.\";\n            return {\n                success: false,\n                error: errMsg\n            };\n        }\n    };\n    const demoteSelf = async ()=>{\n        if (!user) return;\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", user.id), {\n                role: \"user\"\n            });\n            // setUser({...user, role: 'user'}); // Optimistic update\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteAccount = async ()=>{\n        if (!user) return {\n            success: false\n        };\n        try {\n            const userId = user.id;\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", userId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            // 4. Delete Auth Account\n            if (_firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser) {\n                await _firebase__WEBPACK_IMPORTED_MODULE_4__.auth.currentUser.delete();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(\"Delete Error:\", e);\n            if (e.code === \"auth/requires-recent-login\") {\n                return {\n                    success: false,\n                    error: \"Please log out and log in again to delete your account.\"\n                };\n            }\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const deleteUser = async (targetUserId)=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db);\n            let opCount = 0;\n            // 1. Delete all user's bets\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            betsSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 2. Delete all user's ideas\n            const ideasQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"ideas\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const ideasSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(ideasQ);\n            ideasSnap.docs.forEach((doc)=>{\n                batch.delete(doc.ref);\n                opCount++;\n            });\n            // 3. Delete User Profile\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            batch.delete(userRef);\n            opCount++;\n            if (opCount > 0) {\n                await batch.commit();\n            }\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const syncEventStats = async ()=>{\n        if (!user || user.role !== \"admin\") return {\n            success: false,\n            error: \"Unauthorized\"\n        };\n        try {\n            // 1. Fetch all bets\n            const betsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"));\n            const allBets = betsSnap.docs.map((d)=>d.data());\n            // 2. Aggregate Stats\n            const statsMap = {}; // eventId -> { counts: {}, amounts: {}, totalBets: 0, totalPool: 0 }\n            for (const bet of allBets){\n                if (!statsMap[bet.eventId]) {\n                    statsMap[bet.eventId] = {\n                        counts: {},\n                        amounts: {},\n                        totalBets: 0,\n                        totalPool: 0\n                    };\n                }\n                const s = statsMap[bet.eventId];\n                s.totalBets += 1;\n                s.totalPool += bet.amount || 0;\n                s.counts[bet.outcomeId] = (s.counts[bet.outcomeId] || 0) + 1;\n                s.amounts[bet.outcomeId] = (s.amounts[bet.outcomeId] || 0) + (bet.amount || 0);\n            }\n            // 3. Update Events\n            const eventsSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\"));\n            const updatePromises = eventsSnap.docs.map(async (docSnap)=>{\n                const stats = statsMap[docSnap.id] || {\n                    counts: {},\n                    amounts: {},\n                    totalBets: 0,\n                    totalPool: 0\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", docSnap.id), {\n                    stats\n                });\n            });\n            await Promise.all(updatePromises);\n            return {\n                success: true\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const addComment = async (eventId, text)=>{\n        if (!user) return {\n            success: false,\n            error: \"Login to comment\"\n        };\n        try {\n            const commentData = {\n                eventId,\n                userId: user.id,\n                username: user.username,\n                text,\n                createdAt: new Date().toISOString()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"comments\"), commentData);\n            // Update Event with lastComment for preview\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"events\", eventId), {\n                lastComment: {\n                    username: user.username,\n                    text: text.length > 50 ? text.substring(0, 50) + \"...\" : text,\n                    createdAt: commentData.createdAt\n                }\n            });\n            return {\n                success: true\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const markNotificationRead = async (notifId)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"notifications\", notifId), {\n                read: true\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n    const getUserStats = async (targetUserId)=>{\n        try {\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", targetUserId);\n            const userSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n            const userData = userSnap.exists() ? userSnap.data() : {};\n            const betsQ = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", targetUserId));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(betsQ);\n            let wins = 0;\n            let losses = 0;\n            let profit = 0;\n            let settledCount = 0;\n            snap.docs.forEach((d)=>{\n                const b = d.data();\n                if (b.status === \"won\") {\n                    wins++;\n                    settledCount++;\n                    profit += (b.potentialPayout || b.amount * b.odds) - b.amount;\n                } else if (b.status === \"lost\") {\n                    losses++;\n                    settledCount++;\n                    profit -= b.amount;\n                }\n            });\n            const total = snap.size;\n            const winRate = settledCount > 0 ? (wins / settledCount * 100).toFixed(1) : 0;\n            return {\n                success: true,\n                stats: {\n                    wins,\n                    losses,\n                    total,\n                    winRate,\n                    profit\n                },\n                profile: {\n                    bio: userData.bio || \"\",\n                    profilePic: userData.profilePic,\n                    username: userData.username\n                }\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    const getWeeklyLeaderboard = async ()=>{\n        try {\n            const d = new Date();\n            const day = d.getDay();\n            const diff = d.getDate() - day;\n            const startOfWeek = new Date(d.setDate(diff));\n            startOfWeek.setHours(0, 0, 0, 0);\n            const isoStr = startOfWeek.toISOString();\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_4__.db, \"bets\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"status\", \"in\", [\n                \"won\",\n                \"lost\"\n            ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"settledAt\", \">=\", isoStr));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            const stats = {};\n            snap.docs.forEach((doc)=>{\n                const b = doc.data();\n                if (!stats[b.userId]) stats[b.userId] = 0;\n                if (b.status === \"won\") {\n                    stats[b.userId] += (b.potentialPayout || b.amount * b.odds) - b.amount;\n                } else {\n                    stats[b.userId] -= b.amount;\n                }\n            });\n            const leaderboard = Object.entries(stats).map((param)=>{\n                let [userId, profit] = param;\n                return {\n                    userId,\n                    profit\n                };\n            });\n            leaderboard.sort((a, b)=>b.profit - a.profit);\n            return {\n                success: true,\n                data: leaderboard\n            };\n        } catch (e) {\n            console.error(e);\n            return {\n                success: false,\n                error: e.message\n            };\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AppContext.Provider, {\n        value: {\n            user,\n            signup,\n            signin,\n            logout,\n            updateUser,\n            submitIdea,\n            deleteIdea,\n            deleteAccount,\n            deleteUser,\n            demoteSelf,\n            syncEventStats,\n            events,\n            createEvent,\n            resolveEvent,\n            updateEvent,\n            fixStuckBets,\n            deleteBet,\n            deleteEvent,\n            toggleFeatured,\n            recalculateLeaderboard,\n            addComment,\n            markNotificationRead,\n            getUserStats,\n            getWeeklyLeaderboard,\n            bets,\n            placeBet,\n            isLoaded,\n            isFirebase: true,\n            users,\n            ideas,\n            db: _firebase__WEBPACK_IMPORTED_MODULE_4__.db\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\ffear\\\\OneDrive\\\\Documents\\\\GitHub\\\\bet-it-happens\\\\src\\\\lib\\\\store.js\",\n        lineNumber: 935,\n        columnNumber: 5\n    }, this);\n}\n_s(AppProvider, \"8lkHadQ9lcbI+p4G40QKBYMKzTo=\");\n_c = AppProvider;\nfunction useApp() {\n    _s1();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppContext);\n}\n_s1(useApp, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWk2QlQsU0FBU3dQOztJQUNkLE9BQU9wUixpREFBVUEsQ0FBQzJCO0FBQ3BCO0lBRmdCeVAiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9zdG9yZS5qcz81MTE0Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cInVzZSBjbGllbnRcIjtcclxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7XHJcbiAgY29sbGVjdGlvbiwgYWRkRG9jLCBvblNuYXBzaG90LCBxdWVyeSwgb3JkZXJCeSxcclxuICBkb2MsIHNldERvYywgdXBkYXRlRG9jLCBnZXREb2MsIHdoZXJlLCBpbmNyZW1lbnQsIGRlbGV0ZURvYywgZ2V0RG9jcywgbGltaXQsIHdyaXRlQmF0Y2hcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcbiAgc2lnbk91dCwgb25BdXRoU3RhdGVDaGFuZ2VkLCB1cGRhdGVFbWFpbCwgdXBkYXRlUGFzc3dvcmQsIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsXHJcbn0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbmltcG9ydCB7IGRiLCBhdXRoIH0gZnJvbSAnLi9maXJlYmFzZSc7XHJcblxyXG5jb25zdCBBcHBDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEFwcFByb3ZpZGVyKHsgY2hpbGRyZW4gfSkge1xyXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtldmVudHMsIHNldEV2ZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2JldHMsIHNldEJldHNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpZGVhcywgc2V0SWRlYXNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtpc0xvYWRlZCwgc2V0SXNMb2FkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBTYWZldHkgdGltZW91dDogSWYgRmlyZWJhc2UgYXV0aCBoYW5ncyBmb3IgPjFzLCBqdXN0IGxvYWQgdGhlIGFwcCAoYXMgc2lnbmVkIG91dCkgdG8gcHJldmVudCBiZWluZyBzdHVjay5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc2V0SXNMb2FkZWQocHJldiA9PiB7XHJcbiAgICAgICAgaWYgKCFwcmV2KSBjb25zb2xlLndhcm4oXCJGaXJlYmFzZSBhdXRoIHNsb3cgLSBmb3JjaW5nIGxvYWQgc3RhdGVcIik7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMTIwMCk7XHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIC0tLSAxLiBBdXRoICYgVXNlciBQcm9maWxlIExpc3RlbmVyIC0tLVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgdW5zdWJzY3JpYmVQcm9maWxlID0gbnVsbDtcclxuXHJcbiAgICAvLyBBdXRoIExpc3RlbmVyXHJcbiAgICBjb25zdCB1bnN1YnNjcmliZUF1dGggPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKGZpcmViYXNlVXNlcikgPT4ge1xyXG4gICAgICAvLyAxLiBDbGVhbiB1cCBwcmV2aW91cyBwcm9maWxlIGxpc3RlbmVyIGlmIGFueVxyXG4gICAgICBpZiAodW5zdWJzY3JpYmVQcm9maWxlKSB7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlKCk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZpcmViYXNlVXNlcikge1xyXG4gICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluIC0+IFNldCBiYXNpYyBhdXRoIHVzZXIgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBsb2dvdXQgbG9vcFxyXG4gICAgICAgIC8vIFdlIHdpbGwgZW5yaWNoIHRoaXMgd2l0aCBEQiBkYXRhIGluIGEgbW9tZW50XHJcbiAgICAgICAgc2V0VXNlcihwcmV2ID0+IHByZXYgfHwge1xyXG4gICAgICAgICAgaWQ6IGZpcmViYXNlVXNlci51aWQsXHJcbiAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgdXNlcm5hbWU6IGZpcmViYXNlVXNlci5kaXNwbGF5TmFtZSB8fCBmaXJlYmFzZVVzZXIuZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTGlzdGVuIHRvIEZpcmVzdG9yZSBQcm9maWxlXHJcbiAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgZmlyZWJhc2VVc2VyLnVpZCk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVQcm9maWxlID0gb25TbmFwc2hvdCh1c2VyUmVmLCAoZG9jU25hcCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5kb2NTbmFwLmRhdGEoKSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGRvZXMgbm90IGV4aXN0IChlLmcuIGZpcnN0IGxvZ2luIG9yIHByZXZpb3VzIGVycm9yKS5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gREVURUNURUQgTkVXIFVTRVIgKE5vIFByb2ZpbGUgRm91bmQpIC0gQ3JlYXRpbmcgUHJvZmlsZS4uLlwiKTtcclxuICAgICAgICAgICAgLy8gQXV0by1jcmVhdGUgdGhlIHVzZXIgcHJvZmlsZSBpbiBGaXJlc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgbmV3VXNlciA9IHtcclxuICAgICAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiBmaXJlYmFzZVVzZXIuZGlzcGxheU5hbWUgfHwgZmlyZWJhc2VVc2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXHJcbiAgICAgICAgICAgICAgcm9sZTogKGZpcmViYXNlVXNlci5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpKSA/ICdhZG1pbicgOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgYmFsYW5jZTogMTAwMCxcclxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV3JpdGUgdG8gREJcclxuICAgICAgICAgICAgc2V0RG9jKHVzZXJSZWYsIG5ld1VzZXIpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI+Pj4gU1VDQ0VTU0ZVTExZIENSRUFURUQgUFJPRklMRSBGT1I6XCIsIG5ld1VzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoXCJXZWxjb21lISBZb3VyIHByb2ZpbGUgaGFzIGJlZW4gY3JlYXRlZCB3aXRoICQxMDAwLlwiKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIj4+PiBFUlJPUiBDUkVBVElORyBQUk9GSUxFOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJvciBjcmVhdGluZyBwcm9maWxlLiBDaGVjayBwZXJtaXNzaW9ucy5cIik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgbG9jYWwgc3RhdGVcclxuICAgICAgICAgICAgc2V0VXNlcih7IGlkOiBmaXJlYmFzZVVzZXIudWlkLCAuLi5uZXdVc2VyIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgb3V0XHJcbiAgICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgICBzZXRCZXRzKFtdKTtcclxuICAgICAgICBzZXRJc0xvYWRlZCh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvbiB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgdW5zdWJzY3JpYmVBdXRoKCk7XHJcbiAgICAgIGlmICh1bnN1YnNjcmliZVByb2ZpbGUpIHtcclxuICAgICAgICB1bnN1YnNjcmliZVByb2ZpbGUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGUoW10pOyAvLyBMaXN0IG9mIGFsbCB1c2VycyBmb3IgbGVhZGVyYm9hcmRcclxuXHJcbiAgLy8gLi4uIChleGlzdGluZyB0aW1lb3V0IGNvZGUpIC4uLlxyXG5cclxuICAvLyAtLS0gMi4gRGF0YSBMaXN0ZW5lcnMgKEV2ZW50cywgSWRlYXMsIFVzZXJzKSAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGlzdGVuIHRvIEV2ZW50cyAoTGltaXQgNTAgYWN0aXZlKVxyXG4gICAgY29uc3QgZXZlbnRzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnZXZlbnRzJyksIGxpbWl0KDUwKSk7XHJcbiAgICBjb25zdCB1bnN1YkV2ZW50cyA9IG9uU25hcHNob3QoZXZlbnRzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICBjb25zdCBldmVudHNMaXN0ID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4gICAgICBldmVudHNMaXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAvLyBPcGVuIGV2ZW50cyBmaXJzdFxyXG4gICAgICAgIGlmIChhLnN0YXR1cyA9PT0gJ29wZW4nICYmIGIuc3RhdHVzICE9PSAnb3BlbicpIHJldHVybiAtMTtcclxuICAgICAgICBpZiAoYS5zdGF0dXMgIT09ICdvcGVuJyAmJiBiLnN0YXR1cyA9PT0gJ29wZW4nKSByZXR1cm4gMTtcclxuICAgICAgICAvLyBUaGVuIHNvcnQgYnkgc3RhcnRBdCBkYXRlIChhc2NlbmRpbmc6IGVhcmxpZXN0IGRhdGUgZmlyc3QpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuc3RhcnRBdCkgLSBuZXcgRGF0ZShiLnN0YXJ0QXQpO1xyXG4gICAgICB9KTtcclxuICAgICAgc2V0RXZlbnRzKGV2ZW50c0xpc3QpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTGlzdGVuIHRvIElkZWFzIChMaW1pdCA1MCByZWNlbnQpXHJcbiAgICAvLyBSZW1vdmVkIG9yZGVyQnkgdG8gYXZvaWQgbWlzc2luZyBpbmRleCBpc3N1ZXMuIFNvcnRpbmcgY2xpZW50LXNpZGUuXHJcbiAgICBjb25zdCBpZGVhc1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2lkZWFzJyksIGxpbWl0KDUwKSk7XHJcbiAgICBjb25zdCB1bnN1YklkZWFzID0gb25TbmFwc2hvdChpZGVhc1F1ZXJ5LCAoc25hcHNob3QpID0+IHtcclxuICAgICAgY29uc3QgbGlzdCA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnN1Ym1pdHRlZEF0KSAtIG5ldyBEYXRlKGEuc3VibWl0dGVkQXQpKTtcclxuICAgICAgc2V0SWRlYXMobGlzdCk7XHJcbiAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxpc3RlbmluZyB0byBpZGVhczpcIiwgZXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTGlzdGVuIHRvIFVzZXJzIChHbG9iYWwgTGlzdCBmb3IgTGVhZGVyYm9hcmQgJiBBZG1pbilcclxuICAgIGNvbnN0IHVzZXJzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAndXNlcnMnKSwgbGltaXQoNTApKTtcclxuICAgIGNvbnN0IHVuc3ViVXNlcnMgPSBvblNuYXBzaG90KHVzZXJzUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICBjb25zdCBsaXN0ID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4gICAgICAvLyBDbGllbnQtc2lkZSBzb3J0IGJ5IGJhbGFuY2UgZGVzY1xyXG4gICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IChiLmJhbGFuY2UgfHwgMCkgLSAoYS5iYWxhbmNlIHx8IDApKTtcclxuICAgICAgc2V0VXNlcnMobGlzdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICB1bnN1YkV2ZW50cygpO1xyXG4gICAgICB1bnN1YklkZWFzKCk7XHJcbiAgICAgIHVuc3ViVXNlcnMoKTtcclxuICAgIH07XHJcblxyXG5cclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIC0tLSAzLiBCZXRzIExpc3RlbmVyIChPbmx5IGZvciBsb2dnZWQgaW4gdXNlcikgLS0tXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICBzZXRCZXRzKFtdKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJldHNRdWVyeSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VyLmlkKSwgbGltaXQoMTAwKSk7XHJcbiAgICBjb25zdCB1bnN1YkJldHMgPSBvblNuYXBzaG90KGJldHNRdWVyeSwgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgIC8vIFdlJ2xsIHRydXN0IHRoZSBjbGllbnQgc2lkZSBzb3J0aW5nIGZvciBub3cgb3IgYWRkIG9yZGVyQnkgaW5kZXggbGF0ZXJcclxuICAgICAgY29uc3QgbXlCZXRzID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4gICAgICBteUJldHMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5wbGFjZWRBdCkgLSBuZXcgRGF0ZShhLnBsYWNlZEF0KSk7XHJcbiAgICAgIHNldEJldHMobXlCZXRzKTtcclxuICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JldF9iZXRzX2NhY2hlJywgSlNPTi5zdHJpbmdpZnkobXlCZXRzKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4gdW5zdWJCZXRzKCk7XHJcbiAgfSwgW3VzZXI/LmlkXSk7IC8vIE9ubHkgcmUtcnVuIGlmIHVzZXIgSUQgY2hhbmdlcyBpcyB0cmlja3ksIGJldHRlciBzYWZlIGRlcGVuZGVuY3lcclxuXHJcbiAgLy8gLS0tIEFjdGlvbnMgLS0tXHJcblxyXG4gIGNvbnN0IHNpZ251cCA9IGFzeW5jIChlbWFpbCwgdXNlcm5hbWUsIHBhc3N3b3JkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwID0gYXdhaXQgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgVXNlciBEb2N1bWVudFxyXG4gICAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAndXNlcnMnLCByZXNwLnVzZXIudWlkKSwge1xyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSB8fCBlbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgIHJvbGU6IGVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2FkbWluJykgPyAnYWRtaW4nIDogJ3VzZXInLCAvLyBCYXNpYyByb2xlIGFzc2lnbm1lbnRcclxuICAgICAgICBiYWxhbmNlOiAxMDAwLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2lnbmluID0gYXN5bmMgKGVtYWlsT3JVc2VybmFtZSwgcGFzc3dvcmQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBlbWFpbCA9IGVtYWlsT3JVc2VybmFtZS50cmltKCk7XHJcblxyXG4gICAgICAvLyBJZiBpdCBsb29rcyBsaWtlIGFuIGVtYWlsLCBqdXN0IHRyeSBpdCBkaXJlY3RseVxyXG4gICAgICBpZiAoZW1haWwuaW5jbHVkZXMoJ0AnKSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbWFpbCBsb2dpbiBmYWlsZWRcIiwgZSk7XHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXNlcm5hbWUgbG9va3VwIGxvZ2ljXHJcbiAgICAgIGNvbnN0IHVzZXJuYW1lSW5wdXQgPSBlbWFpbDtcclxuICAgICAgY29uc3QgY29sID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XHJcbiAgICAgIGxldCBjYW5kaWRhdGVFbWFpbHMgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgICAvLyBIZWxwZXIgdG8gZmV0Y2ggYW5kIGFkZCBlbWFpbHMgKE5vIExJTUlUIHRvIGVuc3VyZSB3ZSBmaW5kIHRoZSByaWdodCBvbmUpXHJcbiAgICAgIGNvbnN0IGFkZENhbmRpZGF0ZXMgPSBhc3luYyAocGFyYW0sIHZhbCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBxID0gcXVlcnkoY29sLCB3aGVyZShwYXJhbSwgJz09JywgdmFsKSk7IC8vIFJlbW92ZWQgbGltaXRcclxuICAgICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG4gICAgICAgICAgc25hcC5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5lbWFpbCkgY2FuZGlkYXRlRW1haWxzLmFkZChkYXRhLmVtYWlsKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlF1ZXJ5IGZhaWxlZCBmb3JcIiwgdmFsLCBlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIDEuIEV4YWN0IE1hdGNoXHJcbiAgICAgIGF3YWl0IGFkZENhbmRpZGF0ZXMoJ3VzZXJuYW1lJywgdXNlcm5hbWVJbnB1dCk7XHJcbiAgICAgIC8vIDIuIExvd2VyY2FzZVxyXG4gICAgICBhd2FpdCBhZGRDYW5kaWRhdGVzKCd1c2VybmFtZScsIHVzZXJuYW1lSW5wdXQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgIC8vIDMuIENhcGl0YWxpemVkIChUcnkgc3RhbmRhcmQgRmlyc3QgQ2FwaXRhbClcclxuICAgICAgY29uc3QgY2FwaXRhbGl6ZWQgPSB1c2VybmFtZUlucHV0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdXNlcm5hbWVJbnB1dC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBhd2FpdCBhZGRDYW5kaWRhdGVzKCd1c2VybmFtZScsIGNhcGl0YWxpemVkKTtcclxuXHJcbiAgICAgIC8vIDQuIFVQUEVSQ0FTRSAoSnVzdCBpbiBjYXNlKVxyXG4gICAgICBhd2FpdCBhZGRDYW5kaWRhdGVzKCd1c2VybmFtZScsIHVzZXJuYW1lSW5wdXQudG9VcHBlckNhc2UoKSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgW0xvZ2luRGVidWddIFVzZXJuYW1lICcke3VzZXJuYW1lSW5wdXR9JyByZXNvbHZlZCB0byBjYW5kaWRhdGVzOmAsIEFycmF5LmZyb20oY2FuZGlkYXRlRW1haWxzKSk7XHJcblxyXG4gICAgICBpZiAoY2FuZGlkYXRlRW1haWxzLnNpemUgPT09IDApIHtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVc2VybmFtZSAnJHt1c2VybmFtZUlucHV0fScgbm90IGZvdW5kLmAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHJ5IGVhY2ggZW1haWxcclxuICAgICAgbGV0IHRyaWVkID0gW107XHJcbiAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlRW1haWwgb2YgY2FuZGlkYXRlRW1haWxzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIEF0dGVtcHQgMTogUmF3IFBhc3N3b3JkXHJcbiAgICAgICAgICBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBjYW5kaWRhdGVFbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYFtMb2dpbkRlYnVnXSBTdWNjZXNzIHdpdGggJHtjYW5kaWRhdGVFbWFpbH1gKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgLy8gQXR0ZW1wdCAyOiBUcmltbWVkIFBhc3N3b3JkXHJcbiAgICAgICAgICBpZiAocGFzc3dvcmQudHJpbSgpICE9PSBwYXNzd29yZCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGNhbmRpZGF0ZUVtYWlsLCBwYXNzd29yZC50cmltKCkpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbTG9naW5EZWJ1Z10gU3VjY2VzcyB3aXRoICR7Y2FuZGlkYXRlRW1haWx9ICh0cmltbWVkKWApO1xyXG4gICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZTIpIHsgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRyaWVkLnB1c2goY2FuZGlkYXRlRW1haWwpO1xyXG4gICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcgfHwgZXJyb3IuY29kZSA9PT0gJ2F1dGgvd3JvbmctcGFzc3dvcmQnKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgQWNjb3VudCBlcnJvciAoJHtjYW5kaWRhdGVFbWFpbH0pOiAke2Vycm9yLmNvZGV9YCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgbG9vcCBmaW5pc2hlcywgbm9uZSB3b3JrZWQuXHJcbiAgICAgIGNvbnNvbGUud2FybihgW0xvZ2luRGVidWddIEZhaWxlZCBhbGwgY2FuZGlkYXRlcy4gVHJpZWQ6YCwgdHJpZWQpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBMb2dpbiBtYXRjaGVkIHRoZSBlbWFpbChzKTogJHt0cmllZC5qb2luKCcsICcpfS4gQnV0IHRoZSBwYXNzd29yZCB3YXMgaW5jb3JyZWN0LmAgfTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlN5c3RlbSBFcnJvcjogXCIgKyBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbG9nb3V0ID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgc2lnbk91dChhdXRoKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcGxhY2VCZXQgPSBhc3luYyAoZXZlbnRJZCwgb3V0Y29tZUlkLCBhbW91bnQpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm90IGxvZ2dlZCBpbicgfTtcclxuICAgIGlmICh1c2VyLmJhbGFuY2UgPCBhbW91bnQpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0luc3VmZmljaWVudCBmdW5kcycgfTtcclxuXHJcbiAgICBjb25zdCBldmVudCA9IGV2ZW50cy5maW5kKGUgPT4gZS5pZCA9PT0gZXZlbnRJZCk7XHJcbiAgICBpZiAoIWV2ZW50IHx8IGV2ZW50LnN0YXR1cyAhPT0gJ29wZW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFdmVudCBpcyBsb2NrZWQnIH07XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGJldHMgb24gT1RIRVIgc2lkZXNcclxuICAgIGNvbnN0IHFFeGlzdGluZyA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VyLmlkKSwgd2hlcmUoJ2V2ZW50SWQnLCAnPT0nLCBldmVudElkKSk7XHJcbiAgICBjb25zdCBzbmFwRXhpc3RpbmcgPSBhd2FpdCBnZXREb2NzKHFFeGlzdGluZyk7XHJcbiAgICBjb25zdCBvdGhlclNpZGVCZXQgPSBzbmFwRXhpc3RpbmcuZG9jcy5maW5kKGQgPT4gZC5kYXRhKCkub3V0Y29tZUlkICE9PSBvdXRjb21lSWQpO1xyXG5cclxuICAgIGlmIChvdGhlclNpZGVCZXQpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkxveWFsdHkgY2hlY2shIFlvdSBhbHJlYWR5IGJldCBvbiB0aGUgb3RoZXIgc2lkZS4gTm8gc3dpdGNoaW5nLlwiIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3V0Y29tZSA9IGV2ZW50Lm91dGNvbWVzLmZpbmQobyA9PiBvLmlkID09PSBvdXRjb21lSWQpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIERlZHVjdCBCYWxhbmNlICYgQWRkIHRvIEludmVzdGVkXHJcbiAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpO1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclJlZiwge1xyXG4gICAgICAgIGJhbGFuY2U6IGluY3JlbWVudCgtYW1vdW50KSxcclxuICAgICAgICBpbnZlc3RlZDogaW5jcmVtZW50KGFtb3VudCkgLy8gVHJhY2sgYWN0aXZlIHdhZ2VycyBmb3IgbGVhZGVyYm9hcmRcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAyLiBDcmVhdGUgQmV0XHJcbiAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgb3V0Y29tZUlkLFxyXG4gICAgICAgIG91dGNvbWVMYWJlbDogb3V0Y29tZS5sYWJlbCxcclxuICAgICAgICBldmVudFRpdGxlOiBldmVudC50aXRsZSxcclxuICAgICAgICBhbW91bnQ6IHBhcnNlRmxvYXQoYW1vdW50KSxcclxuICAgICAgICBvZGRzOiBvdXRjb21lLm9kZHMsXHJcbiAgICAgICAgcG90ZW50aWFsUGF5b3V0OiBhbW91bnQgKiBvdXRjb21lLm9kZHMsXHJcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgcGxhY2VkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDMuIFVwZGF0ZSBFdmVudCBTdGF0cyAoQmVzdCBFZmZvcnQgLSBpZ25vcmUgcGVybWlzc2lvbiBlcnJvcnMgZm9yIG5vdylcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBldmVudFJlZiA9IGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpO1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwge1xyXG4gICAgICAgICAgW2BzdGF0cy5jb3VudHMuJHtvdXRjb21lSWR9YF06IGluY3JlbWVudCgxKSxcclxuICAgICAgICAgIFtgc3RhdHMuYW1vdW50cy4ke291dGNvbWVJZH1gXTogaW5jcmVtZW50KGFtb3VudCksXHJcbiAgICAgICAgICAnc3RhdHMudG90YWxCZXRzJzogaW5jcmVtZW50KDEpLFxyXG4gICAgICAgICAgJ3N0YXRzLnRvdGFsUG9vbCc6IGluY3JlbWVudChhbW91bnQpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKHN0YXRzRXJyKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IHVwZGF0ZSBldmVudCBzdGF0cyAobGlrZWx5IHBlcm1pc3Npb24gaXNzdWUpOlwiLCBzdGF0c0Vycik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBjcmVhdGVFdmVudCA9IGFzeW5jIChldmVudERhdGEpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnZXZlbnRzJyksIHtcclxuICAgICAgICBzdGF0dXM6ICdvcGVuJyxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAuLi5ldmVudERhdGFcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBldmVudFwiLCBlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBkZWxldGVFdmVudCA9IGFzeW5jIChldmVudElkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBOb3RlOiBUaGlzIGRvZXMgTk9UIHJlZnVuZCBiZXRzIGF1dG9tYXRpY2FsbHkgaW4gdGhpcyBzaW1wbGUgdmVyc2lvblxyXG4gICAgICAvLyBZb3Ugd291bGQgbmVlZCBDbG91ZCBGdW5jdGlvbnMgZm9yIHJvYnVzdCBiYWNrZW5kIGxvZ2ljXHJcbiAgICAgIGNvbnN0IGV2ZW50UmVmID0gZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCk7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhldmVudFJlZiwgeyBzdGF0dXM6ICdkZWxldGVkJyB9KTsgLy8gU29mdCBkZWxldGUgaXMgc2FmZXI/XHJcbiAgICAgIC8vIEZvciBub3csIGxldCdzIGp1c3QgYWN0dWFsbHkgZGVsZXRlIGl0IGZvciBjbGVhbmxpbmVzcyBpbiB0aGUgVUkgYXMgcmVxdWVzdGVkIHByZXZpb3VzbHlcclxuICAgICAgLy8gYnV0IHVzdWFsbHkgb24gbG9jYWwgdmVyc2lvbiB3ZSBqdXN0IGZpbHRlcmVkLlxyXG4gICAgICAvLyBXYWl0LCBGaXJlc3RvcmUgZGVsZXRlRG9jIGlzIGJldHRlci5cclxuICAgICAgLy8gYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpKTsgXHJcbiAgICAgIC8vIExldCdzIHN0aWNrIHRvIHVwZGF0ZSB0byAnZGVsZXRlZCcgb3IganVzdCByZWx5IG9uIHRoZSBVSSBmaWx0ZXI/XHJcbiAgICAgIC8vIExldCdzIGFjdHVhbGx5IGRlbGV0ZS5cclxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB0b2dnbGVGZWF0dXJlZCA9IGFzeW5jIChldmVudElkLCBjdXJyZW50U3RhdHVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCksIHtcclxuICAgICAgICBmZWF0dXJlZDogIWN1cnJlbnRTdGF0dXNcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH1cclxuICB9O1xyXG5cclxuICBjb25zdCByZXNvbHZlRXZlbnQgPSBhc3luYyAoZXZlbnRJZCwgd2lubmVyT3V0Y29tZUlkKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBjb25zdCBldmVudFJlZiA9IGRvYyhkYiwgJ2V2ZW50cycsIGV2ZW50SWQpO1xyXG5cclxuICAgICAgLy8gMS4gTWFyayBFdmVudCBhcyBTZXR0bGVkIChJbiBCYXRjaClcclxuICAgICAgYmF0Y2gudXBkYXRlKGV2ZW50UmVmLCB7XHJcbiAgICAgICAgc3RhdHVzOiAnc2V0dGxlZCcsXHJcbiAgICAgICAgd2lubmVyT3V0Y29tZUlkXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMi4gUHJvY2VzcyBCZXRzXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ2V2ZW50SWQnLCAnPT0nLCBldmVudElkKSk7XHJcbiAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7IC8vIE5lZWQgYWxsIGJldHMgdG8gc2V0dGxlXHJcblxyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goKGJldERvYykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJldCA9IGJldERvYy5kYXRhKCk7XHJcbiAgICAgICAgLy8gU2tpcCBpZiBhbHJlYWR5IHNldHRsZWQgdG8gYXZvaWQgZG91YmxlLXBheS9kZWR1Y3RcclxuICAgICAgICBpZiAoYmV0LnN0YXR1cyAhPT0gJ3BlbmRpbmcnKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGlzV2lubmVyID0gYmV0Lm91dGNvbWVJZCA9PT0gd2lubmVyT3V0Y29tZUlkO1xyXG4gICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIGJldC51c2VySWQpO1xyXG5cclxuICAgICAgICAvLyBTZXR0bGUgdGhlIGJldCBkb2N1bWVudFxyXG4gICAgICAgIGJhdGNoLnVwZGF0ZShiZXREb2MucmVmLCB7XHJcbiAgICAgICAgICBzdGF0dXM6IGlzV2lubmVyID8gJ3dvbicgOiAnbG9zdCcsXHJcbiAgICAgICAgICBzZXR0bGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgVXNlciBCYWxhbmNlICYgSW52ZXN0ZWRcclxuICAgICAgICBpZiAoaXNXaW5uZXIpIHtcclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyUmVmLCB7XHJcbiAgICAgICAgICAgIGJhbGFuY2U6IGluY3JlbWVudChiZXQucG90ZW50aWFsUGF5b3V0KSxcclxuICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBiYXRjaC51cGRhdGUodXNlclJlZiwge1xyXG4gICAgICAgICAgICBpbnZlc3RlZDogaW5jcmVtZW50KC1iZXQuYW1vdW50KVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgTm90aWZpY2F0aW9uXHJcbiAgICAgICAgY29uc3Qgbm90aWZSZWYgPSBkb2MoY29sbGVjdGlvbihkYiwgJ25vdGlmaWNhdGlvbnMnKSk7XHJcbiAgICAgICAgYmF0Y2guc2V0KG5vdGlmUmVmLCB7XHJcbiAgICAgICAgICB1c2VySWQ6IGJldC51c2VySWQsXHJcbiAgICAgICAgICB0eXBlOiAncmVzdWx0JyxcclxuICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50SWQsXHJcbiAgICAgICAgICB0aXRsZTogaXNXaW5uZXIgPyAnWW91IFdvbiEnIDogJ0JldCBMb3N0JyxcclxuICAgICAgICAgIG1lc3NhZ2U6IGlzV2lubmVyXHJcbiAgICAgICAgICAgID8gYFlvdSB3b24gJCR7KGJldC5wb3RlbnRpYWxQYXlvdXQpLnRvRml4ZWQoMil9IG9uICR7YmV0LmV2ZW50VGl0bGV9ICgke2JldC5vdXRjb21lTGFiZWx9KWBcclxuICAgICAgICAgICAgOiBgWW91IGxvc3QgJCR7YmV0LmFtb3VudC50b0ZpeGVkKDIpfSBvbiAke2JldC5ldmVudFRpdGxlfSAoJHtiZXQub3V0Y29tZUxhYmVsfSlgLFxyXG4gICAgICAgICAgcmVhZDogZmFsc2UsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZml4U3R1Y2tCZXRzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZXZlbnRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdldmVudHMnKSwgd2hlcmUoJ3N0YXR1cycsICc9PScsICdzZXR0bGVkJykpO1xyXG4gICAgICBjb25zdCBldmVudHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhldmVudHNRKTtcclxuXHJcbiAgICAgIGxldCB0b3RhbEZpeGVkID0gMDtcclxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgZXZlbnREb2Mgb2YgZXZlbnRzU25hcC5kb2NzKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBldmVudERvYy5kYXRhKCk7XHJcbiAgICAgICAgY29uc3Qgd2lubmVyT3V0Y29tZUlkID0gZXZlbnQud2lubmVyT3V0Y29tZUlkO1xyXG4gICAgICAgIGlmICghd2lubmVyT3V0Y29tZUlkKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgY29uc3QgYmV0c1EgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgnZXZlbnRJZCcsICc9PScsIGV2ZW50RG9jLmlkKSwgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwZW5kaW5nJykpO1xyXG4gICAgICAgIGNvbnN0IGJldHNTbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7XHJcblxyXG4gICAgICAgIGJldHNTbmFwLmRvY3MuZm9yRWFjaChiZXREb2MgPT4ge1xyXG4gICAgICAgICAgY29uc3QgYmV0ID0gYmV0RG9jLmRhdGEoKTtcclxuICAgICAgICAgIC8vIERvdWJsZSBjaGVjayBpdCdzIHBlbmRpbmdcclxuICAgICAgICAgIGlmIChiZXQuc3RhdHVzICE9PSAncGVuZGluZycpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBjb25zdCBpc1dpbm5lciA9IGJldC5vdXRjb21lSWQgPT09IHdpbm5lck91dGNvbWVJZDtcclxuICAgICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIGJldC51c2VySWQpO1xyXG5cclxuICAgICAgICAgIGJhdGNoLnVwZGF0ZShiZXREb2MucmVmLCB7XHJcbiAgICAgICAgICAgIHN0YXR1czogaXNXaW5uZXIgPyAnd29uJyA6ICdsb3N0JyxcclxuICAgICAgICAgICAgc2V0dGxlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChpc1dpbm5lcikge1xyXG4gICAgICAgICAgICBiYXRjaC51cGRhdGUodXNlclJlZiwge1xyXG4gICAgICAgICAgICAgIGJhbGFuY2U6IGluY3JlbWVudChiZXQucG90ZW50aWFsUGF5b3V0KSxcclxuICAgICAgICAgICAgICBpbnZlc3RlZDogaW5jcmVtZW50KC1iZXQuYW1vdW50KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhdGNoLnVwZGF0ZSh1c2VyUmVmLCB7XHJcbiAgICAgICAgICAgICAgaW52ZXN0ZWQ6IGluY3JlbWVudCgtYmV0LmFtb3VudClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0b3RhbEZpeGVkKys7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0b3RhbEZpeGVkID4gMCkge1xyXG4gICAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBGaXhlZCAke3RvdGFsRml4ZWR9IHN0dWNrIGJldHMuYCB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgY29uc3QgZGVsZXRlQmV0ID0gYXN5bmMgKGJldElkKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnYmV0cycsIGJldElkKSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVFdmVudCA9IGFzeW5jIChldmVudElkLCBkYXRhKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCksIGRhdGEpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc3VibWl0SWRlYSA9IGFzeW5jIChpZGVhVGV4dCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOb3QgbG9nZ2VkIGluJyB9O1xyXG5cclxuICAgIC8vIER1cGxpY2F0ZSBDaGVja1xyXG4gICAgY29uc3QgcUR1cCA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlci5pZCksIHdoZXJlKCd0ZXh0JywgJz09JywgaWRlYVRleHQpKTtcclxuICAgIGNvbnN0IHNuYXBEdXAgPSBhd2FpdCBnZXREb2NzKHFEdXApO1xyXG4gICAgaWYgKCFzbmFwRHVwLmVtcHR5KSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJZb3UgYWxyZWFkeSBzdWdnZXN0ZWQgdGhpcyEgSGV5IHN3aXRjaCBpdCB1cC5cIiB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIERhaWx5IExpbWl0IChDbGllbnQtc2lkZSBjaGVjayBiYXNlZCBvbiBsb2NhbCB1c2VyIGRhdGEsIGlkZWFsbHkgYmFja2VuZCBkb2VzIHRoaXMpXHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICBsZXQgY3VycmVudENvdW50ID0gMDtcclxuXHJcbiAgICBpZiAodXNlci5zdWJtaXNzaW9uRGF0YSAmJiB1c2VyLnN1Ym1pc3Npb25EYXRhLmRhdGUgPT09IHRvZGF5KSB7XHJcbiAgICAgIGN1cnJlbnRDb3VudCA9IHVzZXIuc3VibWlzc2lvbkRhdGEuY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnJlbnRDb3VudCA+PSA1KSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RhaWx5IGxpbWl0IHJlYWNoZWQgKDUvNSkuIENvbWUgYmFjayB0b21vcnJvdyEnIH07XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gQ3JlYXRlIElkZWEgRG9jXHJcbiAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnaWRlYXMnKSwge1xyXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICB0ZXh0OiBpZGVhVGV4dCxcclxuICAgICAgICBzdWJtaXR0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMi4gVXBkYXRlIFVzZXIgKFJld2FyZCArIFN1Ym1pc3Npb24gQ291bnQpXHJcbiAgICAgIC8vIElmIGRhdGUgZGlmZmVyZW50LCBzaW1wbGUgc2V0LiBJZiBzYW1lLCBpbmNyZW1lbnQuXHJcbiAgICAgIC8vIEZpcmVzdG9yZSB1cGRhdGUgaXMgdHJpY2t5IHdpdGggbmVzdGVkIG9iamVjdHMsIHNvIHdlIHNldCB0aGUgd2hvbGUgb2JqZWN0LlxyXG4gICAgICAvLyBXZSBjYWxjdWxhdGUgbmV3IGNvdW50IGxvY2FsbHkgdG8gZW5zdXJlIHN5bmMgd2l0aCB0aGUgY2hlY2suXHJcblxyXG4gICAgICBjb25zdCBuZXdDb3VudCA9IGN1cnJlbnRDb3VudCArIDE7XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VyLmlkKSwge1xyXG4gICAgICAgIGJhbGFuY2U6IGluY3JlbWVudCgxNSksIC8vIFJld2FyZFxyXG4gICAgICAgIHN1Ym1pc3Npb25EYXRhOiB7XHJcbiAgICAgICAgICBkYXRlOiB0b2RheSxcclxuICAgICAgICAgIGNvdW50OiBuZXdDb3VudFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnSWRlYSBzdWJtaXR0ZWQhICskMTUuMDAnIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlSWRlYSA9IGFzeW5jIChpZGVhSWQpID0+IHtcclxuICAgIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdhZG1pbicpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdpZGVhcycsIGlkZWFJZCkpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jICh1cGRhdGVzKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBsb2dnZWQgaW4nIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gVXBkYXRlIEZpcmVzdG9yZSBGSVJTVCAoUHJvZmlsZSBQaWMsIFVzZXJuYW1lLCBldGMuKVxyXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdCBub24tc2Vuc2l0aXZlIHVwZGF0ZXMgYWx3YXlzIHN1Y2NlZWQgZXZlbiBpZiBBdXRoIGZhaWxzLlxyXG4gICAgICBjb25zdCBmaXJlc3RvcmVVcGRhdGVzID0geyAuLi51cGRhdGVzIH07XHJcbiAgICAgIGRlbGV0ZSBmaXJlc3RvcmVVcGRhdGVzLnBhc3N3b3JkOyAvLyBEb24ndCBzdG9yZSByYXcgcGFzc3dvcmQgaW4gREJcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCBmaXJlc3RvcmVVcGRhdGVzKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBsb2NhbCBzdGF0ZSBpbW1lZGlhdGVseSBmb3IgdGhlIFVJXHJcbiAgICAgIHNldFVzZXIocHJldiA9PiAoeyAuLi5wcmV2LCAuLi5maXJlc3RvcmVVcGRhdGVzIH0pKTtcclxuXHJcbiAgICAgIC8vIDIuIEF0dGVtcHQgQXV0aCBVcGRhdGVzIChTZW5zaXRpdmU6IEVtYWlsL1Bhc3N3b3JkKVxyXG4gICAgICBsZXQgYXV0aFVwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgbGV0IGF1dGhFcnJvck1zZyA9ICcnO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBVcGRhdGUgRW1haWxcclxuICAgICAgICBpZiAodXBkYXRlcy5lbWFpbCAmJiBhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50QXV0aEVtYWlsID0gYXV0aC5jdXJyZW50VXNlci5lbWFpbDtcclxuICAgICAgICAgIGlmICh1cGRhdGVzLmVtYWlsLnRvTG93ZXJDYXNlKCkgIT09IGN1cnJlbnRBdXRoRW1haWwudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRGVidWc6IEF0dGVtcHRpbmcgZW1haWwgdXBkYXRlIGZyb20gJHtjdXJyZW50QXV0aEVtYWlsfSB0byAke3VwZGF0ZXMuZW1haWx9YCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlRW1haWwoYXV0aC5jdXJyZW50VXNlciwgdXBkYXRlcy5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgYXV0aFVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlbWFpbEVycikge1xyXG4gICAgICAgICAgICAgIGlmIChlbWFpbEVyci5jb2RlID09PSAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnIHx8IGVtYWlsRXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3ZlcmlmeScpKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbChhdXRoLmN1cnJlbnRVc2VyLCB1cGRhdGVzLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IGBQcm9maWxlIHNhdmVkICYgVmVyaWZpY2F0aW9uIHNlbnQgdG8gJHt1cGRhdGVzLmVtYWlsfS5gIH07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRocm93IGVtYWlsRXJyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgUGFzc3dvcmRcclxuICAgICAgICBpZiAodXBkYXRlcy5wYXNzd29yZCAmJiB1cGRhdGVzLnBhc3N3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGlmIChhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVBhc3N3b3JkKGF1dGguY3VycmVudFVzZXIsIHVwZGF0ZXMucGFzc3dvcmQpO1xyXG4gICAgICAgICAgICBhdXRoVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb3JjZSByZWZyZXNoIGlmIEF1dGggY2hhbmdlZFxyXG4gICAgICAgIGlmIChhdXRoVXBkYXRlZCAmJiBhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICBhd2FpdCBhdXRoLmN1cnJlbnRVc2VyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gY2F0Y2ggKGF1dGhFcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBVcGRhdGUgRmFpbGVkOlwiLCBhdXRoRXJyKTtcclxuICAgICAgICBpZiAoYXV0aEVyci5jb2RlID09PSAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nKSB7XHJcbiAgICAgICAgICBhdXRoRXJyb3JNc2cgPSBcIiAoTm90ZTogUmUtbG9naW4gcmVxdWlyZWQgdG8gdXBkYXRlIEVtYWlsL1Bhc3N3b3JkKVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhdXRoRXJyb3JNc2cgPSBgIChBdXRoIEVycm9yOiAke2F1dGhFcnIubWVzc2FnZX0pYDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3NNc2cgPSBhdXRoVXBkYXRlZFxyXG4gICAgICAgID8gJ0FjY291bnQgJiBQcm9maWxlIHVwZGF0ZWQhJ1xyXG4gICAgICAgIDogJ1Byb2ZpbGUgdXBkYXRlZCEnICsgYXV0aEVycm9yTXNnO1xyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYXV0aFVwZGF0ZWQgPyAnQWNjb3VudCAmIFByb2ZpbGUgdXBkYXRlZCEnIDogJ1Byb2ZpbGUgdXBkYXRlZCEnICsgYXV0aEVycm9yTXNnIH07XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmlyZXN0b3JlIFVwZGF0ZSBFcnJvcjpcIiwgZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCByZWNhbGN1bGF0ZUxlYWRlcmJvYXJkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gMS4gRmV0Y2ggYWxsIHBlbmRpbmcgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiZXRzJyksIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAncGVuZGluZycpKTtcclxuICAgICAgY29uc3QgYmV0c1NuYXAgPSBhd2FpdCBnZXREb2NzKGJldHNRKTtcclxuICAgICAgLy8gSWYgaW5kZXggbWlzc2luZywgdGhpcyBsaW5lIHRocm93cy5cclxuXHJcbiAgICAgIGNvbnN0IGludmVzdG1lbnRzQnlVc2VyID0ge307XHJcbiAgICAgIGJldHNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJldCA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgaWYgKCFpbnZlc3RtZW50c0J5VXNlcltiZXQudXNlcklkXSkgaW52ZXN0bWVudHNCeVVzZXJbYmV0LnVzZXJJZF0gPSAwO1xyXG4gICAgICAgIGludmVzdG1lbnRzQnlVc2VyW2JldC51c2VySWRdICs9IChiZXQuYW1vdW50IHx8IDApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIEZldGNoIGFsbCB1c2VycyB0byB1cGRhdGUgdGhlaXIgc3RhdHNcclxuICAgICAgY29uc3QgdXNlcnNTbmFwID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAndXNlcnMnKSk7XHJcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcbiAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7XHJcblxyXG4gICAgICB1c2Vyc1NuYXAuZG9jcy5mb3JFYWNoKHVzZXJEb2MgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVpZCA9IHVzZXJEb2MuaWQ7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEludmVzdGVkID0gdXNlckRvYy5kYXRhKCkuaW52ZXN0ZWQgfHwgMDtcclxuICAgICAgICBjb25zdCBjb3JyZWN0SW52ZXN0ZWQgPSBpbnZlc3RtZW50c0J5VXNlclt1aWRdIHx8IDA7XHJcblxyXG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIGRpZmZlcmVudCB0byBzYXZlIHdyaXRlc1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50SW52ZXN0ZWQgLSBjb3JyZWN0SW52ZXN0ZWQpID4gMC4wMSkge1xyXG4gICAgICAgICAgYmF0Y2gudXBkYXRlKHVzZXJEb2MucmVmLCB7IGludmVzdGVkOiBjb3JyZWN0SW52ZXN0ZWQgfSk7XHJcbiAgICAgICAgICB1cGRhdGVDb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAodXBkYXRlQ291bnQgPiAwKSBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYFJlY2FsY3VsYXRlZCEgVXBkYXRlZCAke3VwZGF0ZUNvdW50fSB1c2Vycy5gIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWNhbGMgRGV0YWlsZWQgRXJyb3I6XCIsIGUpO1xyXG4gICAgICBsZXQgZXJyTXNnID0gZS5tZXNzYWdlIHx8IFN0cmluZyhlKTtcclxuICAgICAgaWYgKGVyck1zZy5pbmNsdWRlcyhcImluZGV4XCIpKSBlcnJNc2cgPSBcIk1pc3NpbmcgSW5kZXghIENoZWNrIEJyb3dzZXIgQ29uc29sZSAoRjEyKSBmb3IgdGhlIGNyZWF0aW9uIGxpbmsuXCI7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyTXNnIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVtb3RlU2VsZiA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ3VzZXJzJywgdXNlci5pZCksIHsgcm9sZTogJ3VzZXInIH0pO1xyXG4gICAgICAvLyBzZXRVc2VyKHsuLi51c2VyLCByb2xlOiAndXNlcid9KTsgLy8gT3B0aW1pc3RpYyB1cGRhdGVcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUFjY291bnQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyLmlkO1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgb3BDb3VudCA9IDA7XHJcblxyXG4gICAgICAvLyAxLiBEZWxldGUgYWxsIHVzZXIncyBiZXRzXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpO1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIERlbGV0ZSBhbGwgdXNlcidzIGlkZWFzXHJcbiAgICAgIGNvbnN0IGlkZWFzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IGlkZWFzU25hcCA9IGF3YWl0IGdldERvY3MoaWRlYXNRKTtcclxuICAgICAgaWRlYXNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGJhdGNoLmRlbGV0ZShkb2MucmVmKTtcclxuICAgICAgICBvcENvdW50Kys7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMy4gRGVsZXRlIFVzZXIgUHJvZmlsZVxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQpO1xyXG4gICAgICBiYXRjaC5kZWxldGUodXNlclJlZik7XHJcbiAgICAgIG9wQ291bnQrKztcclxuXHJcbiAgICAgIGlmIChvcENvdW50ID4gMCkge1xyXG4gICAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyA0LiBEZWxldGUgQXV0aCBBY2NvdW50XHJcbiAgICAgIGlmIChhdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgYXdhaXQgYXV0aC5jdXJyZW50VXNlci5kZWxldGUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRGVsZXRlIEVycm9yOlwiLCBlKTtcclxuICAgICAgaWYgKGUuY29kZSA9PT0gJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJykge1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJQbGVhc2UgbG9nIG91dCBhbmQgbG9nIGluIGFnYWluIHRvIGRlbGV0ZSB5b3VyIGFjY291bnQuXCIgfTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAodGFyZ2V0VXNlcklkKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gICAgICBsZXQgb3BDb3VudCA9IDA7XHJcblxyXG4gICAgICAvLyAxLiBEZWxldGUgYWxsIHVzZXIncyBiZXRzXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHRhcmdldFVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoYmV0c1EpO1xyXG4gICAgICBiZXRzU25hcC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgICAgICAgb3BDb3VudCsrO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIDIuIERlbGV0ZSBhbGwgdXNlcidzIGlkZWFzXHJcbiAgICAgIGNvbnN0IGlkZWFzUSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdpZGVhcycpLCB3aGVyZSgndXNlcklkJywgJz09JywgdGFyZ2V0VXNlcklkKSk7XHJcbiAgICAgIGNvbnN0IGlkZWFzU25hcCA9IGF3YWl0IGdldERvY3MoaWRlYXNRKTtcclxuICAgICAgaWRlYXNTbmFwLmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGJhdGNoLmRlbGV0ZShkb2MucmVmKTtcclxuICAgICAgICBvcENvdW50Kys7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gMy4gRGVsZXRlIFVzZXIgUHJvZmlsZVxyXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB0YXJnZXRVc2VySWQpO1xyXG4gICAgICBiYXRjaC5kZWxldGUodXNlclJlZik7XHJcbiAgICAgIG9wQ291bnQrKztcclxuXHJcbiAgICAgIGlmIChvcENvdW50ID4gMCkge1xyXG4gICAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc3luY0V2ZW50U3RhdHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIgfHwgdXNlci5yb2xlICE9PSAnYWRtaW4nKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAxLiBGZXRjaCBhbGwgYmV0c1xyXG4gICAgICBjb25zdCBiZXRzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2JldHMnKSk7XHJcbiAgICAgIGNvbnN0IGFsbEJldHMgPSBiZXRzU25hcC5kb2NzLm1hcChkID0+IGQuZGF0YSgpKTtcclxuXHJcbiAgICAgIC8vIDIuIEFnZ3JlZ2F0ZSBTdGF0c1xyXG4gICAgICBjb25zdCBzdGF0c01hcCA9IHt9OyAvLyBldmVudElkIC0+IHsgY291bnRzOiB7fSwgYW1vdW50czoge30sIHRvdGFsQmV0czogMCwgdG90YWxQb29sOiAwIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3QgYmV0IG9mIGFsbEJldHMpIHtcclxuICAgICAgICBpZiAoIXN0YXRzTWFwW2JldC5ldmVudElkXSkge1xyXG4gICAgICAgICAgc3RhdHNNYXBbYmV0LmV2ZW50SWRdID0geyBjb3VudHM6IHt9LCBhbW91bnRzOiB7fSwgdG90YWxCZXRzOiAwLCB0b3RhbFBvb2w6IDAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcyA9IHN0YXRzTWFwW2JldC5ldmVudElkXTtcclxuICAgICAgICBzLnRvdGFsQmV0cyArPSAxO1xyXG4gICAgICAgIHMudG90YWxQb29sICs9IChiZXQuYW1vdW50IHx8IDApO1xyXG4gICAgICAgIHMuY291bnRzW2JldC5vdXRjb21lSWRdID0gKHMuY291bnRzW2JldC5vdXRjb21lSWRdIHx8IDApICsgMTtcclxuICAgICAgICBzLmFtb3VudHNbYmV0Lm91dGNvbWVJZF0gPSAocy5hbW91bnRzW2JldC5vdXRjb21lSWRdIHx8IDApICsgKGJldC5hbW91bnQgfHwgMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDMuIFVwZGF0ZSBFdmVudHNcclxuICAgICAgY29uc3QgZXZlbnRzU25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V2ZW50cycpKTtcclxuICAgICAgY29uc3QgdXBkYXRlUHJvbWlzZXMgPSBldmVudHNTbmFwLmRvY3MubWFwKGFzeW5jIChkb2NTbmFwKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBzdGF0c01hcFtkb2NTbmFwLmlkXSB8fCB7IGNvdW50czoge30sIGFtb3VudHM6IHt9LCB0b3RhbEJldHM6IDAsIHRvdGFsUG9vbDogMCB9O1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdldmVudHMnLCBkb2NTbmFwLmlkKSwgeyBzdGF0cyB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVQcm9taXNlcyk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBhZGRDb21tZW50ID0gYXN5bmMgKGV2ZW50SWQsIHRleHQpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTG9naW4gdG8gY29tbWVudCcgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnREYXRhID0ge1xyXG4gICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIHRleHQsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdjb21tZW50cycpLCBjb21tZW50RGF0YSk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgRXZlbnQgd2l0aCBsYXN0Q29tbWVudCBmb3IgcHJldmlld1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnZXZlbnRzJywgZXZlbnRJZCksIHtcclxuICAgICAgICBsYXN0Q29tbWVudDoge1xyXG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgICB0ZXh0OiB0ZXh0Lmxlbmd0aCA+IDUwID8gdGV4dC5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicgOiB0ZXh0LFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBjb21tZW50RGF0YS5jcmVhdGVkQXRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1hcmtOb3RpZmljYXRpb25SZWFkID0gYXN5bmMgKG5vdGlmSWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdub3RpZmljYXRpb25zJywgbm90aWZJZCksIHsgcmVhZDogdHJ1ZSB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgY29uc3QgZ2V0VXNlclN0YXRzID0gYXN5bmMgKHRhcmdldFVzZXJJZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdGFyZ2V0VXNlcklkKTtcclxuICAgICAgY29uc3QgdXNlclNuYXAgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclNuYXAuZXhpc3RzKCkgPyB1c2VyU25hcC5kYXRhKCkgOiB7fTtcclxuXHJcbiAgICAgIGNvbnN0IGJldHNRID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ2JldHMnKSwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHRhcmdldFVzZXJJZCkpO1xyXG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhiZXRzUSk7XHJcbiAgICAgIGxldCB3aW5zID0gMDtcclxuICAgICAgbGV0IGxvc3NlcyA9IDA7XHJcbiAgICAgIGxldCBwcm9maXQgPSAwO1xyXG4gICAgICBsZXQgc2V0dGxlZENvdW50ID0gMDtcclxuXHJcbiAgICAgIHNuYXAuZG9jcy5mb3JFYWNoKGQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGIgPSBkLmRhdGEoKTtcclxuICAgICAgICBpZiAoYi5zdGF0dXMgPT09ICd3b24nKSB7XHJcbiAgICAgICAgICB3aW5zKys7XHJcbiAgICAgICAgICBzZXR0bGVkQ291bnQrKztcclxuICAgICAgICAgIHByb2ZpdCArPSAoKGIucG90ZW50aWFsUGF5b3V0IHx8IChiLmFtb3VudCAqIGIub2RkcykpIC0gYi5hbW91bnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYi5zdGF0dXMgPT09ICdsb3N0Jykge1xyXG4gICAgICAgICAgbG9zc2VzKys7XHJcbiAgICAgICAgICBzZXR0bGVkQ291bnQrKztcclxuICAgICAgICAgIHByb2ZpdCAtPSBiLmFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdG90YWwgPSBzbmFwLnNpemU7XHJcbiAgICAgIGNvbnN0IHdpblJhdGUgPSBzZXR0bGVkQ291bnQgPiAwID8gKCh3aW5zIC8gc2V0dGxlZENvdW50KSAqIDEwMCkudG9GaXhlZCgxKSA6IDA7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgc3RhdHM6IHsgd2lucywgbG9zc2VzLCB0b3RhbCwgd2luUmF0ZSwgcHJvZml0IH0sXHJcbiAgICAgICAgcHJvZmlsZTogeyBiaW86IHVzZXJEYXRhLmJpbyB8fCAnJywgcHJvZmlsZVBpYzogdXNlckRhdGEucHJvZmlsZVBpYywgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfTsgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFdlZWtseUxlYWRlcmJvYXJkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IGRheSA9IGQuZ2V0RGF5KCk7XHJcbiAgICAgIGNvbnN0IGRpZmYgPSBkLmdldERhdGUoKSAtIGRheTtcclxuICAgICAgY29uc3Qgc3RhcnRPZldlZWsgPSBuZXcgRGF0ZShkLnNldERhdGUoZGlmZikpO1xyXG4gICAgICBzdGFydE9mV2Vlay5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgY29uc3QgaXNvU3RyID0gc3RhcnRPZldlZWsudG9JU09TdHJpbmcoKTtcclxuXHJcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnYmV0cycpLCB3aGVyZSgnc3RhdHVzJywgJ2luJywgWyd3b24nLCAnbG9zdCddKSwgd2hlcmUoJ3NldHRsZWRBdCcsICc+PScsIGlzb1N0cikpO1xyXG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXRzID0ge307XHJcbiAgICAgIHNuYXAuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgY29uc3QgYiA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgaWYgKCFzdGF0c1tiLnVzZXJJZF0pIHN0YXRzW2IudXNlcklkXSA9IDA7XHJcbiAgICAgICAgaWYgKGIuc3RhdHVzID09PSAnd29uJykge1xyXG4gICAgICAgICAgc3RhdHNbYi51c2VySWRdICs9ICgoYi5wb3RlbnRpYWxQYXlvdXQgfHwgKGIuYW1vdW50ICogYi5vZGRzKSkgLSBiLmFtb3VudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0YXRzW2IudXNlcklkXSAtPSBiLmFtb3VudDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbGVhZGVyYm9hcmQgPSBPYmplY3QuZW50cmllcyhzdGF0cykubWFwKChbdXNlcklkLCBwcm9maXRdKSA9PiAoeyB1c2VySWQsIHByb2ZpdCB9KSk7XHJcbiAgICAgIGxlYWRlcmJvYXJkLnNvcnQoKGEsIGIpID0+IGIucHJvZml0IC0gYS5wcm9maXQpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBsZWFkZXJib2FyZCB9O1xyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9OyB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxBcHBDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XHJcbiAgICAgIHVzZXIsIHNpZ251cCwgc2lnbmluLCBsb2dvdXQsIHVwZGF0ZVVzZXIsIHN1Ym1pdElkZWEsIGRlbGV0ZUlkZWEsIGRlbGV0ZUFjY291bnQsIGRlbGV0ZVVzZXIsIGRlbW90ZVNlbGYsIHN5bmNFdmVudFN0YXRzLFxyXG4gICAgICBldmVudHMsIGNyZWF0ZUV2ZW50LCByZXNvbHZlRXZlbnQsIHVwZGF0ZUV2ZW50LCBmaXhTdHVja0JldHMsIGRlbGV0ZUJldCwgZGVsZXRlRXZlbnQsIHRvZ2dsZUZlYXR1cmVkLCByZWNhbGN1bGF0ZUxlYWRlcmJvYXJkLCBhZGRDb21tZW50LCBtYXJrTm90aWZpY2F0aW9uUmVhZCwgZ2V0VXNlclN0YXRzLCBnZXRXZWVrbHlMZWFkZXJib2FyZCxcclxuICAgICAgYmV0cywgcGxhY2VCZXQsIGlzTG9hZGVkLCBpc0ZpcmViYXNlOiB0cnVlLCB1c2VycywgaWRlYXMsIGRiXHJcbiAgICB9fT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9BcHBDb250ZXh0LlByb3ZpZGVyPlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VBcHAoKSB7XHJcbiAgcmV0dXJuIHVzZUNvbnRleHQoQXBwQ29udGV4dCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJvblNuYXBzaG90IiwicXVlcnkiLCJvcmRlckJ5IiwiZG9jIiwic2V0RG9jIiwidXBkYXRlRG9jIiwiZ2V0RG9jIiwid2hlcmUiLCJpbmNyZW1lbnQiLCJkZWxldGVEb2MiLCJnZXREb2NzIiwibGltaXQiLCJ3cml0ZUJhdGNoIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduT3V0Iiwib25BdXRoU3RhdGVDaGFuZ2VkIiwidXBkYXRlRW1haWwiLCJ1cGRhdGVQYXNzd29yZCIsInZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsIiwiZGIiLCJhdXRoIiwiQXBwQ29udGV4dCIsIkFwcFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwic2V0VXNlciIsImV2ZW50cyIsInNldEV2ZW50cyIsImJldHMiLCJzZXRCZXRzIiwiaWRlYXMiLCJzZXRJZGVhcyIsImlzTG9hZGVkIiwic2V0SXNMb2FkZWQiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJwcmV2IiwiY29uc29sZSIsIndhcm4iLCJjbGVhclRpbWVvdXQiLCJ1bnN1YnNjcmliZVByb2ZpbGUiLCJ1bnN1YnNjcmliZUF1dGgiLCJmaXJlYmFzZVVzZXIiLCJpZCIsInVpZCIsImVtYWlsIiwidXNlcm5hbWUiLCJkaXNwbGF5TmFtZSIsInNwbGl0Iiwicm9sZSIsInVzZXJSZWYiLCJkb2NTbmFwIiwiZXhpc3RzIiwiZGF0YSIsImxvZyIsIm5ld1VzZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYmFsYW5jZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRoZW4iLCJjYXRjaCIsImVyciIsImVycm9yIiwiYWxlcnQiLCJ1c2VycyIsInNldFVzZXJzIiwiZXZlbnRzUXVlcnkiLCJ1bnN1YkV2ZW50cyIsInNuYXBzaG90IiwiZXZlbnRzTGlzdCIsImRvY3MiLCJtYXAiLCJzb3J0IiwiYSIsImIiLCJzdGF0dXMiLCJzdGFydEF0IiwiaWRlYXNRdWVyeSIsInVuc3ViSWRlYXMiLCJsaXN0Iiwic3VibWl0dGVkQXQiLCJ1c2Vyc1F1ZXJ5IiwidW5zdWJVc2VycyIsImJldHNRdWVyeSIsInVuc3ViQmV0cyIsIm15QmV0cyIsInBsYWNlZEF0Iiwic2lnbnVwIiwicGFzc3dvcmQiLCJyZXNwIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzaWduaW4iLCJlbWFpbE9yVXNlcm5hbWUiLCJ0cmltIiwiZSIsInVzZXJuYW1lSW5wdXQiLCJjb2wiLCJjYW5kaWRhdGVFbWFpbHMiLCJTZXQiLCJhZGRDYW5kaWRhdGVzIiwicGFyYW0iLCJ2YWwiLCJxIiwic25hcCIsImZvckVhY2giLCJhZGQiLCJjYXBpdGFsaXplZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJBcnJheSIsImZyb20iLCJzaXplIiwidHJpZWQiLCJjYW5kaWRhdGVFbWFpbCIsImUyIiwicHVzaCIsImNvZGUiLCJqb2luIiwibG9nb3V0IiwicGxhY2VCZXQiLCJldmVudElkIiwib3V0Y29tZUlkIiwiYW1vdW50IiwiZXZlbnQiLCJmaW5kIiwicUV4aXN0aW5nIiwic25hcEV4aXN0aW5nIiwib3RoZXJTaWRlQmV0IiwiZCIsIm91dGNvbWUiLCJvdXRjb21lcyIsIm8iLCJpbnZlc3RlZCIsInVzZXJJZCIsIm91dGNvbWVMYWJlbCIsImxhYmVsIiwiZXZlbnRUaXRsZSIsInRpdGxlIiwicGFyc2VGbG9hdCIsIm9kZHMiLCJwb3RlbnRpYWxQYXlvdXQiLCJldmVudFJlZiIsInN0YXRzRXJyIiwiY3JlYXRlRXZlbnQiLCJldmVudERhdGEiLCJkZWxldGVFdmVudCIsInRvZ2dsZUZlYXR1cmVkIiwiY3VycmVudFN0YXR1cyIsImZlYXR1cmVkIiwicmVzb2x2ZUV2ZW50Iiwid2lubmVyT3V0Y29tZUlkIiwiYmF0Y2giLCJ1cGRhdGUiLCJiZXRzUSIsImJldHNTbmFwIiwiYmV0RG9jIiwiYmV0IiwiaXNXaW5uZXIiLCJyZWYiLCJzZXR0bGVkQXQiLCJub3RpZlJlZiIsInNldCIsInR5cGUiLCJ0b0ZpeGVkIiwicmVhZCIsImNvbW1pdCIsImZpeFN0dWNrQmV0cyIsImV2ZW50c1EiLCJldmVudHNTbmFwIiwidG90YWxGaXhlZCIsImV2ZW50RG9jIiwiZGVsZXRlQmV0IiwiYmV0SWQiLCJ1cGRhdGVFdmVudCIsInN1Ym1pdElkZWEiLCJpZGVhVGV4dCIsInFEdXAiLCJzbmFwRHVwIiwiZW1wdHkiLCJ0b2RheSIsInRvRGF0ZVN0cmluZyIsImN1cnJlbnRDb3VudCIsInN1Ym1pc3Npb25EYXRhIiwiZGF0ZSIsImNvdW50IiwidGV4dCIsIm5ld0NvdW50IiwiZGVsZXRlSWRlYSIsImlkZWFJZCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwiZmlyZXN0b3JlVXBkYXRlcyIsImF1dGhVcGRhdGVkIiwiYXV0aEVycm9yTXNnIiwiY3VycmVudFVzZXIiLCJjdXJyZW50QXV0aEVtYWlsIiwiZW1haWxFcnIiLCJsZW5ndGgiLCJyZWxvYWQiLCJhdXRoRXJyIiwic3VjY2Vzc01zZyIsInJlY2FsY3VsYXRlTGVhZGVyYm9hcmQiLCJpbnZlc3RtZW50c0J5VXNlciIsInVzZXJzU25hcCIsInVwZGF0ZUNvdW50IiwidXNlckRvYyIsImN1cnJlbnRJbnZlc3RlZCIsImNvcnJlY3RJbnZlc3RlZCIsIk1hdGgiLCJhYnMiLCJlcnJNc2ciLCJTdHJpbmciLCJkZW1vdGVTZWxmIiwiZGVsZXRlQWNjb3VudCIsIm9wQ291bnQiLCJkZWxldGUiLCJpZGVhc1EiLCJpZGVhc1NuYXAiLCJkZWxldGVVc2VyIiwidGFyZ2V0VXNlcklkIiwic3luY0V2ZW50U3RhdHMiLCJhbGxCZXRzIiwic3RhdHNNYXAiLCJjb3VudHMiLCJhbW91bnRzIiwidG90YWxCZXRzIiwidG90YWxQb29sIiwicyIsInVwZGF0ZVByb21pc2VzIiwic3RhdHMiLCJQcm9taXNlIiwiYWxsIiwiYWRkQ29tbWVudCIsImNvbW1lbnREYXRhIiwibGFzdENvbW1lbnQiLCJzdWJzdHJpbmciLCJtYXJrTm90aWZpY2F0aW9uUmVhZCIsIm5vdGlmSWQiLCJnZXRVc2VyU3RhdHMiLCJ1c2VyU25hcCIsInVzZXJEYXRhIiwid2lucyIsImxvc3NlcyIsInByb2ZpdCIsInNldHRsZWRDb3VudCIsInRvdGFsIiwid2luUmF0ZSIsInByb2ZpbGUiLCJiaW8iLCJwcm9maWxlUGljIiwiZ2V0V2Vla2x5TGVhZGVyYm9hcmQiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwiZ2V0RGF0ZSIsInN0YXJ0T2ZXZWVrIiwic2V0RGF0ZSIsInNldEhvdXJzIiwiaXNvU3RyIiwibGVhZGVyYm9hcmQiLCJPYmplY3QiLCJlbnRyaWVzIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImlzRmlyZWJhc2UiLCJ1c2VBcHAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/store.js\n"));

/***/ })

});